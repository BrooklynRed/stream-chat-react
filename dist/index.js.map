{"version":3,"file":"index.js","sources":["../src/Streami18n.js","../src/components/SafeAnchor.js","../src/assets/Poweredby_100px-White_VertText.png","../src/context.js","../src/components/Card.js","../src/components/Image.js","../src/components/AttachmentActions.js","../src/components/Audio.js","../src/components/Attachment.js","../src/components/Avatar.js","../src/components/LoadingIndicator.js","../src/components/LoadingErrorIndicator.js","../src/utils.js","../src/components/MessageActionsBox.js","../src/components/ReactionsList.js","../src/components/Tooltip.js","../src/components/Gallery.js","../src/components/ReactionSelector.js","../src/components/MessageRepliesCountButton.js","../src/components/Modal.js","../src/components/AutoCompleteTextarea/listener.js","../src/components/AutoCompleteTextarea/Item.js","../src/components/AutoCompleteTextarea/List.js","../src/components/AutoCompleteTextarea/utils.js","../src/components/AutoCompleteTextarea/Textarea.js","../src/components/EmoticonItem.js","../src/components/UserItem.js","../src/components/CommandItem.js","../src/components/ChatAutoComplete.js","../src/components/MessageInputLarge.js","../src/components/SendButton.js","../src/components/MessageInput.js","../src/components/EditMessageForm.js","../src/components/MessageSimple.js","../src/components/Channel.js","../src/components/ChannelHeader.js","../src/components/ChannelPreviewLastMessage.js","../src/components/ChannelPreviewCountOnly.js","../src/components/ChannelPreview.js","../src/components/EmptyStateIndicator.js","../src/components/LoadingChannels.js","../src/components/LoadMoreButton.js","../src/components/LoadMorePaginator.js","../src/assets/str-chat__connection-error.svg","../src/components/ChatDown.js","../src/assets/str-chat__icon-chevron-down.svg","../src/components/ChannelListTeam.js","../src/components/ChannelList.js","../src/components/ChannelListMessenger.js","../src/components/ChannelPreviewCompact.js","../src/components/ChannelPreviewMessenger.js","../src/components/ChannelSearch.js","../src/components/Chat.js","../src/components/DateSeparator.js","../src/components/EventComponent.js","../src/components/InfiniteScroll.js","../src/components/InfiniteScrollPaginator.js","../src/components/Message.js","../src/components/MessageActions.js","../src/components/MessageCommerce.js","../src/components/MessageInputFlat.js","../src/components/MessageInputSmall.js","../src/components/ReverseInfiniteScroll.js","../src/components/MessageNotification.js","../src/components/MessageList.js","../src/components/SimpleReactionsList.js","../src/components/MessageLivestream.js","../src/components/MessageTeam.js","../src/components/Thread.js","../src/components/TypingIndicator.js","../src/components/Window.js"],"sourcesContent":["import i18n from 'i18next';\nimport Dayjs from 'dayjs';\nimport calendar from 'dayjs/plugin/calendar';\nimport updateLocale from 'dayjs/plugin/updateLocale';\nimport LocalizedFormat from 'dayjs/plugin/localizedFormat';\nimport localeData from 'dayjs/plugin/localeData';\nimport relativeTime from 'dayjs/plugin/relativeTime';\n\nimport {\n  enTranslations,\n  nlTranslations,\n  ruTranslations,\n  trTranslations,\n  frTranslations,\n  hiTranslations,\n  itTranslations,\n} from './i18n';\n\nconst defaultNS = 'translation';\nconst defaultLng = 'en';\n\nimport 'dayjs/locale/nl';\nimport 'dayjs/locale/ru';\nimport 'dayjs/locale/tr';\nimport 'dayjs/locale/fr';\nimport 'dayjs/locale/hi';\nimport 'dayjs/locale/it';\n// These locale imports also set these locale globally.\n// So As a last step I am going to import english locale\n// to make sure I don't mess up language at other places in app.\nimport 'dayjs/locale/en';\n\nDayjs.extend(updateLocale);\n\nDayjs.updateLocale('nl', {\n  calendar: {\n    sameDay: '[vandaag om] LT',\n    nextDay: '[morgen om] LT',\n    nextWeek: 'dddd [om] LT',\n    lastDay: '[gisteren om] LT',\n    lastWeek: '[afgelopen] dddd [om] LT',\n    sameElse: 'L',\n  },\n});\nDayjs.updateLocale('it', {\n  calendar: {\n    sameDay: '[Oggi alle] LT',\n    nextDay: '[Domani alle] LT',\n    nextWeek: 'dddd [alle] LT',\n    lastDay: '[Ieri alle] LT',\n    lastWeek: '[lo scorso] dddd [alle] LT',\n    sameElse: 'L',\n  },\n});\nDayjs.updateLocale('hi', {\n  calendar: {\n    sameDay: '[आज] LT',\n    nextDay: '[कल] LT',\n    nextWeek: 'dddd, LT',\n    lastDay: '[कल] LT',\n    lastWeek: '[पिछले] dddd, LT',\n    sameElse: 'L',\n  },\n  // Hindi notation for meridiems are quite fuzzy in practice. While there exists\n  // a rigid notion of a 'Pahar' it is not used as rigidly in modern Hindi.\n  meridiemParse: /रात|सुबह|दोपहर|शाम/,\n  meridiemHour(hour, meridiem) {\n    if (hour === 12) {\n      hour = 0;\n    }\n    if (meridiem === 'रात') {\n      return hour < 4 ? hour : hour + 12;\n    } else if (meridiem === 'सुबह') {\n      return hour;\n    } else if (meridiem === 'दोपहर') {\n      return hour >= 10 ? hour : hour + 12;\n    } else if (meridiem === 'शाम') {\n      return hour + 12;\n    }\n  },\n  meridiem(hour) {\n    if (hour < 4) {\n      return 'रात';\n    } else if (hour < 10) {\n      return 'सुबह';\n    } else if (hour < 17) {\n      return 'दोपहर';\n    } else if (hour < 20) {\n      return 'शाम';\n    } else {\n      return 'रात';\n    }\n  },\n});\nDayjs.updateLocale('fr', {\n  calendar: {\n    sameDay: '[Aujourd’hui à] LT',\n    nextDay: '[Demain à] LT',\n    nextWeek: 'dddd [à] LT',\n    lastDay: '[Hier à] LT',\n    lastWeek: 'dddd [dernier à] LT',\n    sameElse: 'L',\n  },\n});\nDayjs.updateLocale('tr', {\n  calendar: {\n    sameDay: '[bugün saat] LT',\n    nextDay: '[yarın saat] LT',\n    nextWeek: '[gelecek] dddd [saat] LT',\n    lastDay: '[dün] LT',\n    lastWeek: '[geçen] dddd [saat] LT',\n    sameElse: 'L',\n  },\n});\nDayjs.updateLocale('ru', {\n  calendar: {\n    sameDay: '[Сегодня, в] LT',\n    nextDay: '[Завтра, в] LT',\n    lastDay: '[Вчера, в] LT',\n  },\n});\n\nconst en_locale = {\n  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split(\n    '_',\n  ),\n  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split(\n    '_',\n  ),\n};\n\n/**\n * Wrapper around [i18next](https://www.i18next.com/) class for Stream related translations.\n * Instance of this class should be provided to Chat component to handle translations.\n * Stream provides following list of in-built translations:\n * 1. English (en)\n * 2. Dutch (nl)\n * 3. Russian (ru)\n * 4. Turkish (tr)\n * 5. French (fr)\n * 6. Italian (it)\n * 7. Hindi (hi)\n *\n * Simplest way to start using chat components in one of the in-built languages would be following:\n *\n * ```\n * const i18n = new Streami18n({ language 'nl' });\n * <Chat client={chatClient} i18nInstance={i18n}>\n *  ...\n * </Chat>\n * ```\n *\n * If you would like to override certain keys in in-built translation.\n * UI will be automatically updated in this case.\n *\n * ```\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  translationsForLanguage: {\n *    'Nothing yet...': 'Nog Niet ...',\n *    '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} en {{ secondUser }} zijn aan het typen...',\n *  }\n * });\n *\n * If you would like to register additional languages, use registerTranslation. You can add as many languages as you want:\n *\n * i18n.registerTranslation('zh', {\n *  'Nothing yet...': 'Nog Niet ...',\n *  '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} en {{ secondUser }} zijn aan het typen...',\n * });\n *\n * <Chat client={chatClient} i18nInstance={i18n}>\n *  ...\n * </Chat>\n * ```\n *\n * You can use the same function to add whole new language as well.\n *\n * ```\n * const i18n = new Streami18n();\n *\n * i18n.registerTranslation('mr', {\n *  'Nothing yet...': 'काहीही नाही  ...',\n *  '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} आणि {{ secondUser }} टीपी करत आहेत ',\n * });\n *\n * // Make sure to call setLanguage to reflect new language in UI.\n * i18n.setLanguage('it');\n * <Chat client={chatClient} i18nInstance={i18n}>\n *  ...\n * </Chat>\n * ```\n *\n * ## Datetime translations\n *\n * Stream react chat components uses [dayjs](https://day.js.org/en/) internally by default to format datetime stamp.\n * e.g., in ChannelPreview, MessageContent components.\n * Dayjs has locale support as well - https://day.js.org/docs/en/i18n/i18n\n * Dayjs is a lightweight alternative to Momentjs with the same modern API.\n *\n * Dayjs provides locale config for plenty of languages, you can check the whole list of locale configs at following url\n * https://github.com/iamkun/dayjs/tree/dev/src/locale\n *\n * You can either provide the dayjs locale config while registering\n * language with Streami18n (either via constructor or registerTranslation()) or you can provide your own Dayjs or Moment instance\n * to Streami18n constructor, which will be then used internally (using the language locale) in components.\n *\n * 1. Via language registration\n *\n * e.g.,\n * ```\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  dayjsLocaleConfigForLanguage: {\n *    months: [...],\n *    monthsShort: [...],\n *    calendar: {\n *      sameDay: ...'\n *    }\n *  }\n * });\n * ```\n *\n * Similarly, you can add locale config for moment while registering translation via `registerTranslation` function.\n *\n * e.g.,\n * ```\n * const i18n = new Streami18n();\n *\n * i18n.registerTranslation(\n *  'mr',\n *  {\n *    'Nothing yet...': 'काहीही नाही  ...',\n *    '{{ firstUser }} and {{ secondUser }} are typing...': '{{ firstUser }} आणि {{ secondUser }} टीपी करत आहेत ',\n *  },\n *  {\n *    months: [...],\n *    monthsShort: [...],\n *    calendar: {\n *      sameDay: ...'\n *    }\n *  }\n * );\n *```\n * 2. Provide your own Moment object\n *\n * ```js\n * import 'moment/locale/nl';\n * import 'moment/locale/it';\n * // or if you want to include all locales\n * import 'moment/min/locales';\n *\n * import Moment from moment\n *\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  DateTimeParser: Moment\n * })\n * ```\n *\n * 3. Provide your own Dayjs object\n *\n * ```js\n * import Dayjs from 'dayjs'\n *\n * import 'dayjs/locale/nl';\n * import 'dayjs/locale/it';\n * // or if you want to include all locales\n * import 'dayjs/min/locales';\n *\n * const i18n = new Streami18n({\n *  language: 'nl',\n *  DateTimeParser: Dayjs\n * })\n * ```\n * If you would like to stick with english language for datetimes in Stream compoments, you can set `disableDateTimeTranslations` to true.\n *\n */\nconst defaultStreami18nOptions = {\n  language: 'en',\n  disableDateTimeTranslations: false,\n  debug: false,\n  logger: (msg) => console.warn(msg),\n  dayjsLocaleConfigForLanguage: null,\n  DateTimeParser: Dayjs,\n};\nexport class Streami18n {\n  i18nInstance = i18n.createInstance();\n  Dayjs = null;\n  setLanguageCallback = () => null;\n  initialized = false;\n\n  t = null;\n  tDateTimeParser = null;\n  translations = {\n    en: { [defaultNS]: enTranslations },\n    nl: { [defaultNS]: nlTranslations },\n    ru: { [defaultNS]: ruTranslations },\n    tr: { [defaultNS]: trTranslations },\n    fr: { [defaultNS]: frTranslations },\n    hi: { [defaultNS]: hiTranslations },\n    it: { [defaultNS]: itTranslations },\n  };\n  /**\n   * dayjs.defineLanguage('nl') also changes the global locale. We don't want to do that\n   * when user calls registerTranslation() function. So intead we will store the locale configs\n   * given to registerTranslation() function in `dayjsLocales` object, and register the required locale\n   * with moment, when setLanguage is called.\n   * */\n  dayjsLocales = {};\n  /**\n   * Contructor accepts following options:\n   *  - language (String) default: 'en'\n   *    Language code e.g., en, tr\n   *\n   *  - translationsForLanguage (object)\n   *    Translations object. Please check src/i18n/en.json for example.\n   *\n   *  - disableDateTimeTranslations (boolean) default: false\n   *    Disable translations for datetimes\n   *\n   *  - debug (boolean) default: false\n   *    Enable debug mode in internal i18n class\n   *\n   *  - logger (function) default: () => {}\n   *    Logger function to log warnings/errors from this class\n   *\n   *  - dayjsLocaleConfigForLanguage (object) default: 'enConfig'\n   *    [Config object](https://momentjs.com/docs/#/i18n/changing-locale/) for internal moment object,\n   *    corresponding to language (param)\n   *\n   *  - DateTimeParser (function) Moment or Dayjs instance/function.\n   *    Make sure to load all the required locales in this Moment or Dayjs instance that you will be provide to Streami18n\n   *\n   * @param {*} options\n   */\n  constructor(options = {}) {\n    const finalOptions = {\n      ...defaultStreami18nOptions,\n      ...options,\n    };\n    // Prepare the i18next configuration.\n    this.logger = finalOptions.logger;\n\n    this.currentLanguage = finalOptions.language;\n    this.DateTimeParser = finalOptions.DateTimeParser;\n\n    try {\n      // This is a shallow check to see if given parser is instance of Dayjs.\n      // For some reason Dayjs.isDayjs(this.DateTimeParser()) doesn't work.\n      if (this.DateTimeParser && this.DateTimeParser.extend) {\n        this.DateTimeParser.extend(LocalizedFormat);\n        this.DateTimeParser.extend(calendar);\n        this.DateTimeParser.extend(localeData);\n        this.DateTimeParser.extend(relativeTime);\n      }\n    } catch (error) {\n      throw Error(\n        `Streami18n: Looks like you wanted to provide Dayjs instance, but something went wrong while adding plugins`,\n        error,\n      );\n    }\n\n    this.isCustomDateTimeParser = !!options.DateTimeParser;\n    const translationsForLanguage = finalOptions.translationsForLanguage;\n\n    if (translationsForLanguage) {\n      this.translations[this.currentLanguage] = {\n        [defaultNS]: translationsForLanguage,\n      };\n    }\n\n    // If translations don't exist for given language, then set it as empty object.\n    if (!this.translations[this.currentLanguage]) {\n      this.translations[this.currentLanguage] = {\n        [defaultNS]: {},\n      };\n    }\n\n    this.i18nextConfig = {\n      nsSeparator: false,\n      keySeparator: false,\n      fallbackLng: false,\n      debug: finalOptions.debug,\n      lng: this.currentLanguage,\n      interpolation: { escapeValue: false },\n\n      parseMissingKeyHandler: (key) => {\n        this.logger(`Streami18n: Missing translation for key: ${key}`);\n\n        return key;\n      },\n    };\n\n    this.validateCurrentLanguage(this.currentLanguage);\n\n    const dayjsLocaleConfigForLanguage =\n      finalOptions.dayjsLocaleConfigForLanguage;\n\n    if (dayjsLocaleConfigForLanguage) {\n      this.addOrUpdateLocale(this.currentLanguage, {\n        ...dayjsLocaleConfigForLanguage,\n      });\n    } else if (!this.localeExists(this.currentLanguage)) {\n      this.logger(\n        `Streami18n: Streami18n(...) - Locale config for ${this.currentLanguage} does not exist in momentjs.` +\n          `Please import the locale file using \"import 'moment/locale/${this.currentLanguage}';\" in your app or ` +\n          `register the locale config with Streami18n using registerTranslation(language, translation, customDayjsLocale)`,\n      );\n    }\n\n    this.tDateTimeParser = (timestamp) => {\n      if (\n        finalOptions.disableDateTimeTranslations ||\n        !this.localeExists(this.currentLanguage)\n      ) {\n        return this.DateTimeParser(timestamp).locale(defaultLng);\n      }\n      return this.DateTimeParser(timestamp).locale(this.currentLanguage);\n    };\n  }\n\n  /**\n   * Initializes the i18next instance with configuration (which enables natural language as default keys)\n   */\n  async init() {\n    this.validateCurrentLanguage();\n    try {\n      this.t = await this.i18nInstance.init({\n        ...this.i18nextConfig,\n        resources: this.translations,\n        lng: this.currentLanguage,\n      });\n      this.initialized = true;\n\n      return {\n        t: this.t,\n        tDateTimeParser: this.tDateTimeParser,\n      };\n    } catch (e) {\n      this.logger(`Something went wrong with init:`, e);\n    }\n  }\n\n  localeExists = (language) => {\n    if (this.isCustomDateTimeParser) return true;\n\n    return Object.keys(Dayjs.Ls).indexOf(language) > -1;\n  };\n\n  validateCurrentLanguage = () => {\n    const availableLanguages = Object.keys(this.translations);\n    if (availableLanguages.indexOf(this.currentLanguage) === -1) {\n      this.logger(\n        `Streami18n: '${this.currentLanguage}' language is not registered.` +\n          ` Please make sure to call streami18n.registerTranslation('${this.currentLanguage}', {...}) or ` +\n          `use one the built-in supported languages - ${this.getAvailableLanguages()}`,\n      );\n\n      this.currentLanguage = defaultLng;\n    }\n  };\n\n  /** Returns an instance of i18next used within this class instance */\n  geti18Instance = () => this.i18nInstance;\n\n  /** Returns list of available languages. */\n  getAvailableLanguages = () => Object.keys(this.translations);\n\n  /** Returns all the translation dictionary for all inbuilt-languages */\n  getTranslations = () => this.translations;\n\n  /**\n   * Returns current version translator function.\n   */\n  async getTranslators() {\n    if (!this.initialized) {\n      if (this.dayjsLocales[this.currentLanguage]) {\n        this.addOrUpdateLocale(\n          this.currentLanguage,\n          this.dayjsLocales[this.currentLanguage],\n        );\n      }\n      return await this.init();\n    } else {\n      return {\n        t: this.t,\n        tDateTimeParser: this.tDateTimeParser,\n      };\n    }\n  }\n\n  /**\n   * Register translation\n   *\n   * @param {*} language\n   * @param {*} translation\n   * @param {*} customDayjsLocale\n   */\n  registerTranslation(language, translation, customDayjsLocale) {\n    if (!translation) {\n      this.logger(\n        `Streami18n: registerTranslation(language, translation, customDayjsLocale) called without translation`,\n      );\n      return;\n    }\n\n    if (!this.translations[language]) {\n      this.translations[language] = { [defaultNS]: translation };\n    } else {\n      this.translations[language][defaultNS] = translation;\n    }\n\n    if (customDayjsLocale) {\n      this.dayjsLocales[language] = { ...customDayjsLocale };\n    } else if (!this.localeExists(language)) {\n      this.logger(\n        `Streami18n: registerTranslation(language, translation, customDayjsLocale) - ` +\n          `Locale config for ${language} does not exist in Dayjs.` +\n          `Please import the locale file using \"import 'dayjs/locale/${language}';\" in your app or ` +\n          `register the locale config with Streami18n using registerTranslation(language, translation, customDayjsLocale)`,\n      );\n    }\n\n    if (this.initialized) {\n      this.i18nInstance.addResources(language, defaultNS, translation);\n    }\n  }\n\n  addOrUpdateLocale(key, config) {\n    if (this.localeExists(key)) {\n      Dayjs.updateLocale(key, { ...config });\n    } else {\n      // Merging the custom locale config with en config, so missing keys can default to english.\n      Dayjs.locale({ name: key, ...{ ...en_locale, ...config } }, null, true);\n    }\n  }\n\n  /**\n   * Changes the language.\n   * @param {*} language\n   */\n  async setLanguage(language) {\n    this.currentLanguage = language;\n\n    if (!this.initialized) return;\n\n    try {\n      const t = await this.i18nInstance.changeLanguage(language);\n      if (this.dayjsLocales[language]) {\n        this.addOrUpdateLocale(\n          this.currentLanguage,\n          this.dayjsLocales[this.currentLanguage],\n        );\n      }\n\n      this.setLanguageCallback(t);\n      return t;\n    } catch (e) {\n      this.logger(`Failed to set language:`, e);\n    }\n  }\n\n  /**\n   *\n   * @param {*} callback\n   */\n  registerSetLanguageCallback(callback) {\n    this.setLanguageCallback = callback;\n  }\n}\n","// @ts-check\nimport React from 'react';\nimport { sanitizeUrl } from '@braintree/sanitize-url';\n\n/**\n * SafeAnchor - In all ways similar to a regular anchor tag.\n * The difference is that it sanitizes the href value and prevents XSS\n * @augments {React.PureComponent<React.DetailedHTMLProps<React.AnchorHTMLAttributes<HTMLAnchorElement>, HTMLAnchorElement>>}\n */\nexport class SafeAnchor extends React.PureComponent {\n  render() {\n    if (!this.props.href) return;\n    const href = sanitizeUrl(this.props.href);\n    return (\n      <a {...this.props} href={href}>\n        {this.props.children}\n      </a>\n    );\n  }\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAkCAYAAAB/up84AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABVhJREFUeNrsW6GS20AMdToGBgEGAQYBBgEBBQYFgQcP5hMO9jP6CYWFBwsPBgYUGBQEFAQUGAQYBBgYGHjmutt5O6NupbXXcZJrx5rJXGyv11o96Ukr52avr6/BJG9HZmMBMpvNYnxt1JzNZNoRAYFxM2Z8rT6FuueMcaH6s1KfhBn3U42r1Jg1rrfq+Bt5xgf1Z64+uQFQndNzLc1Ydfwg6F2p6wd1PVXfU+b6Gc9vHGuh8+jrsXVN61Sq64XggNw95tlH9XmP6y3W2OI+qvN3db6mN7/zBFAb8L2aNMJxRsDQC6jIuEyN039LnAvV8QJKRRijZUHmT8iiLpEFDHKJaB1TGN732WuAokEIDQCwhwGjsMEIMNgp6qY9JlsTgyXquCFG1d54IsbOsKAVPLDBcQJjUxB0RJwAltGntNQ46GhzqPnb0y0954RG/1iLQ7SRCkR+guiPtW6GFRg5gAlCrFvbJEZ0ngDAUn0/Y77fDCJFXuiB/AmGDC3PLg0YWLRW5CcJWWPglNxDKS6C59AcZBs/sYxbOQBqHHkuZYCsGCds4SQJDDx3RK3RjUb9EfMUcLQ57BHS64MAIYtYkvEt+d4wCzqr++ipkoTtkihOI2chREfA5KiC0GOAaMig05zoWJPjgMk39jxcPphDR0mSDrtq438g51iq8omQlEnYJfHoiAFxYQGko6bCPSmZ5wS+TRx0Zc5R4CtmHbEVJT+0p1uOYdNE1SMfOKNO0zXWEmItptApsfYa1LV0UZUPIHSCmlRYJhfokNWhX5IcsmIWbEAMCQWerWirhZK57MghNQyzgke3QuQWPUv4EAac9wCuJjmkNmvUNEwiobX+DgdEWoQGgNDPGtTWWhRRWONX5JlnePCZhP1JUCOzPN1O0C2MohP7xuiko8Qy9INUDBg2YPJMlzP8pRv0qYeUdu+Cy+RAKIYmtVqojM5kkS0DwkXlLuY0ICzgAEOlAd8fPe+rYJdppz61TiZ5G4AgcScWz05RcUtAkOwyJMtI4FzNt3suCWKfwLUhdqRC0yA/enB1CZ4vBZ2fhIptJ4x/5PYVavyzQ39N0V8ddnsQ+m3sfX02hjo3bIVJ7d5PhqojZxYdC3NEdv9oQMQWFFjHHqpLEsc9BZyF23c9cG0ZOJjUIN15V1mY8OOAhW0E77yWaP2eoO9VBFG/d6yX6/xuHT2z3AsQ5ImnjrZBF6XcUiKAEl0RlJzZ7ZtnbxmqSgRqfxmyD9k6wNDGzuExecB3Z1/ukBOjQH73MZbspChFp9nQ/EYY9+LaaIYOqlo7JjwISX+LcBwbjAOz2ZKS7BpOcq0o0R2HvZAbHpHPJGc+dm00paQuedmOA4O0WD5fyQ4V08Ip4ATxhYl8CCh76/0QLVyehlBVFyCpYJTcKmPjHoY8XNE2VQ8dbIkdr4Z95npBwcNVahKzNEMBSYSyz46iLm8sLunreG5O+xYTsaMUHYu6bMn79sRCT2+8l6SMV2cCT5e3UspBXbbd9n3nDIN/Q1KP3JDfWLcd8kZwCVX12hjeOlmOIMe+L6FGjJLC4QS5rz6hg/tThjZiU0Pr/g7D65/uCUafKgaUJu0lHjvox/XsjXA+GAOQUogIXV8/v7GoKOGJfYuHxvHjt7t3rEMHD2+E5PoR+5GCLCS+8g6Z2xgGt6anuwGC99MSKAl6RrfUs/ofje+b1PcjlJBlMMk4gKBUe77AqKVP/T1Jj30IQPmCTdkm6NeKb5BkJzCGdCA8XuFGZIOWCBEh/mwGiZ/rFZXk3xHEdkjHb6MknVOhypJe+Sac03XlL4fe3r81mH518q9GyCS3kV8CDADlsrVaJhTLAgAAAABJRU5ErkJggg==\"","import React from 'react';\nimport Dayjs from 'dayjs';\n\nexport const ChatContext = React.createContext({ client: null });\n\nexport function withChatContext(OriginalComponent) {\n  const ContextAwareComponent = function ContextComponent(props) {\n    return (\n      <ChatContext.Consumer>\n        {(context) => {\n          const mergedProps = { ...context, ...props };\n          return <OriginalComponent {...mergedProps} />;\n        }}\n      </ChatContext.Consumer>\n    );\n  };\n  ContextAwareComponent.displayName =\n    OriginalComponent.displayName || OriginalComponent.name || 'Component';\n  ContextAwareComponent.displayName = ContextAwareComponent.displayName.replace(\n    'Base',\n    '',\n  );\n\n  return ContextAwareComponent;\n}\n\nexport const ChannelContext = React.createContext({});\n\nexport function withChannelContext(OriginalComponent) {\n  const ContextAwareComponent = function ContextComponent(props) {\n    return (\n      <ChannelContext.Consumer>\n        {(channelContext) => (\n          <OriginalComponent {...channelContext} {...props} />\n        )}\n      </ChannelContext.Consumer>\n    );\n  };\n  ContextAwareComponent.displayName =\n    OriginalComponent.displayName || OriginalComponent.name || 'Component';\n  ContextAwareComponent.displayName = ContextAwareComponent.displayName.replace(\n    'Base',\n    '',\n  );\n\n  return ContextAwareComponent;\n}\n\nexport const TranslationContext = React.createContext({\n  t: (msg) => msg,\n  tDateTimeParser: (input) => Dayjs(input),\n});\n\nexport function withTranslationContext(OriginalComponent) {\n  const ContextAwareComponent = function ContextComponent(props) {\n    return (\n      <TranslationContext.Consumer>\n        {(translationContext) => (\n          <OriginalComponent {...translationContext} {...props} />\n        )}\n      </TranslationContext.Consumer>\n    );\n  };\n  ContextAwareComponent.displayName =\n    OriginalComponent.displayName || OriginalComponent.name || 'Component';\n  ContextAwareComponent.displayName = ContextAwareComponent.displayName.replace(\n    'Base',\n    '',\n  );\n\n  return ContextAwareComponent;\n}\n","// @ts-check\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { SafeAnchor } from './SafeAnchor';\n// @ts-ignore\nimport giphyLogo from '../assets/Poweredby_100px-White_VertText.png';\nimport { withTranslationContext } from '../context';\n\n/**\n * Card - Simple Card Layout\n *\n * @example ./docs/Card.md\n * @type Card { import(\"../../types/index.d.ts\").CardProps }\n */\nclass Card extends React.PureComponent {\n  static propTypes = {\n    /** Title returned by the OG scraper */\n    title: PropTypes.string,\n    /** Link returned by the OG scraper */\n    title_link: PropTypes.string,\n    /** The scraped url, used as a fallback if the OG-data doesn't include a link */\n    og_scrape_url: PropTypes.string,\n    /** The url of the full sized image */\n    image_url: PropTypes.string,\n    /** The url for thumbnail sized image*/\n    thumb_url: PropTypes.string,\n    /** Description returned by the OG scraper */\n    text: PropTypes.string,\n  };\n\n  /** @type {(url: string) => any} Typescript syntax */\n  trimUrl = (url) => {\n    let trimmedUrl;\n    if (url !== undefined && url !== null) {\n      trimmedUrl = url\n        .replace(/^(?:https?:\\/\\/)?(?:www\\.)?/i, '')\n        .split('/')[0];\n    }\n    return trimmedUrl;\n  };\n\n  render() {\n    const {\n      title,\n      title_link,\n      text,\n      type,\n      image_url,\n      thumb_url,\n      og_scrape_url,\n      t,\n    } = this.props;\n    const image = thumb_url || image_url;\n\n    if (!title && !title_link && !image) {\n      return (\n        <div\n          className={`str-chat__message-attachment-card str-chat__message-attachment-card--${type}`}\n        >\n          <div className=\"str-chat__message-attachment-card--content\">\n            <div className=\"str-chat__message-attachment-card--text\">\n              {t('this content could not be displayed')}\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    if (!title_link && !og_scrape_url) {\n      return null;\n    }\n\n    return (\n      <div\n        className={`str-chat__message-attachment-card str-chat__message-attachment-card--${type}`}\n      >\n        {image && (\n          <div className=\"str-chat__message-attachment-card--header\">\n            <img src={image} alt={image} />\n          </div>\n        )}\n        <div className=\"str-chat__message-attachment-card--content\">\n          <div className=\"str-chat__message-attachment-card--flex\">\n            {title && (\n              <div className=\"str-chat__message-attachment-card--title\">\n                {title}\n              </div>\n            )}\n            {text && (\n              <div className=\"str-chat__message-attachment-card--text\">\n                {text}\n              </div>\n            )}\n            {(title_link || og_scrape_url) && (\n              <SafeAnchor\n                href={title_link || og_scrape_url}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"str-chat__message-attachment-card--url\"\n              >\n                {this.trimUrl(title_link || og_scrape_url)}\n              </SafeAnchor>\n            )}\n          </div>\n          {type === 'giphy' && (\n            <img\n              className=\"str-chat__message-attachment-card__giphy-logo\"\n              src={giphyLogo}\n              alt=\"giphy logo\"\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withTranslationContext(Card);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Carousel, { Modal, ModalGateway } from 'react-images';\n\n/**\n * Image - Small wrapper around an image tag, supports thumbnails\n *\n * @example ./docs/Image.md\n * @extends PureComponent\n */\nexport class Image extends React.PureComponent {\n  static propTypes = {\n    /** The full size image url */\n    image_url: PropTypes.string,\n    /** The thumb url */\n    thumb_url: PropTypes.string,\n    /** The text fallback for the image */\n    fallback: PropTypes.string,\n  };\n  state = {\n    modalIsOpen: false,\n    currentIndex: 0,\n  };\n\n  toggleModal = () => {\n    this.setState((state) => ({\n      modalIsOpen: !state.modalIsOpen,\n    }));\n  };\n\n  render() {\n    const { image_url, thumb_url, fallback } = this.props;\n    const formattedArray = [{ src: image_url || thumb_url }];\n    return (\n      <React.Fragment>\n        <img\n          className=\"str-chat__message-attachment--img\"\n          onClick={this.toggleModal}\n          src={thumb_url || image_url}\n          alt={fallback}\n        />\n        <ModalGateway>\n          {this.state.modalIsOpen ? (\n            <Modal onClose={this.toggleModal}>\n              <Carousel views={formattedArray} />\n            </Modal>\n          ) : null}\n        </ModalGateway>\n      </React.Fragment>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * AttachmentActions - The actions you can take on an attachment\n *\n * @example ./docs/AttachmentActions.md\n * @extends PureComponent\n */\nexport class AttachmentActions extends React.PureComponent {\n  static propTypes = {\n    /** Unique id for action button key. Key is generated by concatenating this id with action value - {`${id}-${action.value}`} */\n    id: PropTypes.string.isRequired,\n    /** The text for the form input */\n    text: PropTypes.string,\n    /** A list of actions */\n    actions: PropTypes.array.isRequired,\n    /**\n     *\n     * Handler for actions. Actions in combination with attachments can be used to build [commands](https://getstream.io/chat/docs/#channel_commands).\n     *\n     * @param name {string} Name of action\n     * @param value {string} Value of action\n     * @param event Dom event that triggered this handler\n     */\n    actionHandler: PropTypes.func.isRequired,\n  };\n\n  render() {\n    const { text, id, actions, actionHandler } = this.props;\n\n    return (\n      <div className=\"str-chat__message-attachment-actions\">\n        <form className=\"str-chat__message-attachment-actions-form\">\n          <span key={0}>{text}</span>\n          {actions.map((action) => (\n            <button\n              className={`str-chat__message-attachment-actions-button str-chat__message-attachment-actions-button--${action.style}`}\n              key={`${id}-${action.value}`}\n              data-value={action.value}\n              onClick={actionHandler.bind(this, action.name, action.value)}\n            >\n              {action.text}\n            </button>\n          ))}\n        </form>\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\nimport PropTypes from 'prop-types';\n\nexport class Audio extends React.Component {\n  static propTypes = {\n    /** Attachment object of audio type */\n    og: PropTypes.object,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      playing: false,\n      progress: 0,\n      updateProgress: null,\n    };\n    this.audioRef = React.createRef();\n  }\n\n  playAudio = () => {\n    if (this.audioRef.current !== null) {\n      this.audioRef.current.pause();\n      this.updateProgress();\n      this.setState({\n        playing: true,\n        updateProgress: setInterval(this.updateProgress, 500),\n      });\n      //$FlowFixMe\n      this.audioRef.current.play();\n    }\n  };\n\n  pauseAudio = () => {\n    if (this.audioRef.current !== null) {\n      this.audioRef.current.pause();\n    }\n    this.setState({ playing: false });\n    window.clearInterval(this.state.updateProgress);\n  };\n\n  updateProgress = () => {\n    if (this.audioRef.current !== null) {\n      const position = this.audioRef.current.currentTime;\n      const duration = this.audioRef.current.duration;\n      const progress = (100 / duration) * position;\n      this.setState({\n        progress,\n      });\n      if (position === duration) {\n        this.pauseAudio();\n      }\n    }\n  };\n\n  componentWillUnmount() {\n    window.clearInterval(this.state.updateProgress);\n  }\n\n  render() {\n    const { og } = this.props;\n    const audio = og;\n    const url = og.asset_url;\n    const image = og.image_url;\n    return (\n      <div className=\"str-chat__audio\">\n        <div className=\"str-chat__audio__wrapper\">\n          <audio ref={this.audioRef}>\n            <source src={url} type=\"audio/mp3\" />\n          </audio>\n          <div className=\"str-chat__audio__image\">\n            <div className=\"str-chat__audio__image--overlay\">\n              {!this.state.playing ? (\n                <div\n                  onClick={() => this.playAudio()}\n                  className=\"str-chat__audio__image--button\"\n                >\n                  <svg\n                    width=\"40\"\n                    height=\"40\"\n                    viewBox=\"0 0 64 64\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path\n                      d=\"M32 58c14.36 0 26-11.64 26-26S46.36 6 32 6 6 17.64 6 32s11.64 26 26 26zm0 6C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32zm13.237-28.412L26.135 45.625a3.27 3.27 0 0 1-4.426-1.4 3.319 3.319 0 0 1-.372-1.47L21 23.36c-.032-1.823 1.41-3.327 3.222-3.358a3.263 3.263 0 0 1 1.473.322l19.438 9.36a3.311 3.311 0 0 1 .103 5.905z\"\n                      fillRule=\"nonzero\"\n                    />\n                  </svg>\n                </div>\n              ) : (\n                <div\n                  onClick={() => this.pauseAudio()}\n                  className=\"str-chat__audio__image--button\"\n                >\n                  <svg\n                    width=\"40\"\n                    height=\"40\"\n                    viewBox=\"0 0 64 64\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path\n                      d=\"M32 58.215c14.478 0 26.215-11.737 26.215-26.215S46.478 5.785 32 5.785 5.785 17.522 5.785 32 17.522 58.215 32 58.215zM32 64C14.327 64 0 49.673 0 32 0 14.327 14.327 0 32 0c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32zm-7.412-45.56h2.892a2.17 2.17 0 0 1 2.17 2.17v23.865a2.17 2.17 0 0 1-2.17 2.17h-2.892a2.17 2.17 0 0 1-2.17-2.17V20.61a2.17 2.17 0 0 1 2.17-2.17zm12.293 0h2.893a2.17 2.17 0 0 1 2.17 2.17v23.865a2.17 2.17 0 0 1-2.17 2.17h-2.893a2.17 2.17 0 0 1-2.17-2.17V20.61a2.17 2.17 0 0 1 2.17-2.17z\"\n                      fillRule=\"nonzero\"\n                    />\n                  </svg>\n                </div>\n              )}\n            </div>\n            <img src={image} alt={`${og.description}`} />\n          </div>\n          <div className=\"str-chat__audio__content\">\n            <span className=\"str-chat__audio__content--title\">\n              <strong>{og.title}</strong>\n            </span>\n            <span className=\"str-chat__audio__content--subtitle\">\n              {og.text}\n            </span>\n            <div className=\"str-chat__audio__content--progress\">\n              <div style={{ width: `${this.state.progress}%` }} />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport ReactPlayer from 'react-player';\nimport Card from './Card';\nimport { Image } from './Image';\nimport { AttachmentActions } from './AttachmentActions';\nimport { FileIcon } from 'react-file-utils';\nimport prettybytes from 'pretty-bytes';\nimport PropTypes from 'prop-types';\nimport { SafeAnchor } from './SafeAnchor';\n\nimport { Audio } from './Audio';\n/**\n * Attachment - The message attachment\n *\n * @example ./docs/Attachment.md\n * @extends PureComponent\n */\nexport class Attachment extends PureComponent {\n  attachmentRef = React.createRef();\n  static propTypes = {\n    /**\n     * The attachment to render\n     * @see See [Attachment structure](https://getstream.io/chat/docs/#message_format)\n     *\n     *  */\n    attachment: PropTypes.object.isRequired,\n    /**\n     *\n     * Handler for actions. Actions in combination with attachments can be used to build [commands](https://getstream.io/chat/docs/#channel_commands).\n     *\n     * @param name {string} Name of action\n     * @param value {string} Value of action\n     * @param event Dom event that triggered this handler\n     */\n    actionHandler: PropTypes.func.isRequired,\n  };\n\n  attachmentType(a) {\n    let type, extra;\n    if (a.actions && a.actions.length > 0) {\n      extra = 'actions';\n    }\n    if (a.type === 'giphy' || a.type === 'imgur') {\n      type = 'card';\n    } else if (a.type === 'image' && (a.title_link || a.og_scrape_url)) {\n      type = 'card';\n    } else if (a.type === 'image') {\n      type = 'image';\n    } else if (a.type === 'file') {\n      type = 'file';\n    } else if (a.type === 'audio') {\n      type = 'audio';\n    } else if (a.type === 'video') {\n      type = 'media';\n    } else {\n      type = 'card';\n      extra = 'no-image';\n    }\n    return { type, extra };\n  }\n\n  renderAttachmentActions = (a) => (\n    <AttachmentActions\n      key={'key-actions-' + a.id}\n      {...a}\n      actionHandler={this.props.actionHandler}\n    />\n  );\n\n  renderAttachment = (a) => (\n    <div className=\"str-chat__attachment\" key={`key-image-${a.id}`}>\n      <Card {...a} key={`key-card-${a.id}`} />\n      {this.renderAttachmentActions(a)}\n    </div>\n  );\n\n  render() {\n    const { attachment: a } = this.props;\n    if (!a) {\n      return null;\n    }\n\n    const { type, extra } = this.attachmentType(a);\n    if (type === 'card' && !a.title_link && !a.og_scrape_url) {\n      return null;\n    }\n    const results = [];\n    if (type === 'image') {\n      if (a.actions && a.actions.length) {\n        results.push(\n          <div className=\"str-chat__attachment\" key={`key-image-${a.id}`}>\n            <Image {...a} />\n            {this.renderAttachmentActions(a)}\n          </div>,\n        );\n      } else {\n        results.push(<Image {...a} key={`key-image-${a.id}`} />);\n      }\n    } else if (type === 'file') {\n      a.asset_url &&\n        results.push(\n          <div\n            className=\"str-chat__message-attachment-file--item\"\n            key={`key-file-${a.id}`}\n          >\n            <FileIcon\n              mimeType={a.mime_type}\n              filename={a.title}\n              big={true}\n              size={30}\n            />\n            <div className=\"str-chat__message-attachment-file--item-text\">\n              <SafeAnchor href={a.asset_url} target=\"_blank\" download>\n                {a.title}\n              </SafeAnchor>\n              {a.file_size && <span>{prettybytes(a.file_size)}</span>}\n            </div>\n          </div>,\n        );\n    } else if (type === 'audio') {\n      results.push(\n        <div className=\"str-chat__attachment\" key={`key-video-${a.id}`}>\n          <Audio og={a} />\n        </div>,\n      );\n    } else if (type === 'media') {\n      if (a.actions && a.actions.length) {\n        results.push(\n          <div className=\"str-chat__attachment\" key={`key-video-${a.id}`}>\n            <div className=\"str-chat__player-wrapper\">\n              <ReactPlayer\n                className=\"react-player\"\n                url={a.asset_url}\n                width=\"100%\"\n                height=\"100%\"\n                controls\n              />\n            </div>\n            {this.renderAttachmentActions(a)}\n          </div>,\n        );\n      } else {\n        results.push(\n          <div className=\"str-chat__player-wrapper\" key={`key-video-${a.id}`}>\n            <ReactPlayer\n              className=\"react-player\"\n              url={a.asset_url}\n              width=\"100%\"\n              height=\"100%\"\n              controls\n            />\n          </div>,\n        );\n      }\n    } else {\n      if (a.actions && a.actions.length) {\n        results.push(this.renderAttachment(a));\n      } else {\n        results.push(<Card {...a} key={`key-card-${a.id}`} />);\n      }\n    }\n\n    if (results.length === 0) return null;\n\n    return (\n      <div\n        className={`str-chat__message-attachment str-chat__message-attachment--${type} str-chat__message-attachment--${a.type} str-chat__message-attachment--${type}--${extra}`}\n        ref={this.attachmentRef}\n      >\n        {results}\n      </div>\n    );\n  }\n}\n\nAttachment.propTypes = {};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * Avatar - A round avatar image with fallback to username's first letter\n *\n * @example ./docs/Avatar.md\n * @extends PureComponent\n */\nexport class Avatar extends React.PureComponent {\n  static propTypes = {\n    /** image url */\n    image: PropTypes.string,\n    /** name of the picture, used for title tag fallback */\n    name: PropTypes.string,\n    /** shape of the avatar, circle, rounded or square */\n    shape: PropTypes.oneOf(['circle', 'rounded', 'square']),\n    /** size in pixels */\n    size: PropTypes.number,\n  };\n\n  static defaultProps = {\n    size: 32,\n    shape: 'circle',\n  };\n\n  state = {\n    errored: false,\n    loaded: false,\n  };\n\n  getInitials = (name) =>\n    name\n      ? name\n          .split(' ')\n          .slice(0, 1)\n          .map((name) => name.charAt(0))\n      : null;\n\n  onLoad = () => {\n    this.setState({ loaded: true });\n  };\n\n  onError = () => {\n    this.setState({ errored: true });\n  };\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.image !== this.props.image) {\n      this.setState({ loaded: false, errored: false });\n    }\n  }\n\n  render() {\n    const { size, name, shape, image } = this.props;\n    const initials = this.getInitials(name);\n    return (\n      <div\n        className={`str-chat__avatar str-chat__avatar--${shape}`}\n        title={name}\n        style={{\n          width: size,\n          height: size,\n          flexBasis: size,\n          lineHeight: size + 'px',\n          fontSize: size / 2,\n        }}\n      >\n        {image && !this.state.errored ? (\n          <img\n            src={image}\n            alt={initials}\n            className={\n              'str-chat__avatar-image' +\n              (this.state.loaded ? ' str-chat__avatar-image--loaded' : '')\n            }\n            style={{\n              width: size,\n              height: size,\n              flexBasis: size,\n              objectFit: 'cover',\n            }}\n            onLoad={this.onLoad}\n            onError={this.onError}\n          />\n        ) : (\n          <div className=\"str-chat__avatar-fallback\">{initials}</div>\n        )}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport svg from '../assets/str-chat__loading-indicator.svg';\n\n/**\n * LoadingIndicator - Just a simple loading spinner..\n *\n * @example ./docs/LoadingIndicator.md\n * @extends PureComponent\n */\nexport class LoadingIndicator extends React.PureComponent {\n  static propTypes = {\n    /** The size of the loading icon */\n    size: PropTypes.number,\n    /** Set the color of the LoadingIndicator */\n    color: PropTypes.string,\n  };\n  static defaultProps = {\n    size: 15,\n    color: '#006CFF',\n  };\n\n  stopRef = React.createRef();\n\n  render() {\n    const { size, color } = this.props;\n    return (\n      <div\n        className={'str-chat__loading-indicator ' + color}\n        style={{ width: size, height: size }}\n      >\n        <svg\n          width={size}\n          height={size}\n          viewBox={`0 0 30 30`}\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <defs>\n            <linearGradient x1=\"50%\" y1=\"0%\" x2=\"50%\" y2=\"100%\" id=\"a\">\n              <stop stopColor=\"#FFF\" stopOpacity=\"0\" offset=\"0%\" />\n              <stop\n                ref={this.stopRef}\n                offset=\"100%\"\n                stopColor={color}\n                stopOpacity=\"1\"\n                style={{ stopColor: color }}\n              />\n            </linearGradient>\n          </defs>\n          <path\n            d=\"M2.518 23.321l1.664-1.11A12.988 12.988 0 0 0 15 28c7.18 0 13-5.82 13-13S22.18 2 15 2V0c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15-5.206 0-9.792-2.652-12.482-6.679z\"\n            fill=\"url(#a)\"\n            fillRule=\"evenodd\"\n          />\n        </svg>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslationContext } from '../context';\n\n/**\n * LoadingErrorIndicator - UI component for error indicator in Channel.\n *\n * @example ./docs/LoadingErrorIndicator.md\n * @extends PureComponent\n */\nclass LoadingErrorIndicator extends React.PureComponent {\n  static propTypes = {\n    /** Error object */\n    error: PropTypes.oneOfType([\n      PropTypes.shape({\n        message: PropTypes.string,\n      }),\n      PropTypes.bool,\n    ]),\n  };\n  static defaultProps = {\n    error: false,\n  };\n\n  render() {\n    if (!this.props.error) return null;\n\n    const { t } = this.props;\n    return (\n      <div>\n        {t('Error: {{ errorMessage }}', {\n          errorMessage: this.props.error.message,\n        })}\n      </div>\n    );\n  }\n}\n\nLoadingErrorIndicator = withTranslationContext(LoadingErrorIndicator);\nexport { LoadingErrorIndicator };\n","import anchorme from 'anchorme';\nimport emojiRegex from 'emoji-regex';\nimport ReactMarkdown from 'react-markdown/with-html';\nimport truncate from 'lodash/truncate';\nimport data from 'emoji-mart/data/all.json';\nimport React from 'react';\n\nexport const emojiSetDef = {\n  spriteUrl: 'https://getstream.imgix.net/images/emoji-sprite.png',\n  size: 20,\n  sheetColumns: 2,\n  sheetRows: 3,\n  sheetSize: 64,\n};\n\nexport const commonEmoji = {\n  emoticons: [],\n  short_names: [],\n  custom: true,\n};\n\nexport const defaultMinimalEmojis = [\n  {\n    id: 'like',\n    name: 'like',\n    colons: ':+1:',\n    sheet_x: 0,\n    sheet_y: 0,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    id: 'love',\n    name: 'love',\n    colons: ':heart:',\n    sheet_x: 1,\n    sheet_y: 2,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    id: 'haha',\n    name: 'haha',\n    colons: ':joy:',\n    sheet_x: 1,\n    sheet_y: 0,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    id: 'wow',\n    name: 'wow',\n    colons: ':astonished:',\n    sheet_x: 0,\n    sheet_y: 2,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    id: 'sad',\n    name: 'sad',\n    colons: ':pensive:',\n    sheet_x: 0,\n    sheet_y: 1,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n  {\n    id: 'angry',\n    name: 'angry',\n    colons: ':angry:',\n    sheet_x: 1,\n    sheet_y: 1,\n    ...commonEmoji,\n    ...emojiSetDef,\n  },\n];\n\nconst d = Object.assign({}, data);\nd.emojis = {};\n\n// use this only for small lists like in ReactionSelector\nexport const emojiData = d;\n\nexport const isOnlyEmojis = (text) => {\n  if (!text) return false;\n\n  const noEmojis = text.replace(emojiRegex(), '');\n  const noSpace = noEmojis.replace(/[\\s\\n]/gm, '');\n  return !noSpace;\n};\n\nexport const isPromise = (thing) => thing && typeof thing.then === 'function';\n\nexport const byDate = (a, b) => a.created_at - b.created_at;\n\n// https://stackoverflow.com/a/29234240/7625485\n/**\n * @deprecated This function is deprecated and will be removed in future major release.\n * @param {*} dict\n * @param {*} currentUserId\n */\nexport const formatArray = (dict, currentUserId) => {\n  const arr2 = Object.keys(dict);\n  const arr3 = [];\n  arr2.forEach((item, i) => {\n    if (currentUserId === dict[arr2[i]].user.id) {\n      return;\n    }\n\n    arr3.push(dict[arr2[i]].user.name || dict[arr2[i]].user.id);\n  });\n  let outStr = '';\n  if (arr3.length === 1) {\n    outStr = arr3[0] + ' is typing...';\n    dict;\n  } else if (arr3.length === 2) {\n    //joins all with \"and\" but =no commas\n    //example: \"bob and sam\"\n    outStr = arr3.join(' and ') + ' are typing...';\n  } else if (arr3.length > 2) {\n    //joins all with commas, but last one gets \", and\" (oxford comma!)\n    //example: \"bob, joe, and sam\"\n    outStr =\n      arr3.slice(0, -1).join(', ') +\n      ', and ' +\n      arr3.slice(-1) +\n      ' are typing...';\n  }\n\n  return outStr;\n};\n\nexport const renderText = (message) => {\n  // take the @ mentions and turn them into markdown?\n  // translate links\n  let { text } = message;\n  const { mentioned_users } = message;\n\n  if (!text) {\n    return;\n  }\n\n  const allowed = [\n    'html',\n    'root',\n    'text',\n    'break',\n    'paragraph',\n    'emphasis',\n    'strong',\n    'link',\n    'list',\n    'listItem',\n    'code',\n    'inlineCode',\n    'blockquote',\n    'delete',\n  ];\n\n  const urls = anchorme(text, {\n    list: true,\n  });\n  for (const urlInfo of urls) {\n    const displayLink = truncate(urlInfo.encoded.replace(/^(www\\.)/, ''), {\n      length: 20,\n      omission: '...',\n    });\n    const mkdown = `[${displayLink}](${urlInfo.protocol}${urlInfo.encoded})`;\n    text = text.replace(urlInfo.raw, mkdown);\n  }\n  let newText = text;\n  if (mentioned_users && mentioned_users.length) {\n    for (let i = 0; i < mentioned_users.length; i++) {\n      const username = mentioned_users[i].name || mentioned_users[i].id;\n      const mkdown = `**@${username}**`;\n      const re = new RegExp(`@${username}`, 'g');\n      newText = newText.replace(re, mkdown);\n    }\n  }\n\n  return (\n    <ReactMarkdown\n      allowedTypes={allowed}\n      source={newText}\n      linkTarget=\"_blank\"\n      plugins={[]}\n      escapeHtml={true}\n      skipHtml={false}\n      unwrapDisallowed={true}\n    />\n  );\n};\n\n// https://stackoverflow.com/a/6860916/2570866\nexport function generateRandomId() {\n  // prettier-ignore\n  return (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\n}\n\nfunction S4() {\n  return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n}\n\nexport const smartRender = (ElementOrComponentOrLiteral, props, fallback) => {\n  if (ElementOrComponentOrLiteral === undefined) {\n    ElementOrComponentOrLiteral = fallback;\n  }\n  if (React.isValidElement(ElementOrComponentOrLiteral)) {\n    // Flow cast through any, to make flow believe it's a React.Element\n    const element = ElementOrComponentOrLiteral; // eslint-disable-line\n    return element;\n  }\n\n  // Flow cast through any to remove React.Element after previous check\n  const ComponentOrLiteral = ElementOrComponentOrLiteral;\n\n  if (\n    typeof ComponentOrLiteral === 'string' ||\n    typeof ComponentOrLiteral === 'number' ||\n    typeof ComponentOrLiteral === 'boolean' ||\n    ComponentOrLiteral == null\n  ) {\n    return ComponentOrLiteral;\n  }\n  return <ComponentOrLiteral {...props} />;\n};\n\nexport const MESSAGE_ACTIONS = {\n  edit: 'edit',\n  delete: 'delete',\n  flag: 'flag',\n  mute: 'mute',\n};\n\nexport const filterEmoji = (emoji) => {\n  if (\n    emoji.name === 'White Smiling Face' ||\n    emoji.name === 'White Frowning Face'\n  ) {\n    return false;\n  }\n  return true;\n};\n\nexport const getReadByTooltipText = (users, t, client) => {\n  let outStr = '';\n  // first filter out client user, so restLength won't count it\n  const otherUsers = users\n    .filter((item) => item.id !== client.user.id)\n    .map((item) => item.name || item.id);\n\n  const slicedArr = otherUsers.slice(0, 5);\n  const restLength = otherUsers.length - slicedArr.length;\n\n  if (slicedArr.length === 1) {\n    outStr = slicedArr[0] + ' ';\n  } else if (slicedArr.length === 2) {\n    //joins all with \"and\" but =no commas\n    //example: \"bob and sam\"\n    outStr = t('{{ firstUser }} and {{ secondUser }}', {\n      firstUser: slicedArr[0],\n      secondUser: slicedArr[1],\n    });\n  } else if (slicedArr.length > 2) {\n    //joins all with commas, but last one gets \", and\" (oxford comma!)\n    //example: \"bob, joe, sam and 4 more\"\n    if (restLength === 0) {\n      // mutate slicedArr to remove last user to display it separately\n      const lastUser = slicedArr.splice(slicedArr.length - 2, 1);\n      outStr = t('{{ commaSeparatedUsers }}, and {{ lastUser }}', {\n        commaSeparatedUsers: slicedArr.join(', '),\n        lastUser,\n      });\n    } else {\n      outStr = t('{{ commaSeparatedUsers }} and {{ moreCount }} more', {\n        commaSeparatedUsers: slicedArr.join(', '),\n        moreCount: restLength,\n      });\n    }\n  }\n\n  return outStr;\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { MESSAGE_ACTIONS } from '../utils';\nimport { withTranslationContext } from '../context';\n\n/**\n * MessageActionsBox - A component for taking action on a message\n *\n * @example ./docs/MessageActionsBox.md\n * @extends PureComponent\n */\nclass MessageActionsBox extends React.Component {\n  static propTypes = {\n    /** If the message actions box should be open or not */\n    open: PropTypes.bool.isRequired,\n    /**\n     * @deprecated\n     *\n     *  The message component, most logic is delegated to this component and MessageActionsBox uses the following functions explicitly:\n     *  `handleFlag`, `handleMute`, `handleEdit`, `handleDelete`, `canDeleteMessage`, `canEditMessage`, `isMyMessage`, `isAdmin`\n     */\n    Message: PropTypes.oneOfType([\n      PropTypes.node,\n      PropTypes.func,\n      PropTypes.object,\n    ]).isRequired,\n    /** If message belongs to current user. */\n    mine: PropTypes.bool,\n    /** DOMRect object for parent MessageList component */\n    messageListRect: PropTypes.object,\n    /**\n     * Handler for flaging a current message\n     *\n     * @param event React's MouseEventHandler event\n     * @returns void\n     * */\n    handleFlag: PropTypes.func,\n    /**\n     * Handler for muting a current message\n     *\n     * @param event React's MouseEventHandler event\n     * @returns void\n     * */\n    handleMute: PropTypes.func,\n    /**\n     * Handler for editing a current message\n     *\n     * @param event React's MouseEventHandler event\n     * @returns void\n     * */\n    handleEdit: PropTypes.func,\n    /**\n     * Handler for deleting a current message\n     *\n     * @param event React's MouseEventHandler event\n     * @returns void\n     * */\n    handleDelete: PropTypes.func,\n    /**\n     * Returns array of avalable message actions for current message.\n     * Please check [Message](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Message.js) component for default implementation.\n     */\n    getMessageActions: PropTypes.func,\n  };\n\n  static defaultProps = {\n    open: false,\n  };\n\n  actionsBoxRef = React.createRef();\n\n  state = {\n    reverse: false,\n    rect: null,\n  };\n\n  componentDidMount() {}\n\n  async componentDidUpdate(prevProps) {\n    if (!prevProps.open && this.props.open) {\n      if (this.state.rect === null) {\n        await this.setState({\n          rect: this.actionsBoxRef.current.getBoundingClientRect(),\n        });\n      }\n      const ml = this.props.messageListRect;\n\n      if (this.props.mine) {\n        this.setState({\n          reverse: this.state.rect.left < ml.left ? true : false,\n        });\n      } else if (!this.props.mine) {\n        this.setState({\n          reverse: this.state.rect.right + 5 > ml.right ? true : false,\n        });\n      }\n    }\n  }\n\n  render() {\n    const {\n      handleFlag,\n      handleMute,\n      handleEdit,\n      handleDelete,\n      getMessageActions,\n      t,\n    } = this.props;\n    const messageActions = getMessageActions();\n\n    return (\n      <div\n        className={`str-chat__message-actions-box\n          ${this.props.open ? 'str-chat__message-actions-box--open' : ''}\n          ${this.props.mine ? 'str-chat__message-actions-box--mine' : ''}\n          ${this.state.reverse ? 'str-chat__message-actions-box--reverse' : ''}\n        `}\n        ref={this.actionsBoxRef}\n      >\n        <ul className=\"str-chat__message-actions-list\">\n          {messageActions.indexOf(MESSAGE_ACTIONS.flag) > -1 && (\n            <button onClick={handleFlag}>\n              <li className=\"str-chat__message-actions-list-item\">\n                {t('Flag')}\n              </li>\n            </button>\n          )}\n          {messageActions.indexOf(MESSAGE_ACTIONS.mute) > -1 && (\n            <button onClick={handleMute}>\n              <li className=\"str-chat__message-actions-list-item\">\n                {t('Mute')}\n              </li>\n            </button>\n          )}\n          {messageActions.indexOf(MESSAGE_ACTIONS.edit) > -1 && (\n            <button onClick={handleEdit}>\n              <li className=\"str-chat__message-actions-list-item\">\n                {t('Edit Message')}\n              </li>\n            </button>\n          )}\n          {messageActions.indexOf(MESSAGE_ACTIONS.delete) > -1 && (\n            <button onClick={handleDelete}>\n              <li className=\"str-chat__message-actions-list-item\">\n                {t('Delete')}\n              </li>\n            </button>\n          )}\n        </ul>\n      </div>\n    );\n  }\n}\n\nMessageActionsBox = withTranslationContext(MessageActionsBox);\nexport { MessageActionsBox };\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { NimbleEmoji } from 'emoji-mart';\n\nimport { defaultMinimalEmojis, emojiSetDef, emojiData } from '../utils';\n\nexport class ReactionsList extends React.Component {\n  static propTypes = {\n    /** List of reactions */\n    reactions: PropTypes.array,\n    /** Provide a list of reaction options [{name: 'angry', emoji: 'angry'}] */\n    reactionOptions: PropTypes.array,\n    /** If true, reaction list will be shown at trailing end of message bubble. */\n    reverse: PropTypes.bool,\n    /** Object/map of reaction id/type (e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry') vs count */\n    reaction_counts: PropTypes.object,\n  };\n\n  static defaultProps = {\n    reactionOptions: defaultMinimalEmojis,\n    emojiSetDef,\n    reverse: false,\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  _renderReactions = (reactions) => {\n    const reactionsByType = {};\n    reactions.map((item) => {\n      if (reactions[item.type] === undefined) {\n        return (reactionsByType[item.type] = [item]);\n      } else {\n        return (reactionsByType[item.type] = [\n          ...reactionsByType[item.type],\n          item,\n        ]);\n      }\n    });\n\n    const reactionsEmojis = this.props.reactionOptions.reduce(\n      (acc, cur) => ({ ...acc, [cur.id]: cur }),\n      {},\n    );\n\n    return Object.keys(reactionsByType).map((type) =>\n      reactionsEmojis[type] ? (\n        <li key={reactionsEmojis[type].id}>\n          <NimbleEmoji\n            emoji={reactionsEmojis[type]}\n            {...emojiSetDef}\n            size={16}\n            data={emojiData}\n          />{' '}\n          &nbsp;\n        </li>\n      ) : null,\n    );\n  };\n\n  _getReactionCount = () => {\n    const reaction_counts = this.props.reaction_counts;\n    let count = null;\n    if (\n      reaction_counts !== null &&\n      reaction_counts !== undefined &&\n      Object.keys(reaction_counts).length > 0\n    ) {\n      count = 0;\n      Object.keys(reaction_counts).map(\n        (key) => (count += reaction_counts[key]),\n      );\n    }\n    return count;\n  };\n\n  render() {\n    return (\n      <div\n        className={`str-chat__reaction-list ${\n          this.props.reverse ? 'str-chat__reaction-list--reverse' : ''\n        }`}\n        onClick={this.props.onClick}\n        ref={this.reactionList}\n      >\n        <ul>\n          {this._renderReactions(this.props.reactions)}\n          <li>\n            <span className=\"str-chat__reaction-list--counter\">\n              {this._getReactionCount()}\n            </span>\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nexport class Tooltip extends React.PureComponent {\n  render() {\n    return <div className=\"str-chat__tooltip\">{this.props.children}</div>;\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Carousel, { Modal, ModalGateway } from 'react-images';\nimport { withTranslationContext } from '../context';\n\n/**\n * Gallery - displays up to 6 images in a simple responsive grid with a lightbox to view the images.\n * @example ./docs/Gallery.md\n * @extends PureComponent\n */\nclass Gallery extends React.PureComponent {\n  static propTypes = {\n    images: PropTypes.arrayOf(\n      PropTypes.shape({\n        /** Url of the image */\n        image_url: PropTypes.string,\n        /** Url of thumbnail of image */\n        thumb_url: PropTypes.string,\n      }),\n    ),\n  };\n\n  state = {\n    modalIsOpen: false,\n    currentIndex: 0,\n  };\n\n  toggleModal = (index) => {\n    this.setState((state) => ({\n      modalIsOpen: !state.modalIsOpen,\n      currentIndex: index,\n    }));\n  };\n\n  render() {\n    const { images, t } = this.props;\n    const formattedArray = images.map((image) => ({\n      src: image.image_url || image.thumb_url,\n    }));\n    return (\n      <div className=\"str-chat__gallery\">\n        {images.slice(0, 3).map((image, i) => (\n          <div\n            className=\"str-chat__gallery-image\"\n            key={`gallery-image-${i}`}\n            onClick={() => this.toggleModal(i)}\n          >\n            <img src={image.image_url || image.thumb_url} />\n          </div>\n        ))}\n        {images.length > 3 && (\n          <div\n            className=\"str-chat__gallery-placeholder\"\n            style={{\n              backgroundImage: `url(${images[3].image_url})`,\n            }}\n            onClick={() => this.toggleModal(3)}\n          >\n            <p>\n              {t('{{ imageCount }} more', {\n                imageCount: images.length - 3,\n              })}\n            </p>\n          </div>\n        )}\n        {/* <Lightbox\n          images={formattedArray}\n          isOpen={this.state.lightboxIsOpen}\n          onClickPrev={this.gotoPrevLightboxImage}\n          onClickNext={this.gotoNextLightboxImage}\n          onClose={this.closeLightbox}\n          backdropClosesModal\n          currentImage={this.state.imageIndex}\n        /> */}\n        <ModalGateway>\n          {this.state.modalIsOpen ? (\n            <Modal onClose={this.toggleModal} closeOnBackdropClick={true}>\n              <Carousel\n                views={formattedArray}\n                currentIndex={this.state.currentIndex}\n              />\n            </Modal>\n          ) : null}\n        </ModalGateway>\n      </div>\n    );\n  }\n}\n\nGallery = withTranslationContext(Gallery);\n\nexport { Gallery };\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { NimbleEmoji } from 'emoji-mart';\n\nimport { Avatar } from './Avatar';\n\nimport { defaultMinimalEmojis, emojiSetDef, emojiData } from '../utils';\n\n/**\n * ReactionSelector - A component for selecting a reaction. Examples are love, wow, like etc.\n *\n * @example ./docs/ReactionSelector.md\n * @extends PureComponent\n */\nexport class ReactionSelector extends PureComponent {\n  static propTypes = {\n    /**\n     * Array of latest reactions.\n     * Reaction object has following structure:\n     *\n     * ```json\n     * {\n     *  \"type\": \"love\",\n     *  \"user_id\": \"demo_user_id\",\n     *  \"user\": {\n     *    ...userObject\n     *  },\n     *  \"created_at\": \"datetime\";\n     * }\n     * ```\n     * */\n    latest_reactions: PropTypes.array,\n    /** Object/map of reaction id/type (e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry') vs count */\n    reaction_counts: PropTypes.object,\n    /**\n     * Handler to set/unset reaction on message.\n     *\n     * @param type e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n     * */\n    handleReaction: PropTypes.func.isRequired,\n    /** Enable the avatar display */\n    detailedView: PropTypes.bool,\n    /** Provide a list of reaction options [{name: 'angry', emoji: 'angry'}] */\n    reactionOptions: PropTypes.array,\n    /** If true, reaction list will be shown at trailing end of message bubble. */\n    reverse: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    detailedView: true,\n    reactionOptions: defaultMinimalEmojis,\n    reverse: false,\n    emojiSetDef,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showTooltip: false,\n      users: [],\n      position: 0,\n      arrowPosition: 0,\n      positionCalculated: false,\n    };\n    this.reactionSelector = React.createRef();\n    this.reactionSelectorInner = React.createRef();\n    this.reactionSelectorTooltip = React.createRef();\n  }\n\n  showTooltip = async (e, users) => {\n    const target = e.target.getBoundingClientRect();\n    await this.setState(\n      () => ({\n        showTooltip: true,\n        users,\n      }),\n      async () => {\n        await this.setTooltipPosition(target);\n        await this.setArrowPosition(target);\n      },\n    );\n  };\n\n  hideTooltip = () => {\n    this.setState(() => ({\n      showTooltip: false,\n      users: [],\n      arrowPosition: 0,\n      position: 0,\n      positionCaculated: false,\n    }));\n  };\n\n  getUsersPerReaction = (reactions, type) =>\n    reactions && reactions.filter((item) => item.type === type);\n\n  getLatestUser = (reactions, type) => {\n    const filtered = this.getUsersPerReaction(reactions, type);\n    if (filtered && filtered[0] && filtered[0].user) {\n      return filtered[0].user;\n    } else {\n      return 'NotFound';\n    }\n  };\n\n  getUserNames = (reactions, type) => {\n    const filtered = this.getUsersPerReaction(reactions, type);\n    return filtered && filtered.map((item) => item.user || 'NotFound');\n  };\n\n  getContainerDimensions = () =>\n    this.reactionSelector.current.getBoundingClientRect();\n  getToolTipDimensions = () =>\n    this.reactionSelectorTooltip.current.getBoundingClientRect();\n\n  setTooltipPosition = async (target) => {\n    const container = await this.getContainerDimensions();\n    const tooltip = await this.getToolTipDimensions();\n    let position;\n\n    if (tooltip.width === container.width || tooltip.x < container.x) {\n      position = 0;\n    } else {\n      position =\n        target.left + target.width / 2 - container.left - tooltip.width / 2;\n    }\n\n    await this.setState(() => ({\n      position,\n    }));\n  };\n\n  setArrowPosition = async (target) => {\n    const tooltip = this.reactionSelectorTooltip.current.getBoundingClientRect();\n    const position = target.x - tooltip.x + target.width / 2;\n\n    await this.setState(() => ({\n      arrowPosition: position,\n      positionCaculated: true,\n    }));\n  };\n\n  renderReactionItems = () => {\n    const { reaction_counts, latest_reactions } = this.props;\n    return this.props.reactionOptions.map((reaction) => {\n      const users = this.getUserNames(latest_reactions, reaction.id);\n      const latestUser = this.getLatestUser(latest_reactions, reaction.id);\n\n      const count = reaction_counts && reaction_counts[reaction.id];\n\n      return (\n        <li\n          key={`item-${reaction.id}`}\n          className=\"str-chat__message-reactions-list-item\"\n          data-text={reaction.id}\n          onClick={this.props.handleReaction.bind(this, reaction.id)}\n        >\n          {Boolean(count) && this.props.detailedView && (\n            <React.Fragment>\n              <div\n                className=\"latest-user\"\n                onMouseEnter={(e) => this.showTooltip(e, users)}\n                onMouseLeave={this.hideTooltip}\n              >\n                {latestUser !== 'NotFound' ? (\n                  <Avatar\n                    image={latestUser.image}\n                    alt={latestUser.id}\n                    size={20}\n                    name={latestUser.id}\n                  />\n                ) : (\n                  <div className=\"latest-user-not-found\" />\n                )}\n              </div>\n            </React.Fragment>\n          )}\n          <NimbleEmoji emoji={reaction} {...emojiSetDef} data={emojiData} />\n\n          {Boolean(count) && this.props.detailedView && (\n            <span className=\"str-chat__message-reactions-list-item__count\">\n              {count || ''}\n            </span>\n          )}\n        </li>\n      );\n    });\n  };\n\n  renderUsers = (users) =>\n    users.map((user, i) => {\n      let text = user.name || user.id;\n      if (i + 1 < users.length) {\n        text += ', ';\n      }\n      return (\n        <span className=\"latest-user-username\" key={`key-${i}-${user}`}>\n          {text}\n        </span>\n      );\n    });\n\n  render() {\n    return (\n      <div\n        className={`str-chat__reaction-selector ${\n          this.props.reverse ? 'str-chat__reaction-selector--reverse' : ''\n        }`}\n        ref={this.reactionSelector}\n      >\n        {this.props.detailedView && (\n          <div\n            className=\"str-chat__reaction-selector-tooltip\"\n            ref={this.reactionSelectorTooltip}\n            style={{\n              visibility: this.state.showTooltip ? 'visible' : 'hidden',\n              left: this.state.position,\n              opacity:\n                this.state.showTooltip && this.state.positionCaculated\n                  ? 1\n                  : 0.01,\n            }}\n          >\n            <div className=\"arrow\" style={{ left: this.state.arrowPosition }} />\n            {this.renderUsers(this.state.users)}\n          </div>\n        )}\n\n        <ul className=\"str-chat__message-reactions-list\">\n          {this.renderReactionItems()}\n        </ul>\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nimport PropTypes from 'prop-types';\nimport { withTranslationContext } from '../context';\n\nclass MessageRepliesCountButton extends React.PureComponent {\n  static propTypes = {\n    /** Label for number of replies, when count is 1 */\n    labelSingle: PropTypes.string,\n    /** Label for number of replies, when count is more than 1 */\n    labelPlural: PropTypes.string,\n    /** Number of replies */\n    reply_count: PropTypes.number,\n    /**\n     * click handler for button\n     * @param event React's MouseEventHandler event\n     * @returns void\n     * */\n    onClick: PropTypes.func,\n  };\n  static defaultProps = {\n    reply_count: 0,\n  };\n\n  render() {\n    const { reply_count, labelSingle, labelPlural, t } = this.props;\n    let singleReplyText;\n    let pluralReplyText;\n\n    if (reply_count === 1) {\n      if (labelSingle) {\n        singleReplyText = `1 ${labelSingle}`;\n      } else {\n        singleReplyText = t('1 reply');\n      }\n    }\n\n    if (reply_count > 1) {\n      if (labelPlural) {\n        pluralReplyText = `${reply_count} ${labelPlural}`;\n      } else {\n        pluralReplyText = t('{{ replyCount }} replies', {\n          replyCount: reply_count,\n        });\n      }\n    }\n\n    if (reply_count && reply_count !== 0) {\n      return (\n        <button\n          className=\"str-chat__message-replies-count-button\"\n          onClick={this.props.onClick}\n        >\n          <svg width=\"18\" height=\"15\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n              d=\"M.56 10.946H.06l-.002-.498L.025.92a.5.5 0 1 1 1-.004l.032 9.029H9.06v-4l9 4.5-9 4.5v-4H.56z\"\n              fillRule=\"nonzero\"\n            />\n          </svg>\n          {reply_count === 1 ? singleReplyText : pluralReplyText}\n        </button>\n      );\n    }\n    return null;\n  }\n}\n\nMessageRepliesCountButton = withTranslationContext(MessageRepliesCountButton);\nexport { MessageRepliesCountButton };\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport class Modal extends React.PureComponent {\n  innerRef = React.createRef();\n  static propTypes = {\n    /** Callback handler for closing of modal. */\n    onClose: PropTypes.func,\n    /** If true, modal is opened or visible. */\n    open: PropTypes.bool,\n  };\n  componentDidMount() {\n    document.addEventListener('keyPress', this.handleEscKey, false);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keyPress', this.handleEscKey, false);\n  }\n\n  handleEscKey(e) {\n    if (e.keyCode === 27) {\n      this.props.onClose();\n      document.removeEventListener('keyPress', this.handleEscKey, false);\n    }\n  }\n\n  handleClick = (e) => {\n    if (!this.innerRef.current.contains(e.target)) {\n      this.props.onClose();\n      document.removeEventListener('keyPress', this.handleEscKey, false);\n    }\n  };\n\n  render() {\n    const openClasses = this.props.open\n      ? 'str-chat__modal--open'\n      : 'str-chat__modal--closed';\n    return (\n      <div\n        className={`str-chat__modal ${openClasses}`}\n        onClick={this.handleClick}\n      >\n        <div className=\"str-chat__modal__close-button\">\n          Close\n          <svg width=\"10\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n              d=\"M9.916 1.027L8.973.084 5 4.058 1.027.084l-.943.943L4.058 5 .084 8.973l.943.943L5 5.942l3.973 3.974.943-.943L5.942 5z\"\n              fillRule=\"evenodd\"\n            />\n          </svg>\n        </div>\n        <div className=\"str-chat__modal__inner\" ref={this.innerRef}>\n          {this.props.children}\n        </div>\n      </div>\n    );\n  }\n}\n","export const KEY_CODES = {\n  ESC: 27,\n  UP: 38,\n  DOWN: 40,\n  ENTER: 13,\n  TAB: 9,\n  SPACE: 32,\n};\n\n// This is self-made key shortcuts manager, used for caching key strokes\nclass Listener {\n  constructor() {\n    this.index = 0;\n    this.listeners = {};\n    this.refCount = 0;\n\n    this.f = (e) => {\n      const code = e.keyCode || e.which;\n      Object.values(this.listeners).forEach(({ keyCode, fn }) => {\n        if (keyCode.includes(code)) fn(e);\n      });\n    };\n  }\n\n  startListen = () => {\n    if (!this.refCount) {\n      // prevent multiple listeners in case of multiple TextareaAutocomplete components on page\n      document.addEventListener('keydown', this.f);\n    }\n    this.refCount++;\n  };\n\n  stopListen = () => {\n    this.refCount--;\n    if (!this.refCount) {\n      // prevent disable listening in case of multiple TextareaAutocomplete components on page\n      document.removeEventListener('keydown', this.f);\n    }\n  };\n\n  add = (keyCodes, fn) => {\n    let keyCode = keyCodes;\n\n    if (typeof keyCode !== 'object') keyCode = [keyCode];\n\n    this.listeners[this.index] = {\n      keyCode,\n      fn,\n    };\n\n    this.index += 1;\n\n    return this.index;\n  };\n\n  remove = (id) => {\n    delete this.listeners[id];\n  };\n\n  removeAll = () => {\n    this.listeners = {};\n    this.index = 0;\n  };\n}\n\nexport default new Listener();\n","//\n\nimport React from 'react';\n\nexport class Item extends React.Component {\n  selectItem = () => {\n    const { item, onSelectHandler } = this.props;\n    onSelectHandler(item);\n  };\n\n  render() {\n    const {\n      component: Component,\n      style,\n      onClickHandler,\n      item,\n      selected,\n      className,\n      innerRef,\n    } = this.props;\n\n    return (\n      <li className={`rta__item ${className || ''}`} style={style}>\n        <div\n          className={`rta__entity ${\n            selected === true ? 'rta__entity--selected' : ''\n          }`}\n          role=\"button\"\n          tabIndex={0}\n          onClick={onClickHandler}\n          onFocus={this.selectItem}\n          onMouseEnter={this.selectItem}\n          /* $FlowFixMe */\n          ref={innerRef}\n        >\n          <Component selected={selected} entity={item} />\n        </div>\n      </li>\n    );\n  }\n}\n\nexport default Item;\n","//\n\nimport React from 'react';\n\nimport Listeners, { KEY_CODES } from './listener';\nimport Item from './Item';\n\nexport class List extends React.Component {\n  state = {\n    selectedItem: null,\n  };\n\n  cachedValues = null;\n\n  componentDidMount() {\n    this.listeners.push(\n      Listeners.add([KEY_CODES.DOWN, KEY_CODES.UP], this.scroll),\n      Listeners.add([KEY_CODES.ENTER, KEY_CODES.TAB], this.onPressEnter),\n    );\n\n    const { values } = this.props;\n    if (values && values[0]) this.selectItem(values[0]);\n  }\n\n  UNSAFE_componentWillReceiveProps({ values }) {\n    const newValues = values.map((val) => this.getId(val)).join('');\n\n    if (this.cachedValues !== newValues && values && values[0]) {\n      this.selectItem(values[0]);\n      this.cachedValues = newValues;\n    }\n  }\n\n  componentWillUnmount() {\n    let listener;\n    while (this.listeners.length) {\n      listener = this.listeners.pop();\n      Listeners.remove(listener);\n    }\n  }\n\n  onPressEnter = (e) => {\n    if (e && e.preventDefault) {\n      e.preventDefault();\n    }\n\n    const { values } = this.props;\n\n    this.modifyText(values[this.getPositionInList()]);\n  };\n\n  getPositionInList = () => {\n    const { values } = this.props;\n    const { selectedItem } = this.state;\n\n    if (!selectedItem) return 0;\n\n    return values.findIndex((a) => this.getId(a) === this.getId(selectedItem));\n  };\n\n  getId = (item) => {\n    const textToReplace = this.props.getTextToReplace(item);\n    if (textToReplace.key) {\n      return textToReplace.key;\n    }\n\n    if (typeof item === 'string' || !item.key) {\n      return textToReplace.text;\n    }\n\n    return item.key;\n  };\n\n  listeners = [];\n\n  itemsRef = {};\n\n  modifyText = (value) => {\n    if (!value) return;\n\n    const { onSelect, getTextToReplace, getSelectedItem } = this.props;\n\n    onSelect(getTextToReplace(value));\n    if (getSelectedItem) {\n      getSelectedItem(value);\n    }\n  };\n\n  selectItem = (item, keyboard = false) => {\n    this.setState({ selectedItem: item }, () => {\n      if (keyboard) {\n        this.props.dropdownScroll(this.itemsRef[this.getId(item)]);\n      }\n    });\n  };\n\n  scroll = (e) => {\n    if (e && e.preventDefault) {\n      e.preventDefault();\n    }\n\n    const { values } = this.props;\n\n    const code = e.keyCode || e.which;\n\n    const oldPosition = this.getPositionInList();\n    let newPosition;\n    switch (code) {\n      case KEY_CODES.DOWN:\n        newPosition = oldPosition + 1;\n        break;\n      case KEY_CODES.UP:\n        newPosition = oldPosition - 1;\n        break;\n      default:\n        newPosition = oldPosition;\n        break;\n    }\n\n    newPosition =\n      ((newPosition % values.length) + values.length) % values.length; // eslint-disable-line\n    this.selectItem(\n      values[newPosition],\n      [KEY_CODES.DOWN, KEY_CODES.UP].includes(code),\n    );\n  };\n\n  isSelected = (item) => {\n    const { selectedItem } = this.state;\n    if (!selectedItem) return false;\n\n    return this.getId(selectedItem) === this.getId(item);\n  };\n\n  renderHeader = (value) => {\n    if (value[0] === '/') {\n      return `Commands matching <strong>${value.replace('/', '')}</strong>`;\n    }\n\n    if (value[0] === ':') {\n      return `Emoji matching <strong>${value.replace(':', '')}</strong>`;\n    }\n\n    if (value[0] === '@') {\n      return `Searching for people`;\n    }\n  };\n\n  render() {\n    const {\n      values,\n      component,\n      style,\n      itemClassName,\n      className,\n      itemStyle,\n    } = this.props;\n\n    return (\n      <ul className={`rta__list ${className || ''}`} style={style}>\n        <li\n          className=\"rta__list-header\"\n          dangerouslySetInnerHTML={{\n            __html: this.renderHeader(this.props.value),\n          }}\n        />\n        {values.map((item) => (\n          <Item\n            key={this.getId(item)}\n            innerRef={(ref) => {\n              this.itemsRef[this.getId(item)] = ref;\n            }}\n            selected={this.isSelected(item)}\n            item={item}\n            className={itemClassName}\n            style={itemStyle}\n            onClickHandler={this.onPressEnter}\n            onSelectHandler={this.selectItem}\n            component={component}\n          />\n        ))}\n      </ul>\n    );\n  }\n}\n\nexport default List;\n","//\n\nexport function defaultScrollToItem(container, item) {\n  const itemHeight = parseInt(\n    getComputedStyle(item).getPropertyValue('height'),\n    10,\n  );\n\n  const containerHight =\n    parseInt(getComputedStyle(container).getPropertyValue('height'), 10) -\n    itemHeight;\n\n  const itemOffsetTop = item.offsetTop;\n  const actualScrollTop = container.scrollTop;\n\n  if (\n    itemOffsetTop < actualScrollTop + containerHight &&\n    actualScrollTop < itemOffsetTop\n  ) {\n    return;\n  }\n\n  // eslint-disable-next-line\n  container.scrollTop = itemOffsetTop;\n}\n","//\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport getCaretCoordinates from 'textarea-caret';\nimport CustomEvent from 'custom-event';\n\nimport Listeners, { KEY_CODES } from './listener';\nimport List from './List';\n\nimport { defaultScrollToItem } from './utils';\n\nimport Textarea from 'react-textarea-autosize';\n\nconst DEFAULT_CARET_POSITION = 'next';\n\nconst errorMessage = (message) =>\n  console.error(\n    `RTA: dataProvider fails: ${message}\n    \\nCheck the documentation or create issue if you think it's bug. https://github.com/webscopeio/react-textarea-autocomplete/issues`,\n  );\n\nclass ReactTextareaAutocomplete extends React.Component {\n  static defaultProps = {\n    closeOnClickOutside: true,\n    movePopupAsYouType: false,\n    value: '',\n    minChar: 1,\n    scrollToItem: true,\n    maxRows: 10,\n  };\n\n  constructor(props) {\n    super(props);\n\n    const { loadingComponent, trigger, value } = this.props;\n\n    // TODO: it would be better to have the parent control state...\n    // if (value) this.state.value = value;\n\n    this._createRegExp();\n\n    if (!loadingComponent) {\n      throw new Error('RTA: loadingComponent is not defined');\n    }\n\n    if (!trigger) {\n      throw new Error('RTA: trigger is not defined');\n    }\n    this.state = {\n      top: null,\n      left: null,\n      currentTrigger: null,\n      actualToken: '',\n      data: null,\n      value: value || '',\n      dataLoading: false,\n      selectionEnd: 0,\n      selectionStart: 0,\n      component: null,\n      listenerIndex: 0,\n    };\n  }\n\n  componentDidMount() {\n    Listeners.add(KEY_CODES.ESC, () => this._closeAutocomplete());\n    Listeners.add(KEY_CODES.SPACE, () => this._onSpace());\n    const listenerIndex = Listeners.add(KEY_CODES.ENTER, (e) =>\n      this._onEnter(e),\n    );\n    this.setState({\n      listenerIndex,\n    });\n    Listeners.startListen();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    this._update(nextProps);\n  }\n\n  componentWillUnmount() {\n    Listeners.stopListen();\n    Listeners.remove(this.state.listenerIndex);\n  }\n\n  getSelectionPosition = () => {\n    if (!this.textareaRef) return null;\n\n    return {\n      selectionStart: this.textareaRef.selectionStart,\n      selectionEnd: this.textareaRef.selectionEnd,\n    };\n  };\n\n  getSelectedText = () => {\n    if (!this.textareaRef) return null;\n    const { selectionStart, selectionEnd } = this.textareaRef;\n\n    if (selectionStart === selectionEnd) return null;\n\n    return this.state.value.substr(\n      selectionStart,\n      selectionEnd - selectionStart,\n    );\n  };\n\n  setCaretPosition = (position = 0) => {\n    if (!this.textareaRef) return;\n\n    this.textareaRef.focus();\n    this.textareaRef.setSelectionRange(position, position);\n  };\n\n  getCaretPosition = () => {\n    if (!this.textareaRef) {\n      return 0;\n    }\n\n    return this.textareaRef.selectionEnd;\n  };\n\n  // handle the on-enter behaviour\n  _onEnter = (event) => {\n    const trigger = this.state.currentTrigger;\n    if (!this.textareaRef) {\n      return;\n    }\n\n    const hasFocus = this.textareaRef.matches(':focus');\n\n    // don't submit if the element has focus or the shift key is pressed\n    if (!hasFocus || event.shiftKey === true) {\n      return;\n    }\n    if (!trigger) {\n      // trigger a submit\n      this._replaceWord();\n      if (this.textareaRef) {\n        this.textareaRef.selectionEnd = 0;\n      }\n      this.props.handleSubmit(event);\n    }\n  };\n\n  // handle the on-space behaviour\n  _onSpace = () => {\n    if (!this.props.replaceWord) {\n      return;\n    }\n\n    if (!this.textareaRef) {\n      return;\n    }\n    const hasFocus = this.textareaRef.matches(':focus');\n\n    // don't change characters if the element doesn't have focus\n    if (!hasFocus) {\n      return;\n    }\n    this._replaceWord();\n  };\n\n  _replaceWord = () => {\n    const lastWordRegex = /([^\\s]+)(\\s*)$/;\n    const { value } = this.state;\n    const match = lastWordRegex.exec(value.slice(0, this.getCaretPosition()));\n    const lastWord = match && match[1];\n    if (!lastWord) {\n      return;\n    }\n    const spaces = match[2];\n\n    const newWord = this.props.replaceWord(lastWord);\n    if (newWord == null) {\n      return;\n    }\n    const textBeforeWord = value.slice(\n      0,\n      this.getCaretPosition() - match[0].length,\n    );\n    const textAfterCaret = value.slice(this.getCaretPosition(), -1);\n    const newText = textBeforeWord + newWord + spaces + textAfterCaret;\n    this.setState(\n      {\n        value: newText,\n      },\n      () => {\n        // fire onChange event after successful selection\n        const e = new CustomEvent('change', { bubbles: true });\n        this.textareaRef.dispatchEvent(e);\n        if (this.props.onChange) this.props.onChange(e);\n      },\n    );\n  };\n\n  _onSelect = (newToken) => {\n    const { selectionEnd, currentTrigger, value: textareaValue } = this.state;\n    const { onChange, trigger } = this.props;\n\n    if (!currentTrigger) return;\n\n    const computeCaretPosition = (position, token, startToken) => {\n      switch (position) {\n        case 'start':\n          return startToken;\n        case 'next':\n        case 'end':\n          return startToken + token.length;\n        default:\n          if (!Number.isInteger(position)) {\n            throw new Error(\n              'RTA: caretPosition should be \"start\", \"next\", \"end\" or number.',\n            );\n          }\n\n          return position;\n      }\n    };\n\n    const textToModify = textareaValue.slice(0, selectionEnd);\n\n    const startOfTokenPosition = textToModify.search(\n      /**\n       * It's important to escape the currentTrigger char for chars like [, (,...\n       */\n      new RegExp(\n        `\\\\${currentTrigger}${`[^\\\\${currentTrigger}${\n          trigger[currentTrigger].allowWhitespace ? '' : '\\\\s'\n        }]`}*$`,\n      ),\n    );\n\n    // we add space after emoji is selected if a caret position is next\n    const newTokenString =\n      newToken.caretPosition === 'next' ? `${newToken.text} ` : newToken.text;\n\n    const newCaretPosition = computeCaretPosition(\n      newToken.caretPosition,\n      newTokenString,\n      startOfTokenPosition,\n    );\n\n    const modifiedText =\n      textToModify.substring(0, startOfTokenPosition) + newTokenString;\n\n    // set the new textarea value and after that set the caret back to its position\n    this.setState(\n      {\n        value: textareaValue.replace(textToModify, modifiedText),\n        dataLoading: false,\n      },\n      () => {\n        // fire onChange event after successful selection\n        const e = new CustomEvent('change', { bubbles: true });\n        this.textareaRef.dispatchEvent(e);\n        if (onChange) onChange(e);\n\n        this.setCaretPosition(newCaretPosition);\n      },\n    );\n    this._closeAutocomplete();\n  };\n\n  _getItemOnSelect = () => {\n    const { currentTrigger } = this.state;\n    const triggerSettings = this._getCurrentTriggerSettings();\n\n    if (!currentTrigger || !triggerSettings) return null;\n\n    const { callback } = triggerSettings;\n\n    if (!callback) return null;\n\n    return (item) => {\n      if (typeof callback !== 'function') {\n        throw new Error(\n          'Output functor is not defined! You have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type',\n        );\n      }\n      if (callback) {\n        return callback(item, currentTrigger);\n      }\n      return null;\n    };\n  };\n\n  _getTextToReplace = () => {\n    const { currentTrigger, actualToken } = this.state;\n    const triggerSettings = this._getCurrentTriggerSettings();\n\n    if (!currentTrigger || !triggerSettings) return null;\n\n    const { output } = triggerSettings;\n\n    return (item) => {\n      if (\n        typeof item === 'object' &&\n        (!output || typeof output !== 'function')\n      ) {\n        throw new Error(\n          'Output functor is not defined! If you are using items as object you have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type',\n        );\n      }\n\n      if (output) {\n        const textToReplace = output(item, currentTrigger);\n\n        if (!textToReplace || typeof textToReplace === 'number') {\n          throw new Error(\n            `Output functor should return string or object in shape {text: string, caretPosition: string | number}.\\nGot \"${String(\n              textToReplace,\n            )}\". Check the implementation for trigger \"${currentTrigger}\" and its token \"${actualToken}\"\\n\\nSee https://github.com/webscopeio/react-textarea-autocomplete#trigger-type for more informations.\\n`,\n          );\n        }\n\n        if (typeof textToReplace === 'string') {\n          return {\n            text: textToReplace,\n            caretPosition: DEFAULT_CARET_POSITION,\n          };\n        }\n\n        if (!textToReplace.text) {\n          throw new Error(\n            `Output \"text\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \"${currentTrigger}\" and its token \"${actualToken}\"\\n`,\n          );\n        }\n\n        if (!textToReplace.caretPosition) {\n          throw new Error(\n            `Output \"caretPosition\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \"${currentTrigger}\" and its token \"${actualToken}\"\\n`,\n          );\n        }\n\n        return textToReplace;\n      }\n\n      if (typeof item !== 'string') {\n        throw new Error('Output item should be string\\n');\n      }\n\n      return {\n        text: `${currentTrigger}${item}${currentTrigger}`,\n        caretPosition: DEFAULT_CARET_POSITION,\n      };\n    };\n  };\n\n  _getCurrentTriggerSettings = () => {\n    const { currentTrigger } = this.state;\n\n    if (!currentTrigger) return null;\n\n    return this.props.trigger[currentTrigger];\n  };\n\n  _getValuesFromProvider = () => {\n    const { currentTrigger, actualToken } = this.state;\n    const triggerSettings = this._getCurrentTriggerSettings();\n\n    if (!currentTrigger || !triggerSettings) {\n      return;\n    }\n\n    const { dataProvider, component } = triggerSettings;\n\n    if (typeof dataProvider !== 'function') {\n      throw new Error('Trigger provider has to be a function!');\n    }\n\n    this.setState({\n      dataLoading: true,\n    });\n\n    // Modified: send the full text to support / style commands\n    let providedData = dataProvider(actualToken, this.state.value);\n\n    if (!(providedData instanceof Promise)) {\n      providedData = Promise.resolve(providedData);\n    }\n\n    providedData\n      .then((data) => {\n        if (!Array.isArray(data)) {\n          throw new Error('Trigger provider has to provide an array!');\n        }\n\n        if (typeof component !== 'function') {\n          throw new Error('Component should be defined!');\n        }\n\n        // throw away if we resolved old trigger\n        if (currentTrigger !== this.state.currentTrigger) return;\n\n        // if we haven't resolved any data let's close the autocomplete\n        if (!data.length) {\n          this._closeAutocomplete();\n          return;\n        }\n\n        this.setState({\n          dataLoading: false,\n          data,\n          component,\n        });\n      })\n      .catch((e) => errorMessage(e.message));\n  };\n\n  _getSuggestions = () => {\n    const { currentTrigger, data } = this.state;\n\n    if (!currentTrigger || !data || (data && !data.length)) return null;\n\n    return data;\n  };\n\n  _createRegExp = () => {\n    const { trigger } = this.props;\n\n    // negative lookahead to match only the trigger + the actual token = \"bladhwd:adawd:word test\" => \":word\"\n    // https://stackoverflow.com/a/8057827/2719917\n    this.tokenRegExp = new RegExp(\n      `([${Object.keys(trigger).join('')}])(?:(?!\\\\1)[^\\\\s])*$`,\n    );\n  };\n\n  // TODO: This is an anti pattern in react, should come up with a better way\n  _update({ value, trigger }) {\n    const { value: oldValue } = this.state;\n    const { trigger: oldTrigger } = this.props;\n\n    if (value !== oldValue || !oldValue) this.setState({ value });\n    /**\n     * check if trigger chars are changed, if so, change the regexp accordingly\n     */\n    if (Object.keys(trigger).join('') !== Object.keys(oldTrigger).join('')) {\n      this._createRegExp();\n    }\n  }\n\n  /**\n   * Close autocomplete, also clean up trigger (to avoid slow promises)\n   */\n  _closeAutocomplete = () => {\n    this.setState({\n      data: null,\n      dataLoading: false,\n      currentTrigger: null,\n      top: null,\n      left: null,\n    });\n  };\n\n  _cleanUpProps = () => {\n    const props = { ...this.props };\n    const notSafe = [\n      'loadingComponent',\n      'containerStyle',\n      'minChar',\n      'scrollToItem',\n      'ref',\n      'innerRef',\n      'onChange',\n      'onCaretPositionChange',\n      'className',\n      'value',\n      'trigger',\n      'listStyle',\n      'itemStyle',\n      'containerStyle',\n      'loaderStyle',\n      'className',\n      'containerClassName',\n      'listClassName',\n      'itemClassName',\n      'loaderClassName',\n      'closeOnClickOutside',\n      'dropdownStyle',\n      'dropdownClassName',\n      'movePopupAsYouType',\n      'handleSubmit',\n      'replaceWord',\n      'grow',\n      'additionalTextareaProps',\n    ];\n\n    // eslint-disable-next-line\n    for (const prop in props) {\n      if (notSafe.includes(prop)) delete props[prop];\n    }\n\n    return props;\n  };\n\n  _changeHandler = (e) => {\n    const {\n      trigger,\n      onChange,\n      minChar,\n      onCaretPositionChange,\n      movePopupAsYouType,\n    } = this.props;\n    const { top, left } = this.state;\n\n    const textarea = e.target;\n    const { selectionEnd, selectionStart } = textarea;\n    const value = textarea.value;\n\n    if (onChange) {\n      e.persist();\n      onChange(e);\n    }\n\n    if (onCaretPositionChange) {\n      const caretPosition = this.getCaretPosition();\n      onCaretPositionChange(caretPosition);\n    }\n\n    this.setState({\n      value,\n    });\n\n    let tokenMatch = this.tokenRegExp.exec(value.slice(0, selectionEnd));\n    let lastToken = tokenMatch && tokenMatch[0];\n\n    let currentTrigger =\n      (lastToken && Object.keys(trigger).find((a) => a === lastToken[0])) ||\n      null;\n\n    /*\n     if we lost the trigger token or there is no following character we want to close\n     the autocomplete\n    */\n    if (\n      (!lastToken || lastToken.length <= minChar) &&\n      // check if our current trigger disallows whitespace\n      ((this.state.currentTrigger &&\n        !trigger[this.state.currentTrigger].allowWhitespace) ||\n        !this.state.currentTrigger)\n    ) {\n      this._closeAutocomplete();\n      return;\n    }\n\n    /**\n     * This code has to be sync that is the reason why we obtain the currentTrigger\n     * from currentTrigger not this.state.currentTrigger\n     *\n     * Check if the currently typed token has to be afterWhitespace, or not.\n     */\n    if (\n      currentTrigger &&\n      value[tokenMatch.index - 1] &&\n      trigger[currentTrigger].afterWhitespace &&\n      !value[tokenMatch.index - 1].match(/\\s/)\n    ) {\n      this._closeAutocomplete();\n      return;\n    }\n\n    /**\n      If our current trigger allows whitespace\n      get the correct token for DataProvider, so we need to construct new RegExp\n     */\n    if (\n      this.state.currentTrigger &&\n      trigger[this.state.currentTrigger].allowWhitespace\n    ) {\n      tokenMatch = new RegExp(\n        `\\\\${this.state.currentTrigger}[^${this.state.currentTrigger}]*$`,\n      ).exec(value.slice(0, selectionEnd));\n      lastToken = tokenMatch && tokenMatch[0];\n\n      if (!lastToken) {\n        this._closeAutocomplete();\n        return;\n      }\n\n      currentTrigger =\n        Object.keys(trigger).find((a) => a === lastToken[0]) || null;\n    }\n\n    const actualToken = lastToken.slice(1);\n\n    // if trigger is not configured step out from the function, otherwise proceed\n    if (!currentTrigger) {\n      return;\n    }\n\n    if (\n      movePopupAsYouType ||\n      (top === null && left === null) ||\n      // if we have single char - trigger it means we want to re-position the autocomplete\n      lastToken.length === 1\n    ) {\n      const { top: newTop, left: newLeft } = getCaretCoordinates(\n        textarea,\n        selectionEnd,\n      );\n\n      this.setState({\n        // make position relative to textarea\n        top: newTop - this.textareaRef.scrollTop || 0,\n        left: newLeft,\n      });\n    }\n\n    this.setState(\n      {\n        selectionEnd,\n        selectionStart,\n        currentTrigger,\n        actualToken,\n      },\n      () => {\n        try {\n          this._getValuesFromProvider();\n        } catch (err) {\n          errorMessage(err.message);\n        }\n      },\n    );\n  };\n\n  _selectHandler = (e) => {\n    const { onCaretPositionChange, onSelect } = this.props;\n\n    if (onCaretPositionChange) {\n      const caretPosition = this.getCaretPosition();\n      onCaretPositionChange(caretPosition);\n    }\n\n    if (onSelect) {\n      e.persist();\n      onSelect(e);\n    }\n  };\n\n  _onClickAndBlurHandler = (e) => {\n    const { closeOnClickOutside, onBlur } = this.props;\n\n    // If this is a click: e.target is the textarea, and e.relatedTarget is the thing\n    // that was actually clicked. If we clicked inside the autoselect dropdown, then\n    // that's not a blur, from the autoselect's point of view, so then do nothing.\n    const el = e.relatedTarget;\n    if (\n      this.dropdownRef &&\n      el instanceof Node &&\n      this.dropdownRef.contains(el)\n    ) {\n      return;\n    }\n\n    if (closeOnClickOutside) {\n      this._closeAutocomplete();\n    }\n\n    if (onBlur) {\n      e.persist();\n      onBlur(e);\n    }\n  };\n\n  _onScrollHandler = () => {\n    this._closeAutocomplete();\n  };\n\n  _dropdownScroll = (item) => {\n    const { scrollToItem } = this.props;\n\n    if (!scrollToItem) return;\n\n    if (scrollToItem === true) {\n      defaultScrollToItem(this.dropdownRef, item);\n      return;\n    }\n\n    if (typeof scrollToItem !== 'function' || scrollToItem.length !== 2) {\n      throw new Error(\n        '`scrollToItem` has to be boolean (true for default implementation) or function with two parameters: container, item.',\n      );\n    }\n\n    scrollToItem(this.dropdownRef, item);\n  };\n\n  render() {\n    const {\n      loadingComponent: Loader,\n      style,\n      className,\n      itemStyle,\n      listClassName,\n      itemClassName,\n      dropdownClassName,\n      dropdownStyle,\n      containerStyle,\n      containerClassName,\n      loaderStyle,\n      loaderClassName,\n    } = this.props;\n    const { dataLoading, currentTrigger, component, value } = this.state;\n\n    const suggestionData = this._getSuggestions();\n    const textToReplace = this._getTextToReplace();\n    const selectedItem = this._getItemOnSelect();\n\n    let maxRows = this.props.maxRows;\n    if (!this.props.grow) {\n      maxRows = 1;\n    }\n\n    return (\n      <div\n        className={`rta ${\n          dataLoading === true ? 'rta--loading' : ''\n        } ${containerClassName || ''}`}\n        style={containerStyle}\n      >\n        {(dataLoading || suggestionData) && currentTrigger && (\n          <div\n            ref={(ref) => {\n              // $FlowFixMe\n              this.dropdownRef = ref;\n            }}\n            style={{ ...dropdownStyle }}\n            className={`rta__autocomplete ${dropdownClassName || ''}`}\n          >\n            {suggestionData && component && textToReplace && (\n              <List\n                value={value}\n                values={suggestionData}\n                component={component}\n                className={listClassName}\n                itemClassName={itemClassName}\n                itemStyle={itemStyle}\n                getTextToReplace={textToReplace}\n                getSelectedItem={selectedItem}\n                onSelect={this._onSelect}\n                dropdownScroll={this._dropdownScroll}\n              />\n            )}\n            {dataLoading && (\n              <div\n                className={`rta__loader ${\n                  suggestionData !== null\n                    ? 'rta__loader--suggestion-data'\n                    : 'rta__loader--empty-suggestion-data'\n                } ${loaderClassName || ''}`}\n                style={loaderStyle}\n              >\n                <Loader data={suggestionData} />\n              </div>\n            )}\n          </div>\n        )}\n\n        <Textarea\n          {...this._cleanUpProps()}\n          inputRef={(ref) => {\n            this.props.innerRef && this.props.innerRef(ref);\n            this.textareaRef = ref;\n          }}\n          maxRows={maxRows}\n          className={`rta__textarea ${className || ''}`}\n          onChange={this._changeHandler}\n          onSelect={this._selectHandler}\n          onScroll={this._onScrollHandler}\n          onClick={\n            // The textarea itself is outside the autoselect dropdown.\n            this._onClickAndBlurHandler\n          }\n          onBlur={this._onClickAndBlurHandler}\n          onFocus={this.props.onFocus}\n          value={value}\n          style={style}\n          {...this.props.additionalTextareaProps}\n        />\n      </div>\n    );\n  }\n}\n\nconst triggerPropsCheck = ({ trigger }) => {\n  if (!trigger) return Error('Invalid prop trigger. Prop missing.');\n\n  const triggers = Object.entries(trigger);\n\n  for (let i = 0; i < triggers.length; i += 1) {\n    const [triggerChar, settings] = triggers[i];\n\n    if (typeof triggerChar !== 'string' || triggerChar.length !== 1) {\n      return Error(\n        'Invalid prop trigger. Keys of the object has to be string / one character.',\n      );\n    }\n\n    // $FlowFixMe\n    const triggerSetting = settings;\n\n    const {\n      component,\n      dataProvider,\n      output,\n      callback,\n      afterWhitespace,\n      allowWhitespace,\n    } = triggerSetting;\n\n    if (!component || typeof component !== 'function') {\n      return Error('Invalid prop trigger: component should be defined.');\n    }\n\n    if (!dataProvider || typeof dataProvider !== 'function') {\n      return Error('Invalid prop trigger: dataProvider should be defined.');\n    }\n\n    if (output && typeof output !== 'function') {\n      return Error('Invalid prop trigger: output should be a function.');\n    }\n\n    if (callback && typeof callback !== 'function') {\n      return Error('Invalid prop trigger: callback should be a function.');\n    }\n\n    if (afterWhitespace && allowWhitespace) {\n      return Error(\n        'Invalid prop trigger: afterWhitespace and allowWhitespace can be used together',\n      );\n    }\n  }\n\n  return null;\n};\n\nReactTextareaAutocomplete.propTypes = {\n  loadingComponent: PropTypes.func.isRequired,\n  minChar: PropTypes.number,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onBlur: PropTypes.func,\n  onCaretPositionChange: PropTypes.func,\n  className: PropTypes.string,\n  containerStyle: PropTypes.object,\n  containerClassName: PropTypes.string,\n  closeOnClickOutside: PropTypes.bool,\n  style: PropTypes.object,\n  listStyle: PropTypes.object,\n  itemStyle: PropTypes.object,\n  loaderStyle: PropTypes.object,\n  dropdownStyle: PropTypes.object,\n  listClassName: PropTypes.string,\n  itemClassName: PropTypes.string,\n  loaderClassName: PropTypes.string,\n  dropdownClassName: PropTypes.string,\n  value: PropTypes.string,\n  trigger: triggerPropsCheck, //eslint-disable-line\n};\n\nexport default ReactTextareaAutocomplete;\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nexport class EmoticonItem extends PureComponent {\n  static propTypes = {\n    entity: PropTypes.shape({\n      /** Name for emoticon */\n      name: PropTypes.string,\n      /** Native value or actual emoticon */\n      native: PropTypes.string,\n      /** Representative character for emoticon */\n      char: PropTypes.string,\n    }),\n  };\n\n  render() {\n    return (\n      <div className=\"str-chat__emoji-item\">\n        <span className=\"str-chat__emoji-item--entity\">\n          {this.props.entity.native}\n        </span>\n        <span className=\"str-chat__emoji-item--name\">\n          {this.props.entity.name}\n        </span>\n        <span className=\"str-chat__emoji-item--char\">\n          {this.props.entity.char}\n        </span>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { Avatar } from './Avatar';\nimport PropTypes from 'prop-types';\n\nexport class UserItem extends PureComponent {\n  static propTypes = {\n    entity: PropTypes.shape({\n      /** Name of the user */\n      name: PropTypes.string,\n      /** Id of the user */\n      id: PropTypes.string,\n      /** Image of the user */\n      image: PropTypes.string,\n    }),\n  };\n  render() {\n    const u = this.props.entity;\n    return (\n      <div className=\"str-chat__user-item\">\n        <Avatar size={20} image={u.image} />\n        <div>\n          <strong>{u.name}</strong> {!u.name ? u.id : ''}\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nexport class CommandItem extends PureComponent {\n  static propTypes = {\n    entity: PropTypes.shape({\n      /** Name of the command */\n      name: PropTypes.string,\n      /** Arguments of command */\n      args: PropTypes.string,\n      /** Description of command */\n      description: PropTypes.string,\n    }),\n  };\n\n  render() {\n    const c = this.props.entity;\n\n    return (\n      <div className=\"str-chat__slash-command\">\n        <span className=\"str-chat__slash-command-header\">\n          <strong>{c.name}</strong> {c.args}\n        </span>\n        <br />\n        <span className=\"str-chat__slash-command-description\">\n          {c.description}\n        </span>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport AutoCompleteTextarea from './AutoCompleteTextarea';\nimport { LoadingIndicator } from './LoadingIndicator';\n\n// import '@webscopeio/react-textarea-autocomplete/style.css';\nimport { emojiIndex } from 'emoji-mart';\n\nimport { EmoticonItem } from './EmoticonItem';\nimport { UserItem } from './UserItem';\nimport { CommandItem } from './CommandItem';\n/**\n * Textarea component with included autocomplete options. You can set your own commands and\n * @example ./docs/ChatAutoComplete.md\n */\nexport class ChatAutoComplete extends PureComponent {\n  static propTypes = {\n    /** The number of rows you want the textarea to have */\n    rows: PropTypes.number,\n    /** Grow the number of rows of the textarea while you're typing */\n    grow: PropTypes.bool,\n    /** Maximum number of rows */\n    maxRows: PropTypes.number,\n    /** Make the textarea disabled */\n    disabled: PropTypes.bool,\n    /** The value of the textarea */\n    value: PropTypes.string,\n    /** Function to run on pasting within the textarea */\n    onPaste: PropTypes.func,\n    /** Function that runs on submit */\n    handleSubmit: PropTypes.func,\n    /** Function that runs on change */\n    onChange: PropTypes.func,\n    /** Placeholder for the textare */\n    placeholder: PropTypes.string,\n    /** What loading component to use for the auto complete when loading results. */\n    LoadingIndicator: PropTypes.node,\n    /** Minimum number of Character */\n    minChar: PropTypes.number,\n    /** Array of [user object](https://getstream.io/chat/docs/#chat-doc-set-user). Used for mentions suggestions */\n    users: PropTypes.array,\n    /**\n     * Handler for selecting item from suggestions list\n     *\n     * @param item Selected item object.\n     *  */\n    onSelectItem: PropTypes.func,\n    /** Array of [commands](https://getstream.io/chat/docs/#channel_commands) */\n    commands: PropTypes.array,\n    /** Listener for onfocus event on textarea */\n    onFocus: PropTypes.object,\n    /**\n     * Any additional attrubutes that you may want to add for underlying HTML textarea element.\n     */\n    additionalTextareaProps: PropTypes.object,\n  };\n\n  static defaultProps = {\n    rows: 3,\n  };\n\n  getTriggers() {\n    return {\n      ':': {\n        dataProvider: (q) => {\n          if (q.length === 0 || q.charAt(0).match(/[^a-zA-Z0-9+-]/)) {\n            return [];\n          }\n          const emojis = emojiIndex.search(q) || [];\n          return emojis.slice(0, 10);\n        },\n        component: EmoticonItem,\n        output: (entity) => ({\n          key: entity.id,\n          text: `${entity.native}`,\n          caretPosition: 'next',\n        }),\n      },\n      '@': {\n        dataProvider: (q) => {\n          const matchingUsers = this.props.users.filter((user) => {\n            if (\n              user.name !== undefined &&\n              user.name.toLowerCase().indexOf(q.toLowerCase()) !== -1\n            ) {\n              return true;\n            } else if (user.id.toLowerCase().indexOf(q.toLowerCase()) !== -1) {\n              return true;\n            } else {\n              return false;\n            }\n          });\n          return matchingUsers.slice(0, 10);\n        },\n        component: UserItem,\n        output: (entity) => ({\n          key: entity.id,\n          text: `@${entity.name || entity.id}`,\n          caretPosition: 'next',\n        }),\n        callback: (item) => this.props.onSelectItem(item),\n      },\n      '/': {\n        dataProvider: (q, text) => {\n          if (text.indexOf('/') !== 0) {\n            return [];\n          }\n          const selectedCommands = this.props.commands.filter(\n            (c) => c.name.indexOf(q) !== -1,\n          );\n\n          // sort alphabetically unless the you're matching the first char\n          selectedCommands.sort((a, b) => {\n            let nameA = a.name.toLowerCase();\n            let nameB = b.name.toLowerCase();\n            if (nameA.indexOf(q) === 0) {\n              nameA = `0${nameA}`;\n            }\n            if (nameB.indexOf(q) === 0) {\n              nameB = `0${nameB}`;\n            }\n            if (nameA < nameB) {\n              return -1;\n            }\n            if (nameA > nameB) {\n              return 1;\n            }\n\n            return 0;\n          });\n\n          return selectedCommands.slice(0, 10);\n        },\n        component: CommandItem,\n        output: (entity) => ({\n          key: entity.id,\n          text: `/${entity.name}`,\n          caretPosition: 'next',\n        }),\n      },\n    };\n  }\n\n  emojiReplace(word) {\n    const found = emojiIndex.search(word) || [];\n    for (const emoji of found.slice(0, 10)) {\n      if (emoji.emoticons.includes(word)) {\n        return emoji.native;\n      }\n    }\n  }\n\n  render() {\n    const { innerRef } = this.props;\n    return (\n      <AutoCompleteTextarea\n        loadingComponent={LoadingIndicator}\n        trigger={this.getTriggers()}\n        replaceWord={this.emojiReplace}\n        minChar={0}\n        maxRows={this.props.maxRows}\n        innerRef={\n          innerRef &&\n          ((ref) => {\n            innerRef.current = ref;\n          })\n        }\n        onFocus={this.props.onFocus}\n        rows={this.props.rows}\n        className=\"str-chat__textarea__textarea\"\n        containerClassName=\"str-chat__textarea\"\n        dropdownClassName=\"str-chat__emojisearch\"\n        listClassName=\"str-chat__emojisearch__list\"\n        itemClassName=\"str-chat__emojisearch__item\"\n        placeholder={this.props.placeholder}\n        onChange={this.props.onChange}\n        handleSubmit={this.props.handleSubmit}\n        onPaste={this.props.onPaste}\n        value={this.props.value}\n        grow={this.props.grow}\n        disabled={this.props.disabled}\n        additionalTextareaProps={this.props.additionalTextareaProps}\n      />\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { ChatAutoComplete } from './ChatAutoComplete';\nimport { withTranslationContext } from '../context';\nimport { filterEmoji } from '../utils';\nimport {\n  ImageDropzone,\n  ImagePreviewer,\n  FilePreviewer,\n  FileUploadButton,\n} from 'react-file-utils';\n\nimport { Picker } from 'emoji-mart';\n\n/**\n * MessageInputLarge - Large Message Input to be used for the MessageInput.\n * @example ./docs/MessageInputLarge.md\n */\nclass MessageInputLarge extends PureComponent {\n  static propTypes = {\n    /** Set focus to the text input if this is enabled */\n    focus: PropTypes.bool.isRequired,\n    /** Grow the textarea while you're typing */\n    grow: PropTypes.bool.isRequired,\n    /** Specify the max amount of rows the textarea is able to grow */\n    maxRows: PropTypes.number.isRequired,\n    /** Make the textarea disabled */\n    disabled: PropTypes.bool,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    imageOrder: PropTypes.array,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    imageUploads: PropTypes.object,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    removeImage: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    uploadImage: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    uploadNewFiles: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    numberOfUploads: PropTypes.number,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    fileOrder: PropTypes.array,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    fileUploads: PropTypes.object,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    removeFile: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    uploadFile: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    emojiPickerIsOpen: PropTypes.bool,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    emojiPickerRef: PropTypes.object,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    onSelectEmoji: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    getUsers: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    getCommands: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    textareaRef: PropTypes.object,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    handleSubmit: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    handleChange: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    onSelectItem: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    text: PropTypes.string,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    onPaste: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    openEmojiPicker: PropTypes.func,\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\n    watcher_count: PropTypes.number,\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\n    typing: PropTypes.object,\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\n    multipleUploads: PropTypes.object,\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\n    maxNumberOfFiles: PropTypes.number,\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\n    acceptedFiles: PropTypes.object,\n    /**\n     * Custom UI component for send button.\n     *\n     * Defaults to and accepts same props as: [SendButton](https://getstream.github.io/stream-chat-react/#sendbutton)\n     * */\n    SendButton: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /**\n     * Any additional attrubutes that you may want to add for underlying HTML textarea element.\n     */\n    additionalTextareaProps: PropTypes.object,\n  };\n\n  renderUploads = () => (\n    <>\n      {this.props.imageOrder.length > 0 && (\n        <ImagePreviewer\n          imageUploads={this.props.imageOrder.map(\n            (id) => this.props.imageUploads[id],\n          )}\n          handleRemove={this.props.removeImage}\n          handleRetry={this.props.uploadImage}\n          handleFiles={this.props.uploadNewFiles}\n          multiple={this.props.multipleUploads}\n          disabled={\n            this.props.numberOfUploads >= this.props.maxNumberOfFiles\n              ? true\n              : false\n          }\n        />\n      )}\n      {this.props.fileOrder.length > 0 && (\n        <FilePreviewer\n          uploads={this.props.fileOrder.map((id) => this.props.fileUploads[id])}\n          handleRemove={this.props.removeFile}\n          handleRetry={this.props.uploadFile}\n          handleFiles={this.props.uploadNewFiles}\n        />\n      )}\n    </>\n  );\n\n  renderEmojiPicker = () => {\n    if (this.props.emojiPickerIsOpen) {\n      return (\n        <div\n          className=\"str-chat__input--emojipicker\"\n          ref={this.props.emojiPickerRef}\n        >\n          <Picker\n            native\n            emoji=\"point_up\"\n            title=\"Pick your emoji…\"\n            onSelect={this.props.onSelectEmoji}\n            color=\"#006CFF\"\n            showPreview={false}\n            useButton={true}\n            emojisToShowFilter={filterEmoji}\n          />\n        </div>\n      );\n    }\n  };\n\n  constructTypingString = (dict) => {\n    const { t } = this.props;\n    const arr2 = Object.keys(dict);\n    const arr3 = [];\n    arr2.forEach((item, i) => {\n      if (this.props.client.user.id === dict[arr2[i]].user.id) {\n        return;\n      }\n      arr3.push(dict[arr2[i]].user.name || dict[arr2[i]].user.id);\n    });\n    let outStr = '';\n    if (arr3.length === 1) {\n      outStr = t('{{ user }} is typing...', { user: arr3[0] });\n      dict;\n    } else if (arr3.length === 2) {\n      //joins all with \"and\" but =no commas\n      //example: \"bob and sam\"\n      outStr = t('{{ firstUser }} and {{ secondUser }} are typing...', {\n        firstUser: arr3[0],\n        secondUser: arr3[1],\n      });\n    } else if (arr3.length > 2) {\n      //joins all with commas, but last one gets \", and\" (oxford comma!)\n      //example: \"bob, joe, and sam\"\n      outStr = t('{{ commaSeparatedUsers }} and {{ lastUser }} are typing...', {\n        commaSeparatedUsers: arr3.slice(0, -1).join(', '),\n        lastUser: arr3.slice(-1),\n      });\n    }\n\n    return outStr;\n  };\n\n  render() {\n    const { t } = this.props;\n    const SendButton = this.props.SendButton;\n    return (\n      <div className=\"str-chat__input-large\">\n        <ImageDropzone\n          accept={this.props.acceptedFiles}\n          multiple={this.props.multipleUploads}\n          disabled={\n            this.props.numberOfUploads >= this.props.maxNumberOfFiles\n              ? true\n              : false\n          }\n          handleFiles={this.props.uploadNewFiles}\n        >\n          <div className=\"str-chat__input\">\n            {this.renderUploads()}\n            {this.renderEmojiPicker()}\n            <div className=\"str-chat__input--textarea-wrapper\">\n              <ChatAutoComplete\n                users={this.props.getUsers()}\n                commands={this.props.getCommands()}\n                innerRef={this.props.textareaRef}\n                handleSubmit={(e) => this.props.handleSubmit(e)}\n                onChange={this.props.handleChange}\n                onSelectItem={this.props.onSelectItem}\n                value={this.props.text}\n                rows={1}\n                maxRows={this.props.maxRows}\n                placeholder={t('Type your message')}\n                onPaste={this.props.onPaste}\n                grow={this.props.grow}\n                disabled={this.props.disabled}\n                additionalTextareaProps={this.props.additionalTextareaProps}\n              />\n\n              <span\n                className=\"str-chat__input-emojiselect\"\n                onClick={this.props.openEmojiPicker}\n              >\n                <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <path\n                    d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\"\n                    fillRule=\"evenodd\"\n                  />\n                </svg>\n              </span>\n\n              <FileUploadButton\n                multiple={this.props.multipleUploads}\n                disabled={\n                  this.props.numberOfUploads >= this.props.maxNumberOfFiles\n                    ? true\n                    : false\n                }\n                accepts={this.props.acceptedFiles}\n                handleFiles={this.props.uploadNewFiles}\n              >\n                <span className=\"str-chat__input-fileupload\">\n                  <svg\n                    width=\"14\"\n                    height=\"14\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path\n                      d=\"M7 .5c3.59 0 6.5 2.91 6.5 6.5s-2.91 6.5-6.5 6.5S.5 10.59.5 7 3.41.5 7 .5zm0 12c3.031 0 5.5-2.469 5.5-5.5S10.031 1.5 7 1.5A5.506 5.506 0 0 0 1.5 7c0 3.034 2.469 5.5 5.5 5.5zM7.506 3v3.494H11v1.05H7.506V11h-1.05V7.544H3v-1.05h3.456V3h1.05z\"\n                      fillRule=\"nonzero\"\n                    />\n                  </svg>\n                </span>\n              </FileUploadButton>\n              {SendButton && (\n                <SendButton sendMessage={this.props.handleSubmit} />\n              )}\n            </div>\n          </div>\n          <div>\n            <div className=\"str-chat__input-footer\">\n              <span\n                className={`str-chat__input-footer--count ${\n                  !this.props.watcher_count\n                    ? 'str-chat__input-footer--count--hidden'\n                    : ''\n                }`}\n              >\n                {t('{{ watcherCount }} online', {\n                  watcherCount: this.props.watcher_count,\n                })}\n              </span>\n              <span className=\"str-chat__input-footer--typing\">\n                {this.constructTypingString(this.props.typing)}\n              </span>\n            </div>\n          </div>\n        </ImageDropzone>\n      </div>\n    );\n  }\n}\n\nconst MessageInputLargeWithContext = withTranslationContext(MessageInputLarge);\n\nexport { MessageInputLargeWithContext as MessageInputLarge };\n","import React from 'react';\nexport const SendButton = ({ sendMessage }) => (\n  <button className=\"str-chat__send-button\" onClick={sendMessage}>\n    <svg\n      width=\"18\"\n      height=\"17\"\n      viewBox=\"0 0 18 17\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M0 17.015l17.333-8.508L0 0v6.617l12.417 1.89L0 10.397z\"\n        fillRule=\"evenodd\"\n        fill=\"#006cff\"\n      />\n    </svg>\n  </button>\n);\n","import React, { PureComponent } from 'react';\nimport { withChannelContext } from '../context';\nimport PropTypes from 'prop-types';\nimport { MessageInputLarge } from './MessageInputLarge';\nimport { SendButton } from './SendButton';\nimport Immutable from 'seamless-immutable';\nimport { generateRandomId } from '../utils';\nimport uniq from 'lodash/uniq';\nimport {\n  dataTransferItemsHaveFiles,\n  dataTransferItemsToFiles,\n} from 'react-file-utils';\nimport { logChatPromiseExecution } from 'stream-chat';\n\n// polyfill for IE11 to make MessageInput functional\nif (!Element.prototype.matches) {\n  Element.prototype.matches =\n    Element.prototype.msMatchesSelector ||\n    Element.prototype.webkitMatchesSelector;\n}\n\n/**\n * MessageInput - Input a new message, support for all the rich features such as image uploads, @mentions, emoticons etc.\n * @example ./docs/MessageInput.md\n * @extends PureComponent\n */\nclass MessageInput extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    const imageOrder = [];\n    const imageUploads = {};\n    const fileOrder = [];\n    const fileUploads = {};\n    const attachments = [];\n    const mentioned_users = [];\n    let text = '';\n    if (props.message) {\n      text = props.message.text;\n      for (const attach of props.message.attachments) {\n        if (attach.type === 'image') {\n          const id = generateRandomId();\n          imageOrder.push(id);\n          imageUploads[id] = {\n            id,\n            url: attach.image_url,\n            state: 'finished',\n            file: { name: attach.fallback },\n          };\n        } else if (attach.type === 'file') {\n          const id = generateRandomId();\n          fileOrder.push(id);\n          fileUploads[id] = {\n            id,\n            url: attach.asset_url,\n            state: 'finished',\n            file: {\n              name: attach.title,\n              type: attach.mime_type,\n              size: attach.file_size,\n            },\n          };\n        } else {\n          attachments.push(attach);\n        }\n      }\n      for (const mention of props.message.mentioned_users) {\n        mentioned_users.push(mention.id);\n      }\n    }\n\n    this.state = {\n      text,\n      attachments,\n      imageOrder,\n      imageUploads: Immutable(imageUploads),\n      fileOrder,\n      fileUploads: Immutable(fileUploads),\n      emojiPickerIsOpen: false,\n      filePanelIsOpen: false,\n      mentioned_users,\n      numberOfUploads: 0,\n    };\n\n    this.textareaRef = React.createRef();\n    this.emojiPickerRef = React.createRef();\n    this.panelRef = React.createRef();\n  }\n\n  static propTypes = {\n    /** Set focus to the text input if this is enabled */\n    focus: PropTypes.bool.isRequired,\n    /** Disable input */\n    disabled: PropTypes.bool.isRequired,\n    /** Grow the textarea while you're typing */\n    grow: PropTypes.bool.isRequired,\n    /** Set the maximum number of rows */\n    maxRows: PropTypes.number.isRequired,\n    /** Via Context: the channel that we're sending the message to */\n    channel: PropTypes.object.isRequired,\n    /** Via Context: the users currently typing, passed from the Channel component */\n    typing: PropTypes.object.isRequired,\n\n    // /** Set textarea to be disabled */\n    // disabled: PropTypes.bool,\n\n    /** The parent message object when replying on a thread */\n    parent: PropTypes.object,\n\n    /**\n     * The component handling how the input is rendered\n     *\n     * Available built-in components (also accepts the same props as):\n     *\n     * 1. [MessageInputSmall](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageInputSmall.js)\n     * 2. [MessageInputLarge](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageInputLarge.js) (default)\n     * 3. [MessageInputFlat](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageInputFlat.js)\n     *\n     * */\n    Input: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n\n    /** Override image upload request */\n    doImageUploadRequest: PropTypes.func,\n\n    /** Override file upload request */\n    doFileUploadRequest: PropTypes.func,\n    /**\n     * Custom UI component for send button.\n     *\n     * Defaults to and accepts same props as: [SendButton](https://getstream.github.io/stream-chat-react/#sendbutton)\n     * */\n    SendButton: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /**\n     * Any additional attrubutes that you may want to add for underlying HTML textarea element.\n     * e.g.\n     * <MessageInput\n     *  additionalTextareaProps={{\n     *    maxLength: 10,\n     *  }}\n     * />\n     */\n    additionalTextareaProps: PropTypes.object,\n  };\n\n  static defaultProps = {\n    focus: false,\n    disabled: false,\n    grow: true,\n    maxRows: 10,\n    Input: MessageInputLarge,\n    SendButton,\n    additionalTextareaProps: {},\n  };\n\n  componentDidMount() {\n    if (this.props.focus) {\n      this.textareaRef.current.focus();\n    }\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.closeEmojiPicker, false);\n    document.removeEventListener('click', this.hideFilePanel, false);\n  }\n\n  openEmojiPicker = () => {\n    if (!this.state.showEmojiPicker) {\n      this.setState(\n        () => ({\n          emojiPickerIsOpen: true,\n        }),\n        () => {\n          document.addEventListener('click', this.closeEmojiPicker, false);\n        },\n      );\n    }\n  };\n\n  closeEmojiPicker = (e) => {\n    if (\n      this.emojiPickerRef.current &&\n      !this.emojiPickerRef.current.contains(e.target)\n    ) {\n      this.setState(\n        {\n          emojiPickerIsOpen: false,\n        },\n        () => {\n          document.removeEventListener('click', this.closeEmojiPicker, false);\n        },\n      );\n    }\n  };\n\n  onSelectEmoji = (emoji) => this.insertText(emoji.native);\n\n  insertText = async (textToInsert) => {\n    let newCursorPosition;\n\n    await this.setState((prevState) => {\n      const prevText = prevState.text;\n      const textareaElement = this.textareaRef.current;\n\n      if (!textareaElement) {\n        return { text: prevText + textToInsert };\n      }\n      // Insert emoji at previous cursor position\n      const { selectionStart, selectionEnd } = textareaElement;\n      newCursorPosition = selectionStart + textToInsert.length;\n      return {\n        text:\n          prevText.slice(0, selectionStart) +\n          textToInsert +\n          prevText.slice(selectionEnd),\n      };\n    });\n\n    const textareaElement = this.textareaRef.current;\n    if (!textareaElement || newCursorPosition == null) {\n      return;\n    }\n    // Update cursorPosition\n    textareaElement.selectionStart = newCursorPosition;\n    textareaElement.selectionEnd = newCursorPosition;\n  };\n\n  getCommands = () => this.props.channel.getConfig().commands;\n\n  getUsers = () => {\n    const users = [];\n\n    const members = this.props.channel.state.members;\n    const watchers = this.props.channel.state.watchers;\n\n    if (members && Object.values(members).length) {\n      Object.values(members).forEach((member) => users.push(member.user));\n    }\n\n    if (watchers && Object.values(watchers).length) {\n      users.push(...Object.values(watchers));\n    }\n\n    // make sure we don't list users twice\n    const userMap = {};\n    for (const user of users) {\n      if (user !== undefined && !userMap[user.id]) {\n        userMap[user.id] = user;\n      }\n    }\n    return Object.values(userMap);\n  };\n\n  handleChange = (event) => {\n    event.preventDefault();\n    if (!event || !event.target) {\n      return '';\n    }\n\n    const text = event.target.value;\n    this.setState({ text });\n    if (text) {\n      logChatPromiseExecution(\n        this.props.channel.keystroke(),\n        'start typing event',\n      );\n    }\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    const editing = !!this.props.message;\n    const trimmedMessage = this.state.text.trim();\n    const isEmptyMessage =\n      trimmedMessage === '' ||\n      trimmedMessage === '>' ||\n      trimmedMessage === '``````' ||\n      trimmedMessage === '``' ||\n      trimmedMessage === '**' ||\n      trimmedMessage === '____' ||\n      trimmedMessage === '__' ||\n      trimmedMessage === '****';\n    const hasFiles =\n      this.state.imageOrder.length > 0 || this.state.fileOrder.length > 0;\n    if (isEmptyMessage && !hasFiles) {\n      return;\n    }\n    const text = this.state.text;\n    // the channel component handles the actual sending of the message\n    const attachments = [...this.state.attachments];\n\n    for (const id of this.state.imageOrder) {\n      const image = this.state.imageUploads[id];\n      if (!image || image.state === 'failed') {\n        continue;\n      }\n      if (image.state === 'uploading') {\n        // TODO: show error to user that they should wait until image is uploaded\n        return;\n      }\n      const dupe = attachments.filter(\n        (attach) => image.url === attach.image_url,\n      );\n      if (dupe.length >= 1) continue;\n      attachments.push({\n        type: 'image',\n        image_url: image.url,\n        fallback: image.file.name,\n      });\n    }\n    for (const id of this.state.fileOrder) {\n      const upload = this.state.fileUploads[id];\n      if (!upload || upload.state === 'failed') {\n        continue;\n      }\n      if (upload.state === 'uploading') {\n        // TODO: show error to user that they should wait until image is uploaded\n        return;\n      }\n\n      attachments.push({\n        type: 'file',\n        asset_url: upload.url,\n        title: upload.file.name,\n        mime_type: upload.file.type,\n        file_size: upload.file.size,\n      });\n    }\n\n    if (editing) {\n      const { id } = this.props.message;\n      const updatedMessage = { id };\n      updatedMessage.text = text;\n      updatedMessage.attachments = attachments;\n      updatedMessage.mentioned_users = this.state.mentioned_users;\n      // TODO: Remove this line and show an error when submit fails\n      this.props.clearEditingState();\n\n      const updateMessagePromise = this.props\n        .editMessage(updatedMessage)\n        .then(this.props.clearEditingState);\n\n      logChatPromiseExecution(updateMessagePromise, 'update message');\n    } else if (\n      this.props.overrideSubmitHandler &&\n      typeof this.props.overrideSubmitHandler === 'function'\n    ) {\n      this.props.overrideSubmitHandler(\n        {\n          text,\n          attachments,\n          mentioned_users: uniq(this.state.mentioned_users),\n          parent: this.props.parent,\n        },\n        this.props.channel.cid,\n      );\n      this.setState({\n        text: '',\n        mentioned_users: [],\n        imageUploads: Immutable({}),\n        imageOrder: [],\n        fileUploads: Immutable({}),\n        fileOrder: [],\n      });\n    } else {\n      const sendMessagePromise = this.props.sendMessage({\n        text,\n        attachments,\n        mentioned_users: uniq(this.state.mentioned_users),\n        parent: this.props.parent,\n      });\n      logChatPromiseExecution(sendMessagePromise, 'send message');\n      this.setState({\n        text: '',\n        mentioned_users: [],\n        imageUploads: Immutable({}),\n        imageOrder: [],\n        fileUploads: Immutable({}),\n        fileOrder: [],\n      });\n    }\n\n    logChatPromiseExecution(this.props.channel.stopTyping(), 'stop typing');\n  };\n\n  _uploadNewFiles = (files) => {\n    for (const file of files) {\n      if (file.type.startsWith('image/')) {\n        this._uploadNewImage(file);\n      } else if (file instanceof File && !this.props.noFiles) {\n        this._uploadNewFile(file);\n      } else {\n        return;\n      }\n    }\n  };\n\n  _uploadNewImage = async (file) => {\n    const id = generateRandomId();\n\n    await this.setState((prevState) => ({\n      numberOfUploads: prevState.numberOfUploads + 1,\n      imageOrder: prevState.imageOrder.concat(id),\n      imageUploads: prevState.imageUploads.setIn([id], {\n        id,\n        file,\n        state: 'uploading',\n      }),\n    }));\n    if (FileReader) {\n      // TODO: Possibly use URL.createObjectURL instead. However, then we need\n      // to release the previews when not used anymore though.\n      const reader = new FileReader();\n      reader.onload = (event) => {\n        this.setState((prevState) => ({\n          imageUploads: prevState.imageUploads.setIn(\n            [id, 'previewUri'],\n            event.target.result,\n          ),\n        }));\n      };\n      reader.readAsDataURL(file);\n    }\n    return this._uploadImage(id);\n  };\n\n  _uploadNewFile = async (file) => {\n    const id = generateRandomId();\n\n    await this.setState((prevState) => ({\n      numberOfUploads: prevState.numberOfUploads + 1,\n      fileOrder: prevState.fileOrder.concat(id),\n      fileUploads: prevState.fileUploads.setIn([id], {\n        id,\n        file,\n        state: 'uploading',\n      }),\n    }));\n\n    return this._uploadFile(id);\n  };\n\n  _uploadImage = async (id) => {\n    const img = this.state.imageUploads[id];\n    if (!img) {\n      return;\n    }\n    const { file } = img;\n\n    await this.setState((prevState) => ({\n      imageUploads: prevState.imageUploads.setIn([id, 'state'], 'uploading'),\n    }));\n\n    let response = {};\n    response = {};\n    try {\n      if (this.props.doImageUploadRequest) {\n        response = await this.props.doImageUploadRequest(\n          file,\n          this.props.channel,\n        );\n      } else {\n        response = await this.props.channel.sendImage(file);\n      }\n    } catch (e) {\n      console.warn(e);\n      let alreadyRemoved = false;\n      await this.setState((prevState) => {\n        const image = prevState.imageUploads[id];\n        if (!image) {\n          alreadyRemoved = true;\n          return {\n            numberOfUploads: prevState.numberOfUploads - 1,\n          };\n        }\n        return {\n          imageUploads: prevState.imageUploads.setIn([id, 'state'], 'failed'),\n          numberOfUploads: prevState.numberOfUploads - 1,\n        };\n      });\n\n      if (!alreadyRemoved) {\n        this.props.errorHandler(e, 'upload-image', {\n          feedGroup: this.props.feedGroup,\n          userId: this.props.userId,\n        });\n      }\n      return;\n    }\n    this.setState((prevState) => ({\n      imageUploads: prevState.imageUploads\n        .setIn([id, 'state'], 'finished')\n        .setIn([id, 'url'], response.file),\n    }));\n  };\n\n  _uploadFile = async (id) => {\n    const upload = this.state.fileUploads[id];\n    if (!upload) {\n      return;\n    }\n    const { file } = upload;\n    await this.setState((prevState) => ({\n      imageUploads: prevState.imageUploads.setIn([id, 'state'], 'uploading'),\n    }));\n\n    let response = {};\n    response = {};\n\n    try {\n      if (this.props.doFileUploadRequest) {\n        response = await this.props.doFileUploadRequest(\n          file,\n          this.props.channel,\n        );\n      } else {\n        response = await this.props.channel.sendFile(file);\n      }\n    } catch (e) {\n      console.warn(e);\n      let alreadyRemoved = false;\n      await this.setState((prevState) => {\n        const image = prevState.imageUploads[id];\n        if (!image) {\n          alreadyRemoved = true;\n          return {\n            numberOfUploads: prevState.numberOfUploads - 1,\n          };\n        }\n        return {\n          numberOfUploads: prevState.numberOfUploads - 1,\n          fileUploads: prevState.fileUploads.setIn([id, 'state'], 'failed'),\n        };\n      });\n      if (!alreadyRemoved) {\n        this.props.errorHandler(e, 'upload-file', {\n          feedGroup: this.props.feedGroup,\n          userId: this.props.userId,\n        });\n      }\n    }\n    this.setState((prevState) => ({\n      fileUploads: prevState.fileUploads\n        .setIn([id, 'state'], 'finished')\n        .setIn([id, 'url'], response.file),\n    }));\n  };\n\n  _removeImage = (id) => {\n    // TODO: cancel upload if still uploading\n    this.setState((prevState) => {\n      const img = prevState.imageUploads[id];\n      if (!img) {\n        return {};\n      }\n      return {\n        numberOfUploads: prevState.numberOfUploads - 1,\n        imageUploads: prevState.imageUploads.set(id, undefined), // remove\n        imageOrder: prevState.imageOrder.filter((_id) => id !== _id),\n      };\n    });\n  };\n\n  _removeFile = (id) => {\n    // TODO: cancel upload if still uploading\n    this.setState((prevState) => {\n      const upload = prevState.fileUploads[id];\n      if (!upload) {\n        return {};\n      }\n      return {\n        numberOfUploads: prevState.numberOfUploads - 1,\n        fileUploads: prevState.fileUploads.set(id, undefined), // remove\n        fileOrder: prevState.fileOrder.filter((_id) => id !== _id),\n      };\n    });\n  };\n\n  _onPaste = async (event) => {\n    // TODO: Move this handler to package with ImageDropzone\n    const { items } = event.clipboardData;\n    if (!dataTransferItemsHaveFiles(items)) {\n      return;\n    }\n\n    event.preventDefault();\n    // Get a promise for the plain text in case no files are\n    // found. This needs to be done here because chrome cleans\n    // up the DataTransferItems after resolving of a promise.\n    let plainTextPromise;\n    for (const item of items) {\n      if (item.kind === 'string' && item.type === 'text/plain') {\n        plainTextPromise = new Promise((resolve) => {\n          item.getAsString((s) => {\n            resolve(s);\n          });\n        });\n        break;\n      }\n    }\n\n    const fileLikes = await dataTransferItemsToFiles(items);\n    if (fileLikes.length) {\n      this._uploadNewFiles(fileLikes);\n      return;\n    }\n    // fallback to regular text paste\n    if (plainTextPromise) {\n      const s = await plainTextPromise;\n      this.insertText(s);\n    }\n  };\n\n  _onSelectItem = (item) => {\n    this.setState((prevState) => ({\n      mentioned_users: [...prevState.mentioned_users, item.id],\n    }));\n  };\n\n  render() {\n    const { Input } = this.props;\n    const handlers = {\n      uploadNewFiles: this._uploadNewFiles,\n      removeImage: this._removeImage,\n      uploadImage: this._uploadImage,\n      removeFile: this._removeFile,\n      uploadFile: this._uploadFile,\n      emojiPickerRef: this.emojiPickerRef,\n      panelRef: this.panelRef,\n      textareaRef: this.textareaRef,\n      onSelectEmoji: this.onSelectEmoji,\n      getUsers: this.getUsers,\n      getCommands: this.getCommands,\n      handleSubmit: this.handleSubmit,\n      handleChange: this.handleChange,\n      onPaste: this._onPaste,\n      onSelectItem: this._onSelectItem,\n      openEmojiPicker: this.openEmojiPicker,\n    };\n    return <Input {...this.props} {...this.state} {...handlers} />;\n  }\n}\n\nMessageInput = withChannelContext(MessageInput);\nexport { MessageInput };\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { ChatAutoComplete } from './ChatAutoComplete';\nimport { Picker } from 'emoji-mart';\nimport {\n  ImageDropzone,\n  ImagePreviewer,\n  FilePreviewer,\n  FileUploadButton,\n} from 'react-file-utils';\nimport { withTranslationContext } from '../context';\nimport { filterEmoji } from '../utils';\n\n/**\n * @example ./docs/EditMessageForm.md\n */\nclass EditMessageForm extends React.Component {\n  static propTypes = {\n    /** Set focus to the text input if this is enabled */\n    focus: PropTypes.bool,\n    /** Grow the textarea while you're typing */\n    grow: PropTypes.bool,\n    /** Specify the max amount of rows the textarea is able to grow */\n    maxRows: PropTypes.number.isRequired,\n    /** Disable the textarea */\n    disabled: PropTypes.bool,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    imageOrder: PropTypes.array,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    imageUploads: PropTypes.object,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    removeImage: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    uploadImage: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    uploadNewFiles: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    numberOfUploads: PropTypes.number,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    fileOrder: PropTypes.array,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    fileUploads: PropTypes.object,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    removeFile: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    uploadFile: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    emojiPickerIsOpen: PropTypes.bool,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    emojiPickerRef: PropTypes.object,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    onSelectEmoji: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    getUsers: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    getCommands: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    textareaRef: PropTypes.object,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    handleSubmit: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    handleChange: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    onSelectItem: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    text: PropTypes.string,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    onPaste: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    openEmojiPicker: PropTypes.func,\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\n    watcher_count: PropTypes.number,\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\n    typing: PropTypes.object,\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\n    multipleUploads: PropTypes.object,\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\n    maxNumberOfFiles: PropTypes.number,\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\n    acceptedFiles: PropTypes.object,\n    /**\n     * Any additional attrubutes that you may want to add for underlying HTML textarea element.\n     */\n    additionalTextareaProps: PropTypes.object,\n  };\n\n  static defaultProps = {\n    grow: true,\n    focus: false,\n    disabled: false,\n  };\n\n  renderUploads = () => (\n    <>\n      {this.props.imageOrder.length > 0 && (\n        <ImagePreviewer\n          imageUploads={this.props.imageOrder.map(\n            (id) => this.props.imageUploads[id],\n          )}\n          handleRemove={this.props.removeImage}\n          handleRetry={this.props.uploadImage}\n          handleFiles={this.props.uploadNewFiles}\n          multiple={this.props.multipleUploads}\n          disabled={\n            this.props.numberOfUploads >= this.props.maxNumberOfFiles\n              ? true\n              : false\n          }\n        />\n      )}\n      {this.props.fileOrder.length > 0 && (\n        <FilePreviewer\n          uploads={this.props.fileOrder.map((id) => this.props.fileUploads[id])}\n          handleRemove={this.props.removeFile}\n          handleRetry={this.props.uploadFile}\n          handleFiles={this.props.uploadNewFiles}\n        />\n      )}\n    </>\n  );\n\n  renderEmojiPicker = () => {\n    const { t } = this.props;\n    if (this.props.emojiPickerIsOpen) {\n      return (\n        <div\n          className=\"str-chat__small-message-input-emojipicker\"\n          ref={this.props.emojiPickerRef}\n        >\n          <Picker\n            native\n            emoji=\"point_up\"\n            title={t('Pick your emoji')}\n            onSelect={this.props.onSelectEmoji}\n            color=\"#006CFF\"\n            showPreview={false}\n            emojisToShowFilter={filterEmoji}\n          />\n        </div>\n      );\n    }\n  };\n\n  render() {\n    const { t } = this.props;\n    return (\n      <div className=\"str-chat__edit-message-form\">\n        <ImageDropzone\n          accept={this.props.acceptedFiles}\n          multiple={this.props.multipleUploads}\n          disabled={\n            this.props.numberOfUploads >= this.props.maxNumberOfFiles\n              ? true\n              : false\n          }\n          handleFiles={this.props.uploadNewFiles}\n        >\n          <form onSubmit={this.props.handleSubmit}>\n            {this.renderEmojiPicker()}\n            {this.renderUploads()}\n            {this.props.emojiPickerIsOpen && (\n              <div\n                className=\"str-chat__input--emojipicker\"\n                ref={this.props.emojiPickerRef}\n              >\n                <Picker\n                  native\n                  emoji=\"point_up\"\n                  title={t('Pick your emoji')}\n                  onSelect={this.props.onSelectEmoji}\n                  color=\"#006CFF\"\n                  emojisToShowFilter={filterEmoji}\n                />\n              </div>\n            )}\n            <ChatAutoComplete\n              users={this.props.getUsers()}\n              commands={this.props.getCommands()}\n              innerRef={this.props.textareaRef}\n              handleSubmit={this.props.handleSubmit}\n              onChange={this.props.handleChange}\n              onSelectItem={this.props.onSelectItem}\n              value={this.props.text}\n              rows={1}\n              maxRows={this.props.maxRows}\n              onPaste={this.props.onPaste}\n              grow={this.props.grow}\n              additionalTextareaProps={this.props.additionalTextareaProps}\n            />\n            <div className=\"str-chat__message-team-form-footer\">\n              <div className=\"str-chat__edit-message-form-options\">\n                <span\n                  className=\"str-chat__input-emojiselect\"\n                  onClick={this.props.openEmojiPicker}\n                >\n                  <svg\n                    width=\"14\"\n                    height=\"14\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path\n                      d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\"\n                      fillRule=\"evenodd\"\n                    />\n                  </svg>\n                </span>\n                <FileUploadButton\n                  multiple={this.props.multipleUploads}\n                  disabled={\n                    this.props.numberOfUploads >= this.props.maxNumberOfFiles\n                      ? true\n                      : false\n                  }\n                  accepts={this.props.acceptedFiles}\n                  handleFiles={this.props.uploadNewFiles}\n                >\n                  <span className=\"str-chat__input-fileupload\">\n                    <svg\n                      width=\"14\"\n                      height=\"14\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                    >\n                      <path\n                        d=\"M7 .5c3.59 0 6.5 2.91 6.5 6.5s-2.91 6.5-6.5 6.5S.5 10.59.5 7 3.41.5 7 .5zm0 12c3.031 0 5.5-2.469 5.5-5.5S10.031 1.5 7 1.5A5.506 5.506 0 0 0 1.5 7c0 3.034 2.469 5.5 5.5 5.5zM7.506 3v3.494H11v1.05H7.506V11h-1.05V7.544H3v-1.05h3.456V3h1.05z\"\n                        fillRule=\"nonzero\"\n                      />\n                    </svg>\n                  </span>\n                </FileUploadButton>\n              </div>\n              <div>\n                <button onClick={this.props.clearEditingState}>\n                  {t('Cancel')}\n                </button>\n                <button type=\"submit\">{t('Send')}</button>\n              </div>\n            </div>\n          </form>\n        </ImageDropzone>\n      </div>\n    );\n  }\n}\n\nEditMessageForm = withTranslationContext(EditMessageForm);\nexport { EditMessageForm };\n","import React, { PureComponent } from 'react';\nimport { Attachment } from './Attachment';\nimport { MessageActionsBox } from './MessageActionsBox';\nimport { ReactionsList } from './ReactionsList';\nimport { Avatar } from './Avatar';\nimport { Tooltip } from './Tooltip';\nimport { LoadingIndicator } from './LoadingIndicator';\nimport { Gallery } from './Gallery';\nimport { ReactionSelector } from './ReactionSelector';\nimport { MessageRepliesCountButton } from './MessageRepliesCountButton';\nimport { Modal } from './Modal';\nimport { MessageInput } from './MessageInput';\nimport { EditMessageForm } from './EditMessageForm';\n\nimport PropTypes from 'prop-types';\n\nimport { isOnlyEmojis, renderText, getReadByTooltipText } from '../utils';\nimport { withTranslationContext } from '../context';\n\n/**\n * MessageSimple - Render component, should be used together with the Message component\n *\n * @example ./docs/MessageSimple.md\n * @extends PureComponent\n */\nclass MessageSimple extends PureComponent {\n  static propTypes = {\n    /** The [message object](https://getstream.io/chat/docs/#message_format) */\n    message: PropTypes.object,\n    /**\n     * The attachment UI component.\n     * Default: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\n     * */\n    Attachment: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /**\n     * @deprecated Its not recommended to use this anymore. All the methods in this HOC are provided explicitly.\n     *\n     * The higher order message component, most logic is delegated to this component\n     * @see See [Message HOC](https://getstream.github.io/stream-chat-react/#message) for example\n     *\n     * */\n    Message: PropTypes.oneOfType([\n      PropTypes.node,\n      PropTypes.func,\n      PropTypes.object,\n    ]).isRequired,\n    /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n    unsafeHTML: PropTypes.bool,\n    /** Client object */\n    client: PropTypes.object,\n    /** If its parent message in thread. */\n    initialMessage: PropTypes.bool,\n    /** Channel config object */\n    channelConfig: PropTypes.object,\n    /** If component is in thread list */\n    threadList: PropTypes.bool,\n    /** Function to open thread on current messxage */\n    handleOpenThread: PropTypes.func,\n    /** If the message is in edit state */\n    editing: PropTypes.bool,\n    /** Function to exit edit state */\n    clearEditingState: PropTypes.func,\n    /** Returns true if message belongs to current user */\n    isMyMessage: PropTypes.func,\n    /**\n     * Returns all allowed actions on message by current user e.g., [edit, delete, flag, mute]\n     * Please check [Message](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Message.js) component for default implementation.\n     * */\n    getMessageActions: PropTypes.func,\n    /**\n     * Function to publish updates on message to channel\n     *\n     * @param message Updated [message object](https://getstream.io/chat/docs/#message_format)\n     * */\n    updateMessage: PropTypes.func,\n    /**\n     * Reattempt sending a message\n     * @param message A [message object](https://getstream.io/chat/docs/#message_format) to resent.\n     */\n    handleRetry: PropTypes.func,\n    /**\n     * Add or remove reaction on message\n     *\n     * @param type Type of reaction - 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n     * @param event Dom event which triggered this function\n     */\n    handleReaction: PropTypes.func,\n    /** If actions such as edit, delete, flag, mute are enabled on message */\n    actionsEnabled: PropTypes.bool,\n    /** DOMRect object for parent MessageList component */\n    messageListRect: PropTypes.object,\n    /**\n     * Handler for actions. Actions in combination with attachments can be used to build [commands](https://getstream.io/chat/docs/#channel_commands).\n     *\n     * @param name {string} Name of action\n     * @param value {string} Value of action\n     * @param event Dom event that triggered this handler\n     */\n    handleAction: PropTypes.func,\n    /**\n     * The handler for hover event on @mention in message\n     *\n     * @param event Dom hover event which triggered handler.\n     * @param user Target user object\n     */\n    onMentionsHoverMessage: PropTypes.func,\n    /**\n     * The handler for click event on @mention in message\n     *\n     * @param event Dom click event which triggered handler.\n     * @param user Target user object\n     */\n    onMentionsClickMessage: PropTypes.func,\n    /**\n     * Additional props for underlying MessageInput component.\n     * Available props - https://getstream.github.io/stream-chat-react/#messageinput\n     * */\n    additionalMessageInputProps: PropTypes.object,\n  };\n\n  static defaultProps = {\n    Attachment,\n  };\n\n  state = {\n    isFocused: false,\n    actionsBoxOpen: false,\n    showDetailedReactions: false,\n  };\n\n  messageActionsRef = React.createRef();\n  reactionSelectorRef = React.createRef();\n\n  _onClickOptionsAction = () => {\n    this.setState(\n      {\n        actionsBoxOpen: true,\n      },\n      () => document.addEventListener('click', this.hideOptions, false),\n    );\n  };\n\n  _hideOptions = () => {\n    this.setState({\n      actionsBoxOpen: false,\n    });\n    document.removeEventListener('click', this.hideOptions, false);\n  };\n\n  _clickReactionList = () => {\n    this.setState(\n      () => ({\n        showDetailedReactions: true,\n      }),\n      () => {\n        document.addEventListener('click', this._closeDetailedReactions);\n        document.addEventListener('touchend', this._closeDetailedReactions);\n      },\n    );\n  };\n\n  _closeDetailedReactions = (e) => {\n    if (\n      !this.reactionSelectorRef.current.reactionSelector.current.contains(\n        e.target,\n      )\n    ) {\n      this.setState(\n        () => ({\n          showDetailedReactions: false,\n        }),\n        () => {\n          document.removeEventListener('click', this._closeDetailedReactions);\n          document.removeEventListener(\n            'touchend',\n            this._closeDetailedReactions,\n          );\n        },\n      );\n    } else {\n      return {};\n    }\n  };\n\n  componentWillUnmount() {\n    if (!this.props.message.deleted_at) {\n      document.removeEventListener('click', this._closeDetailedReactions);\n      document.removeEventListener('touchend', this._closeDetailedReactions);\n    }\n  }\n\n  isMine() {\n    return this.props.isMyMessage(this.props.message);\n  }\n\n  renderStatus = () => {\n    const {\n      readBy,\n      client,\n      message,\n      threadList,\n      lastReceivedId,\n      t,\n    } = this.props;\n    if (!this.isMine() || message.type === 'error') {\n      return null;\n    }\n    const justReadByMe =\n      readBy.length === 1 && readBy[0] && readBy[0].id === client.user.id;\n    if (message.status === 'sending') {\n      return (\n        <span className=\"str-chat__message-simple-status\">\n          <Tooltip>{t('Sending...')}</Tooltip>\n          <LoadingIndicator />\n        </span>\n      );\n    } else if (readBy.length !== 0 && !threadList && !justReadByMe) {\n      const lastReadUser = readBy.filter(\n        (item) => item.id !== client.user.id,\n      )[0];\n      return (\n        <span className=\"str-chat__message-simple-status\">\n          <Tooltip>\n            {getReadByTooltipText(readBy, this.props.t, this.props.client)}\n          </Tooltip>\n          <Avatar\n            name={lastReadUser.name || lastReadUser.id}\n            image={lastReadUser.image}\n            size={15}\n          />\n          {readBy.length > 2 && (\n            <span className=\"str-chat__message-simple-status-number\">\n              {readBy.length - 1}\n            </span>\n          )}\n        </span>\n      );\n    } else if (\n      message.status === 'received' &&\n      message.id === lastReceivedId &&\n      !threadList\n    ) {\n      return (\n        <span className=\"str-chat__message-simple-status\">\n          <Tooltip>{t('Delivered')}</Tooltip>\n          <svg width=\"16\" height=\"16\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n              d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm3.72 6.633a.955.955 0 1 0-1.352-1.352L6.986 8.663 5.633 7.31A.956.956 0 1 0 4.28 8.663l2.029 2.028a.956.956 0 0 0 1.353 0l4.058-4.058z\"\n              fill=\"#006CFF\"\n              fillRule=\"evenodd\"\n            />\n          </svg>\n        </span>\n      );\n    } else {\n      return null;\n    }\n  };\n\n  renderMessageActions = () => {\n    const {\n      Message,\n      getMessageActions,\n      messageListRect,\n      handleFlag,\n      handleMute,\n      handleEdit,\n      handleDelete,\n    } = this.props;\n    const messageActions = getMessageActions();\n\n    if (messageActions.length === 0) {\n      return;\n    }\n\n    return (\n      <div\n        onClick={this._onClickOptionsAction}\n        className=\"str-chat__message-simple__actions__action str-chat__message-simple__actions__action--options\"\n      >\n        <MessageActionsBox\n          Message={Message}\n          getMessageActions={getMessageActions}\n          open={this.state.actionsBoxOpen}\n          messageListRect={messageListRect}\n          handleFlag={handleFlag}\n          handleMute={handleMute}\n          handleEdit={handleEdit}\n          handleDelete={handleDelete}\n          mine={this.isMine()}\n        />\n        <svg\n          width=\"11\"\n          height=\"4\"\n          viewBox=\"0 0 11 4\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            d=\"M1.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z\"\n            fillRule=\"nonzero\"\n          />\n        </svg>\n      </div>\n    );\n  };\n  renderOptions() {\n    const {\n      message,\n      initialMessage,\n      channelConfig,\n      threadList,\n      handleOpenThread,\n    } = this.props;\n    if (\n      message.type === 'error' ||\n      message.type === 'system' ||\n      message.type === 'ephemeral' ||\n      message.status === 'failed' ||\n      message.status === 'sending' ||\n      initialMessage\n    ) {\n      return;\n    }\n    if (this.isMine()) {\n      return (\n        <div className=\"str-chat__message-simple__actions\">\n          {this.renderMessageActions()}\n          {!threadList && channelConfig && channelConfig.replies && (\n            <div\n              onClick={handleOpenThread}\n              className=\"str-chat__message-simple__actions__action str-chat__message-simple__actions__action--thread\"\n            >\n              <svg width=\"14\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path\n                  d=\"M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z\"\n                  fillRule=\"evenodd\"\n                />\n              </svg>\n            </div>\n          )}\n          {channelConfig && channelConfig.reactions && (\n            <div\n              className=\"str-chat__message-simple__actions__action str-chat__message-simple__actions__action--reactions\"\n              onClick={this._clickReactionList}\n            >\n              <svg\n                width=\"16\"\n                height=\"14\"\n                viewBox=\"0 0 16 14\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\"\n                  fillRule=\"evenodd\"\n                />\n              </svg>\n            </div>\n          )}\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"str-chat__message-simple__actions\">\n          {channelConfig && channelConfig.reactions && (\n            <div\n              className=\"str-chat__message-simple__actions__action str-chat__message-simple__actions__action--reactions\"\n              onClick={this._clickReactionList}\n            >\n              <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path\n                  d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\"\n                  fillRule=\"evenodd\"\n                />\n              </svg>\n            </div>\n          )}\n          {!threadList && channelConfig && channelConfig.replies && (\n            <div\n              onClick={handleOpenThread}\n              className=\"str-chat__message-simple__actions__action str-chat__message-simple__actions__action--thread\"\n            >\n              <svg width=\"14\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path\n                  d=\"M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z\"\n                  fillRule=\"evenodd\"\n                />\n              </svg>\n            </div>\n          )}\n          {this.renderMessageActions()}\n        </div>\n      );\n    }\n  }\n\n  // eslint-disable-next-line\n  render() {\n    const {\n      message,\n      Attachment,\n      editing,\n      clearEditingState,\n      handleRetry,\n      updateMessage,\n      handleReaction,\n      actionsEnabled,\n      messageListRect,\n      handleAction,\n      onMentionsHoverMessage,\n      onMentionsClickMessage,\n      unsafeHTML,\n      threadList,\n      handleOpenThread,\n      t,\n      tDateTimeParser,\n    } = this.props;\n\n    const when = tDateTimeParser(message.created_at).calendar();\n\n    const messageClasses = this.isMine()\n      ? 'str-chat__message str-chat__message--me str-chat__message-simple str-chat__message-simple--me'\n      : 'str-chat__message str-chat__message-simple';\n\n    const hasAttachment = Boolean(\n      message && message.attachments && message.attachments.length,\n    );\n    const images =\n      hasAttachment &&\n      message.attachments.filter((item) => item.type === 'image');\n    const hasReactions = Boolean(\n      message.latest_reactions && message.latest_reactions.length,\n    );\n\n    if (message.type === 'message.read' || message.type === 'message.date') {\n      return null;\n    }\n\n    if (message.deleted_at) {\n      return (\n        <React.Fragment>\n          <div\n            key={message.id}\n            className={`${messageClasses} str-chat__message--deleted ${message.type} `}\n          >\n            <div className=\"str-chat__message--deleted-inner\">\n              {t('This message was deleted...')}\n            </div>\n          </div>\n        </React.Fragment>\n      );\n    }\n\n    return (\n      <React.Fragment>\n        {editing && (\n          <Modal open={editing} onClose={clearEditingState}>\n            <MessageInput\n              Input={EditMessageForm}\n              message={message}\n              clearEditingState={clearEditingState}\n              updateMessage={updateMessage}\n              {...this.props.additionalMessageInputProps}\n            />\n          </Modal>\n        )}\n        <div\n          key={message.id}\n          className={`\n\t\t\t\t\t\t${messageClasses}\n\t\t\t\t\t\tstr-chat__message--${message.type}\n\t\t\t\t\t\tstr-chat__message--${message.status}\n\t\t\t\t\t\t${message.text ? 'str-chat__message--has-text' : 'has-no-text'}\n\t\t\t\t\t\t${hasAttachment ? 'str-chat__message--has-attachment' : ''}\n\t\t\t\t\t\t${hasReactions ? 'str-chat__message--with-reactions' : ''}\n\t\t\t\t\t`.trim()}\n          onMouseLeave={this._hideOptions}\n          ref={this.messageRef}\n        >\n          {this.renderStatus()}\n\n          <Avatar\n            image={message.user.image}\n            name={message.user.name || message.user.id}\n          />\n          <div\n            className=\"str-chat__message-inner\"\n            onClick={\n              message.status === 'failed'\n                ? handleRetry.bind(this, message)\n                : null\n            }\n          >\n            {!message.text && (\n              <React.Fragment>\n                {this.renderOptions()}\n                {/* if reactions show them */}\n                {hasReactions && !this.state.showDetailedReactions && (\n                  <ReactionsList\n                    reactions={message.latest_reactions}\n                    reaction_counts={message.reaction_counts}\n                    onClick={this._clickReactionList}\n                    reverse={true}\n                  />\n                )}\n                {this.state.showDetailedReactions && (\n                  <ReactionSelector\n                    handleReaction={handleReaction}\n                    detailedView\n                    reaction_counts={message.reaction_counts}\n                    latest_reactions={message.latest_reactions}\n                    messageList={messageListRect}\n                    ref={this.reactionSelectorRef}\n                  />\n                )}\n              </React.Fragment>\n            )}\n\n            <div className=\"str-chat__message-attachment-container\">\n              {hasAttachment &&\n                message.attachments.map((attachment, index) => {\n                  if (attachment.type === 'image' && images.length > 1)\n                    return null;\n\n                  return (\n                    <Attachment\n                      key={`${message.id}-${index}`}\n                      attachment={attachment}\n                      actionHandler={handleAction}\n                    />\n                  );\n                })}\n            </div>\n            {images.length > 1 && <Gallery images={images} />}\n\n            {message.text && (\n              <div className=\"str-chat__message-text\">\n                <div\n                  className={`\n\t\t\t\t\t\t\t\t\tstr-chat__message-text-inner str-chat__message-simple-text-inner\n\t\t\t\t\t\t\t\t\t${this.state.isFocused ? 'str-chat__message-text-inner--focused' : ''}\n\t\t\t\t\t\t\t\t\t${hasAttachment ? 'str-chat__message-text-inner--has-attachment' : ''}\n\t\t\t\t\t\t\t\t\t${\n                    isOnlyEmojis(message.text)\n                      ? 'str-chat__message-simple-text-inner--is-emoji'\n                      : ''\n                  }\n                `.trim()}\n                  onMouseOver={onMentionsHoverMessage}\n                  onClick={onMentionsClickMessage}\n                >\n                  {message.type === 'error' && (\n                    <div className=\"str-chat__simple-message--error-message\">\n                      {t('Error · Unsent')}\n                    </div>\n                  )}\n                  {message.status === 'failed' && (\n                    <div className=\"str-chat__simple-message--error-message\">\n                      {t('Message Failed · Click to try again')}\n                    </div>\n                  )}\n\n                  {unsafeHTML ? (\n                    <div dangerouslySetInnerHTML={{ __html: message.html }} />\n                  ) : (\n                    renderText(message)\n                  )}\n\n                  {/* if reactions show them */}\n                  {hasReactions && !this.state.showDetailedReactions && (\n                    <ReactionsList\n                      reactions={message.latest_reactions}\n                      reaction_counts={message.reaction_counts}\n                      onClick={this._clickReactionList}\n                      reverse={true}\n                    />\n                  )}\n                  {this.state.showDetailedReactions && (\n                    <ReactionSelector\n                      mine={this.isMine()}\n                      handleReaction={handleReaction}\n                      actionsEnabled={actionsEnabled}\n                      detailedView\n                      reaction_counts={message.reaction_counts}\n                      latest_reactions={message.latest_reactions}\n                      messageList={messageListRect}\n                      ref={this.reactionSelectorRef}\n                    />\n                  )}\n                </div>\n\n                {message.text && this.renderOptions()}\n              </div>\n            )}\n            {!threadList && message.reply_count !== 0 && (\n              <div className=\"str-chat__message-simple-reply-button\">\n                <MessageRepliesCountButton\n                  onClick={handleOpenThread}\n                  reply_count={message.reply_count}\n                />\n              </div>\n            )}\n            <div\n              className={`str-chat__message-data str-chat__message-simple-data`}\n            >\n              {!this.isMine() ? (\n                <span className=\"str-chat__message-simple-name\">\n                  {message.user.name || message.user.id}\n                </span>\n              ) : null}\n              <span className=\"str-chat__message-simple-timestamp\">{when}</span>\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nMessageSimple = withTranslationContext(MessageSimple);\nexport { MessageSimple };\n","import React, { PureComponent } from 'react';\nimport {\n  withChatContext,\n  ChannelContext,\n  withTranslationContext,\n} from '../context';\n\nimport { LoadingIndicator } from './LoadingIndicator';\nimport { LoadingErrorIndicator } from './LoadingErrorIndicator';\n\nimport uuidv4 from 'uuid/v4';\nimport PropTypes from 'prop-types';\nimport Immutable from 'seamless-immutable';\nimport Visibility from 'visibilityjs';\nimport { logChatPromiseExecution } from 'stream-chat';\nimport { MessageSimple } from './MessageSimple';\nimport { Attachment } from './Attachment';\nimport debounce from 'lodash/debounce';\nimport throttle from 'lodash/throttle';\n/**\n * Channel - Wrapper component for a channel. It needs to be place inside of the Chat component.\n * ChannelHeader, MessageList, Thread and MessageInput should be used as children of the Channel component.\n *\n * @example ./docs/Channel.md\n * @extends PureComponent\n */\nclass Channel extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = { error: false };\n  }\n  static propTypes = {\n    /** Which channel to connect to, will initialize the channel if it's not initialized yet */\n    channel: PropTypes.shape({\n      watch: PropTypes.func,\n    }),\n    /** Client is passed automatically via the Chat Context */\n    client: PropTypes.object.isRequired,\n    /**\n     * Empty channel UI component. This will be shown on the screen if there is no active channel.\n     *\n     * Defaults to null which skips rendering the Channel\n     *\n     * */\n    EmptyPlaceholder: PropTypes.node,\n    /**\n     * Error indicator UI component. This will be shown on the screen if channel query fails.\n     *\n     * Defaults to and accepts same props as: [LoadingErrorIndicator](https://getstream.github.io/stream-chat-react/#loadingerrorindicator)\n     *\n     * */\n    LoadingErrorIndicator: PropTypes.oneOfType([\n      PropTypes.node,\n      PropTypes.func,\n    ]),\n    /**\n     * Loading indicator UI component. This will be shown on the screen until the messages are\n     * being queried from channelœ. Once the messages are loaded, loading indicator is removed from the screen\n     * and replaced with children of the Channel component.\n     *\n     * Defaults to and accepts same props as: [LoadingIndicator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingIndicator.js)\n     */\n    LoadingIndicator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /**\n     * Message UI component to display a message in message list.\n     *\n     * Available built-in components (also accepts the same props as):\n     *\n     * 1. [MessageSimple](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageSimple.js) (default)\n     * 2. [MessageTeam](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageTeam.js)\n     * 3. [MessageLivestream](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageLivestream.js)\n     * 3. [MessageCommerce](https://github.com/GetStream/stream-chat-react/blob/master/src/components/MessageCommerce.js)\n     *\n     * */\n    Message: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /**\n     * Attachment UI component to display attachment in individual message.\n     *\n     * Defaults to and accepts same props as: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\n     * */\n    Attachment: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /**\n     * Handle for click on @mention in message\n     *\n     * @param {Event} event DOM Click event\n     * @param {User} user   Target [user object](https://getstream.io/chat/docs/#chat-doc-set-user) which is clicked\n     */\n    onMentionsClick: PropTypes.func,\n    /**\n     * Handle for hover on @mention in message\n     *\n     * @param {Event} event DOM hover event\n     * @param {User} user   Target [user object](https://getstream.io/chat/docs/#chat-doc-set-user) which is hovered\n     */\n    onMentionsHover: PropTypes.func,\n    /** Weather to allow multiple attachment uploads */\n    multipleUploads: PropTypes.bool,\n    /** List of accepted file types */\n    acceptedFiles: PropTypes.array,\n    /** Maximum number of attachments allowed per message */\n    maxNumberOfFiles: PropTypes.number,\n    /** Override send message request (Advanced usage only)\n     *\n     * @param {String} channelId full channel ID in format of `type:id`\n     * @param {Object} message\n     */\n    doSendMessageRequest: PropTypes.func,\n    /** Override update(edit) message request (Advanced usage only)\n     *\n     * @param {String} channelId full channel ID in format of `type:id`\n     * @param {Object} updatedMessage\n     */\n    doUpdateMessageRequest: PropTypes.func,\n  };\n\n  static defaultProps = {\n    EmptyPlaceholder: null,\n    LoadingIndicator,\n    LoadingErrorIndicator,\n    Message: MessageSimple,\n    Attachment,\n  };\n\n  render() {\n    if (!this.props.channel || !this.props.channel.cid) {\n      return this.props.EmptyPlaceholder;\n    }\n    // We use a wrapper to make sure the key variable is set.\n    // this ensures that if you switch channel the component is recreated\n    return <ChannelInner {...this.props} key={this.props.channel.cid} />;\n  }\n}\n\nclass ChannelInner extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: false,\n      // Loading the initial content of the channel\n      loading: true,\n      // Loading more messages\n      loadingMore: false,\n      hasMore: true,\n      messages: Immutable([]),\n      online: true,\n      typing: Immutable({}),\n      watchers: Immutable({}),\n      members: Immutable({}),\n      read: Immutable({}),\n      eventHistory: {},\n      thread: false,\n      threadMessages: [],\n      threadLoadingMore: false,\n      threadHasMore: true,\n    };\n\n    // hard limit to prevent you from scrolling faster than 1 page per 2 seconds\n    this._loadMoreFinishedDebounced = debounce(this.loadMoreFinished, 2000, {\n      leading: true,\n      trailing: true,\n    });\n\n    // hard limit to prevent you from scrolling faster than 1 page per 2 seconds\n    this._loadMoreThreadFinishedDebounced = debounce(\n      this.loadMoreThreadFinished,\n      2000,\n      {\n        leading: true,\n        trailing: true,\n      },\n    );\n\n    this._markReadThrottled = throttle(this.markRead, 500, {\n      leading: true,\n      trailing: true,\n    });\n    this._setStateThrottled = throttle(this.setState, 500, {\n      leading: true,\n      trailing: true,\n    });\n  }\n\n  static propTypes = {\n    /** Which channel to connect to */\n    channel: PropTypes.shape({\n      watch: PropTypes.func,\n    }).isRequired,\n    /** Client is passed via the Chat Context */\n    client: PropTypes.object.isRequired,\n    /** The loading indicator to use */\n    LoadingIndicator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    LoadingErrorIndicator: PropTypes.oneOfType([\n      PropTypes.node,\n      PropTypes.func,\n    ]),\n  };\n\n  async componentDidMount() {\n    const channel = this.props.channel;\n    let errored = false;\n    if (!channel.initialized) {\n      try {\n        await channel.watch();\n      } catch (e) {\n        this.setState({ error: e });\n        errored = true;\n      }\n    }\n    this.originalTitle = document.title;\n    this.lastRead = new Date();\n    if (!errored) {\n      this.copyChannelState();\n      this.listenToChanges();\n    }\n  }\n\n  componentDidUpdate() {\n    // If there is an active thread, then in that case we should sync\n    // it with updated state of channel.\n    if (this.state.thread) {\n      for (let i = this.state.messages.length - 1; i >= 0; i--) {\n        if (this.state.messages[i].id === this.state.thread.id) {\n          this.setState({\n            thread: this.state.messages[i],\n          });\n          break;\n        }\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.client.off('connection.recovered', this.handleEvent);\n    this.props.channel.off(this.handleEvent);\n    this._loadMoreFinishedDebounced.cancel();\n    this._loadMoreThreadFinishedDebounced.cancel();\n\n    if (this.visibilityListener || this.visibilityListener === 0) {\n      Visibility.unbind(this.visibilityListener);\n    }\n  }\n\n  openThread = (message, e) => {\n    if (e && e.preventDefault) {\n      e.preventDefault();\n    }\n\n    const channel = this.props.channel;\n    const threadMessages = channel.state.threads[message.id] || [];\n\n    this.setState({\n      thread: message,\n      threadMessages,\n    });\n  };\n\n  loadMoreThread = async () => {\n    // prevent duplicate loading events...\n    if (this.state.threadLoadingMore) return;\n    this.setState({\n      threadLoadingMore: true,\n    });\n    const channel = this.props.channel;\n    const parentID = this.state.thread.id;\n    const oldMessages = channel.state.threads[parentID] || [];\n    const oldestMessageID = oldMessages[0] ? oldMessages[0].id : null;\n    const limit = 50;\n    const queryResponse = await channel.getReplies(parentID, {\n      limit,\n      id_lt: oldestMessageID,\n    });\n\n    const hasMore = queryResponse.messages.length === limit;\n\n    const threadMessages = channel.state.threads[parentID] || [];\n\n    // next set loadingMore to false so we can start asking for more data...\n    this._loadMoreThreadFinishedDebounced(hasMore, threadMessages);\n  };\n\n  loadMoreThreadFinished = (threadHasMore, threadMessages) => {\n    this.setState({\n      threadLoadingMore: false,\n      threadHasMore,\n      threadMessages,\n    });\n  };\n\n  closeThread = (e) => {\n    if (e && e.preventDefault) {\n      e.preventDefault();\n    }\n\n    this.setState({\n      thread: null,\n      threadMessages: [],\n    });\n  };\n\n  copyChannelState() {\n    const channel = this.props.channel;\n\n    this.setState({\n      messages: channel.state.messages,\n      read: channel.state.read,\n      watchers: channel.state.watchers,\n      members: channel.state.members,\n      watcher_count: channel.state.watcher_count,\n      loading: false,\n      typing: Immutable({}),\n    });\n\n    if (channel.countUnread() > 0) channel.markRead();\n  }\n\n  updateMessage = (updatedMessage, extraState) => {\n    const channel = this.props.channel;\n\n    extraState = extraState || {};\n\n    // adds the message to the local channel state..\n    // this adds to both the main channel state as well as any reply threads\n    channel.state.addMessageSorted(updatedMessage);\n\n    // update the Channel component state\n    if (this.state.thread && updatedMessage.parent_id) {\n      extraState.threadMessages =\n        channel.state.threads[updatedMessage.parent_id] || [];\n    }\n    this.setState({ messages: channel.state.messages, ...extraState });\n  };\n\n  removeMessage = (message) => {\n    const channel = this.props.channel;\n    channel.state.removeMessage(message);\n    const threadMessages = channel.state.threads[message.parent_id] || [];\n    this.setState({\n      messages: channel.state.messages,\n      threads: channel.state.threads,\n      threadMessages,\n    });\n  };\n\n  removeEphemeralMessages() {\n    const c = this.props.channel;\n    c.state.selectRegularMessages();\n    this.setState({ messages: c.state.messages });\n  }\n\n  createMessagePreview = (text, attachments, parent, mentioned_users) => {\n    // create a preview of the message\n    const clientSideID = `${this.props.client.userID}-` + uuidv4();\n    const message = {\n      text,\n      html: text,\n      __html: text,\n      //id: tmpID,\n      id: clientSideID,\n      type: 'regular',\n      status: 'sending',\n      user: {\n        id: this.props.client.userID,\n        ...this.props.client.user,\n      },\n      created_at: new Date(),\n      attachments,\n      mentioned_users,\n      reactions: [],\n    };\n\n    if (parent && parent.id) {\n      message.parent_id = parent.id;\n    }\n    return message;\n  };\n\n  editMessage = (updatedMessage) => {\n    if (this.props.doUpdateMessageRequest) {\n      return Promise.resolve(\n        this.props.doUpdateMessageRequest(\n          this.props.channel.cid,\n          updatedMessage,\n        ),\n      );\n    }\n\n    return this.props.client.updateMessage(updatedMessage);\n  };\n\n  _sendMessage = async (message) => {\n    const { text, attachments, id, parent_id, mentioned_users } = message;\n    const messageData = {\n      text,\n      attachments,\n      mentioned_users,\n      id,\n      parent_id,\n    };\n\n    try {\n      let messageResponse;\n      if (this.props.doSendMessageRequest) {\n        messageResponse = await this.props.doSendMessageRequest(\n          this.props.channel.cid,\n          messageData,\n        );\n      } else {\n        messageResponse = await this.props.channel.sendMessage(messageData);\n      }\n\n      // replace it after send is completed\n      if (messageResponse.message) {\n        messageResponse.message.status = 'received';\n        this.updateMessage(messageResponse.message);\n      }\n    } catch (error) {\n      // set the message to failed..\n      message.status = 'failed';\n      this.updateMessage(message);\n    }\n  };\n\n  sendMessage = async ({\n    text,\n    attachments = [],\n    mentioned_users = [],\n    parent,\n  }) => {\n    // remove error messages upon submit\n    this.props.channel.state.filterErrorMessages();\n\n    // create a local preview message to show in the UI\n    const messagePreview = this.createMessagePreview(\n      text,\n      attachments,\n      parent,\n      mentioned_users,\n    );\n\n    // first we add the message to the UI\n    this.updateMessage(messagePreview, {\n      messageInput: '',\n      commands: [],\n      userAutocomplete: [],\n    });\n\n    await this._sendMessage(messagePreview);\n  };\n\n  retrySendMessage = async (message) => {\n    // set the message status to sending\n    message = message.asMutable();\n    message.status = 'sending';\n    this.updateMessage(message);\n    // actually try to send the message...\n    await this._sendMessage(message);\n  };\n\n  handleEvent = (e) => {\n    const { channel } = this.props;\n    let threadMessages = [];\n    const threadState = {};\n    if (this.state.thread) {\n      threadMessages = channel.state.threads[this.state.thread.id] || [];\n      threadState['threadMessages'] = threadMessages;\n    }\n\n    if (\n      this.state.thread &&\n      e.message &&\n      e.message.id === this.state.thread.id\n    ) {\n      threadState['thread'] = channel.state.messageToImmutable(e.message);\n    }\n\n    if (Object.keys(threadState).length > 0) {\n      // TODO: in theory we should do 1 setState call not 2,\n      // However the setStateThrottled doesn't support this\n      this.setState(threadState);\n    }\n\n    if (e.type === 'message.new') {\n      let mainChannelUpdated = true;\n      if (e.message.parent_id && !e.message.show_in_channel) {\n        mainChannelUpdated = false;\n      }\n\n      if (\n        mainChannelUpdated &&\n        e.message.user.id !== this.props.client.userID\n      ) {\n        if (Visibility.state() === 'visible') {\n          this._markReadThrottled(channel);\n        } else {\n          const unread = channel.countUnread(this.lastRead);\n          document.title = `(${unread}) ${this.originalTitle}`;\n        }\n      }\n    }\n\n    if (e.type === 'member.added') {\n      this.addToEventHistory(e);\n    }\n\n    if (e.type === 'member.removed') {\n      this.addToEventHistory(e);\n    }\n\n    this._setStateThrottled({\n      messages: channel.state.messages,\n      watchers: channel.state.watchers,\n      read: channel.state.read,\n      typing: channel.state.typing,\n      watcher_count: channel.state.watcher_count,\n    });\n  };\n\n  addToEventHistory = (e) => {\n    this.setState((prevState) => {\n      if (!prevState.message || !prevState.message.length) {\n        return;\n      }\n      const lastMessageId =\n        prevState.messages[prevState.messages.length - 1].id;\n      if (!prevState.eventHistory[lastMessageId])\n        return {\n          ...prevState,\n          eventHistory: {\n            ...prevState.eventHistory,\n            [lastMessageId]: [e],\n          },\n        };\n\n      return {\n        ...prevState,\n        eventHistory: {\n          ...prevState.eventHistory,\n          [lastMessageId]: [...prevState.eventHistory[lastMessageId], e],\n        },\n      };\n    });\n  };\n\n  markRead = (channel) => {\n    if (this.props.channel.disconnected || !channel.getConfig().read_events) {\n      return;\n    }\n    this.lastRead = new Date();\n\n    logChatPromiseExecution(channel.markRead(), 'mark read');\n\n    if (this.originalTitle) {\n      document.title = this.originalTitle;\n    }\n  };\n\n  listenToChanges() {\n    // The more complex sync logic is done in chat.js\n    // listen to client.connection.recovered and all channel events\n    this.props.client.on('connection.recovered', this.handleEvent);\n    const channel = this.props.channel;\n    channel.on(this.handleEvent);\n    this.boundMarkRead = this.markRead.bind(this, channel);\n    this.visibilityListener = Visibility.change((e, state) => {\n      if (state === 'visible') {\n        this.boundMarkRead();\n      }\n    });\n  }\n\n  loadMore = async (limit = 100) => {\n    // prevent duplicate loading events...\n    if (this.state.loadingMore) return;\n    this.setState({ loadingMore: true });\n\n    const oldestMessage = this.state.messages[0];\n\n    if (oldestMessage && oldestMessage.status !== 'received') {\n      this.setState({\n        loadingMore: false,\n      });\n\n      return;\n    }\n\n    const oldestID = oldestMessage ? oldestMessage.id : null;\n\n    const perPage = limit;\n    let queryResponse;\n    try {\n      queryResponse = await this.props.channel.query({\n        messages: { limit: perPage, id_lt: oldestID },\n      });\n    } catch (e) {\n      console.warn('message pagination request failed with error', e);\n      this.setState({ loadingMore: false });\n      return;\n    }\n    const hasMore = queryResponse.messages.length === perPage;\n\n    this._loadMoreFinishedDebounced(hasMore, this.props.channel.state.messages);\n  };\n\n  _onMentionsHoverOrClick = (e, mentioned_users) => {\n    if (!this.props.onMentionsHover && !this.props.onMentionsClick) return;\n\n    const tagName = e.target.tagName.toLowerCase();\n    const textContent = e.target.innerHTML.replace('*', '');\n    if (tagName === 'strong' && textContent[0] === '@') {\n      const userName = textContent.replace('@', '');\n      const user = mentioned_users.find(\n        (user) => user.name === userName || user.id === userName,\n      );\n      if (\n        this.props.onMentionsHover &&\n        typeof this.props.onMentionsHover === 'function' &&\n        e.type === 'mouseover'\n      ) {\n        this.props.onMentionsHover(e, user);\n      }\n      if (\n        this.props.onMentionsClick &&\n        e.type === 'click' &&\n        typeof this.props.onMentionsClick === 'function'\n      ) {\n        this.props.onMentionsClick(e, user);\n      }\n    }\n  };\n\n  loadMoreFinished = (hasMore, messages) => {\n    this.setState({\n      loadingMore: false,\n      hasMore,\n      messages,\n    });\n  };\n\n  getContext = () => ({\n    ...this.state,\n    client: this.props.client,\n    channel: this.props.channel,\n    Message: this.props.Message,\n    Attachment: this.props.Attachment,\n    multipleUploads: this.props.multipleUploads,\n    acceptedFiles: this.props.acceptedFiles,\n    maxNumberOfFiles: this.props.maxNumberOfFiles,\n    updateMessage: this.updateMessage,\n    removeMessage: this.removeMessage,\n    sendMessage: this.sendMessage,\n    editMessage: this.editMessage,\n    retrySendMessage: this.retrySendMessage,\n    loadMore: this.loadMore,\n\n    // thread related\n    openThread: this.openThread,\n    closeThread: this.closeThread,\n    loadMoreThread: this.loadMoreThread,\n    onMentionsClick: this._onMentionsHoverOrClick,\n    onMentionsHover: this._onMentionsHoverOrClick,\n  });\n\n  renderComponent = () => this.props.children;\n\n  render() {\n    const { t } = this.props;\n\n    let core;\n    const LoadingIndicator = this.props.LoadingIndicator;\n    const LoadingErrorIndicator = this.props.LoadingErrorIndicator;\n\n    if (this.state.error) {\n      core = (\n        <LoadingErrorIndicator error={this.state.error}></LoadingErrorIndicator>\n      );\n    } else if (this.state.loading) {\n      core = <LoadingIndicator size={25} isLoading={true} />;\n    } else if (!this.props.channel || !this.props.channel.watch) {\n      core = <div>{t('Channel Missing')}</div>;\n    } else {\n      core = (\n        <ChannelContext.Provider value={this.getContext()}>\n          <div className=\"str-chat__container\">{this.renderComponent()}</div>\n        </ChannelContext.Provider>\n      );\n    }\n\n    return (\n      <div className={`str-chat str-chat-channel ${this.props.theme}`}>\n        {core}\n      </div>\n    );\n  }\n}\n\nChannel = withChatContext(withTranslationContext(Channel));\n\nexport { Channel };\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { Avatar } from './Avatar';\nimport {\n  withChatContext,\n  withChannelContext,\n  withTranslationContext,\n} from '../context';\n\n/**\n * ChannelHeader - Render some basic information about this channel\n *\n * @example ./docs/ChannelHeader.md\n * @extends PureComponent\n */\nclass ChannelHeader extends PureComponent {\n  static propTypes = {\n    /** Set title manually */\n    title: PropTypes.string,\n    /** Show a little indicator that the channel is live right now */\n    live: PropTypes.bool,\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#chat)** */\n    channel: PropTypes.object.isRequired,\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#chat)** */\n    watcher_count: PropTypes.number,\n  };\n\n  render() {\n    const {\n      t,\n      channel,\n      title,\n      live,\n      watcher_count,\n      MemberList = ({ children }) => <>{children}</>,\n    } = this.props;\n\n    return (\n      <div className=\"str-chat__header-livestream\">\n        <div\n          className=\"str-chat__header-hamburger\"\n          onClick={this.props.openMobileNav}\n        >\n          <span className=\"str-chat__header-hamburger--line\"></span>\n          <span className=\"str-chat__header-hamburger--line\"></span>\n          <span className=\"str-chat__header-hamburger--line\"></span>\n        </div>\n        {channel.data.image && (\n          <Avatar\n            image={channel.data.image}\n            shape=\"rounded\"\n            size={channel.type === 'commerce' ? 60 : 40}\n          />\n        )}\n        <div className=\"str-chat__header-livestream-left\">\n          <p className=\"str-chat__header-livestream-left--title\">\n            {title || channel.data.name}{' '}\n            {live && (\n              <span className=\"str-chat__header-livestream-left--livelabel\">\n                {t('live')}\n              </span>\n            )}\n          </p>\n          {channel.data.subtitle && (\n            <p className=\"str-chat__header-livestream-left--subtitle\">\n              {channel.data.subtitle}\n            </p>\n          )}\n          <p className=\"str-chat__header-livestream-left--members\">\n            <MemberList>\n              {!live && channel.data.member_count > 0 && (\n                <>\n                  {t('{{ memberCount }} members', {\n                    memberCount: channel.data.member_count,\n                  })}\n                  ,{' '}\n                </>\n              )}\n              {t('{{ watcherCount }} online', { watcherCount: watcher_count })}\n            </MemberList>\n          </p>\n        </div>\n      </div>\n    );\n  }\n}\n\nChannelHeader = withChatContext(ChannelHeader);\nChannelHeader = withChannelContext(withTranslationContext(ChannelHeader));\nexport { ChannelHeader };\n","import React, { PureComponent } from 'react';\nimport { Avatar } from './Avatar';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport truncate from 'lodash/truncate';\nimport { withTranslationContext } from '../context';\n\n/**\n * Used as preview component for channel item in [ChannelList](#channellist) component.\n *\n * @example ./docs/ChannelPreviewLastMessage.md\n * @extends PureComponent\n */\n\nclass ChannelPreviewLastMessage extends PureComponent {\n  static propTypes = {\n    /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\n    channel: PropTypes.object.isRequired,\n    /** Current selected channel object */\n    activeChannel: PropTypes.object,\n    /** Setter for selected channel */\n    setActiveChannel: PropTypes.func.isRequired,\n    /**\n     * Object containing watcher parameters\n     * @see See [Pagination documentation](https://getstream.io/chat/docs/#channel_pagination) for a list of available fields for sort.\n     * */\n    watchers: PropTypes.object,\n    /** Number of unread messages */\n    unread: PropTypes.number,\n    /** If channel of component is active (selected) channel */\n    active: PropTypes.bool,\n    /** Latest message's text. */\n    latestMessage: PropTypes.string,\n    /** Length of latest message to truncate at */\n    latestMessageLength: PropTypes.number,\n    /** Title of channel to display */\n    displayTitle: PropTypes.string,\n    /** Image of channel to display */\n    displayImage: PropTypes.string,\n  };\n\n  static defaultProps = {\n    latestMessageLength: 20,\n  };\n\n  channelPreviewButton = React.createRef();\n\n  onSelectChannel = () => {\n    this.props.setActiveChannel(this.props.channel, this.props.watchers);\n    this.channelPreviewButton.current.blur();\n  };\n\n  render() {\n    const { t, displayTitle, displayImage, channel } = this.props;\n\n    const unreadClass =\n      this.props.unread >= 1 ? 'str-chat__channel-preview--unread' : '';\n    const activeClass = this.props.active\n      ? 'str-chat__channel-preview--active'\n      : '';\n\n    const isDm = channel.data.member_count === 2;\n    const lastUpdatedAt = moment(channel.data.last_message_at);\n\n    return (\n      <div\n        className={`str-chat__channel-preview ${unreadClass} ${activeClass} ${\n          isDm\n            ? 'str-chat__channel-preview--dm'\n            : 'str-chat__channel-preview--group'\n        }`}\n      >\n        <button onClick={this.onSelectChannel} ref={this.channelPreviewButton}>\n          {this.props.unread >= 1 && (\n            <div className=\"str-chat__channel-preview--dot\" />\n          )}\n          <div className=\"str-chat--channel-summary\">\n            {isDm && <Avatar image={displayImage} />}\n\n            <div className=\"str-chat__channel-preview-info\">\n              <span className=\"str-chat__channel-preview-title\">\n                {displayTitle}\n              </span>\n              <span className=\"str-chat__channel-preview-last-message\">\n                {!this.props.channel.state.messages[0]\n                  ? t('Nothing yet...')\n                  : truncate(this.props.latestMessage, {\n                      length: this.props.latestMessageLength,\n                    })}\n              </span>\n              {this.props.unread >= 1 && (\n                <span className=\"str-chat__channel-preview-unread-count\">\n                  {this.props.unread}\n                </span>\n              )}\n            </div>\n          </div>\n\n          {!isDm && (\n            <div className=\"str-chat--channel-status\">\n              <span>{channel.data.member_count} members</span>\n            </div>\n          )}\n\n          <div className=\"str-chat--channel-last-update\">\n            {moment().diff(lastUpdatedAt, 'days') > 0\n              ? lastUpdatedAt.format('M/D/YY')\n              : lastUpdatedAt.fromNow()}\n          </div>\n        </button>\n      </div>\n    );\n  }\n}\n\nChannelPreviewLastMessage = withTranslationContext(ChannelPreviewLastMessage);\nexport { ChannelPreviewLastMessage };\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nexport class ChannelPreviewCountOnly extends PureComponent {\n  static propTypes = {\n    /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\n    channel: PropTypes.object.isRequired,\n    /** Current selected channel object */\n    activeChannel: PropTypes.object,\n    /** @see See [chat context](https://getstream.github.io/stream-chat-react/#chat) for doc */\n    setActiveChannel: PropTypes.func.isRequired,\n    /**\n     * Object containing watcher parameters\n     * @see See [Pagination documentation](https://getstream.io/chat/docs/#channel_pagination) for a list of available fields for sort.\n     * */\n    watchers: PropTypes.object,\n    /** Number of unread messages */\n    unread: PropTypes.number,\n    /** Title of channel to display */\n    displayTitle: PropTypes.string,\n    /** Image of channel to display */\n    displayImage: PropTypes.string,\n  };\n\n  render() {\n    const { displayTitle } = this.props;\n    const unreadClass = this.props.unread >= 1 ? 'unread' : '';\n\n    return (\n      <div className={unreadClass}>\n        <button\n          onClick={this.props.setActiveChannel.bind(this, this.props.channel)}\n        >\n          {' '}\n          {displayTitle} <span>{this.props.unread}</span>\n        </button>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { ChannelPreviewCountOnly } from './ChannelPreviewCountOnly';\nimport { withTranslationContext, withChatContext } from '../context';\n\nclass ChannelPreview extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      lastMessage: {},\n      unread: 0,\n      lastRead: new Date(),\n    };\n  }\n\n  static propTypes = {\n    /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\n    channel: PropTypes.object.isRequired,\n    /** Current selected channel object */\n    activeChannel: PropTypes.object,\n    /** Setter for selected channel */\n    setActiveChannel: PropTypes.func.isRequired,\n    /**\n     * Available built-in options (also accepts the same props as):\n     *\n     * 1. [ChannelPreviewCompact](https://getstream.github.io/stream-chat-react/#ChannelPreviewCompact) (default)\n     * 2. [ChannelPreviewLastMessage](https://getstream.github.io/stream-chat-react/#ChannelPreviewLastMessage)\n     * 3. [ChannelPreviewMessanger](https://getstream.github.io/stream-chat-react/#ChannelPreviewMessanger)\n     *\n     * The Preview to use, defaults to ChannelPreviewLastMessage\n     * */\n    Preview: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /**\n     * Object containing watcher parameters\n     * @see See [Pagination documentation](https://getstream.io/chat/docs/#channel_pagination) for a list of available fields for sort.\n     * */\n    watchers: PropTypes.object,\n  };\n\n  static defaultProps = {\n    Preview: ChannelPreviewCountOnly,\n  };\n\n  componentDidMount() {\n    // listen to change...\n    const channel = this.props.channel;\n    const unread = channel.countUnread();\n\n    this.setState({ unread });\n    channel.on('message.new', this.handleEvent);\n    channel.on('message.updated', this.handleEvent);\n    channel.on('message.deleted', this.handleEvent);\n  }\n\n  componentWillUnmount() {\n    const channel = this.props.channel;\n    channel.off('message.new', this.handleEvent);\n    channel.off('message.updated', this.handleEvent);\n    channel.off('message.deleted', this.handleEvent);\n  }\n\n  handleEvent = (event) => {\n    const channel = this.props.channel;\n    const isActive =\n      this.props.activeChannel && this.props.activeChannel.cid === channel.cid;\n    if (!isActive) {\n      const unread = channel.countUnread(this.state.lastRead);\n      this.setState({ lastMessage: event.message, unread });\n    } else {\n      this.setState({ lastMessage: event.message, unread: 0 });\n    }\n  };\n\n  componentDidUpdate(prevProps) {\n    if (\n      this.props.activeChannel &&\n      prevProps.activeChannel &&\n      this.props.activeChannel.cid !== prevProps.activeChannel.cid\n    ) {\n      const isActive = this.props.activeChannel.cid === this.props.channel.cid;\n      if (isActive) {\n        this.setState({ unread: 0, lastRead: new Date() });\n      }\n    }\n  }\n\n  getLatestMessage = () => {\n    const { channel, t } = this.props;\n\n    const latestMessage =\n      channel.state.messages[channel.state.messages.length - 1];\n\n    if (!latestMessage) {\n      return t('Nothing yet...');\n    }\n    if (latestMessage.deleted_at) {\n      return t('Message deleted');\n    }\n    if (latestMessage.text) {\n      return latestMessage.text;\n    } else {\n      if (latestMessage.command) {\n        return '/' + latestMessage.command;\n      }\n      if (latestMessage.attachments.length) {\n        return t('🏙 Attachment...');\n      }\n      return t('Empty message...');\n    }\n  };\n\n  getDisplayTitle = () => {\n    const { channel, client } = this.props;\n    let title = channel.data.name;\n    const members = Object.values(channel.state.members);\n\n    if (!title && members.length === 2) {\n      const otherMember = members.find((m) => m.user.id !== client.user.id);\n      title = otherMember.user.name;\n    }\n\n    return title;\n  };\n\n  getDisplayImage = () => {\n    const { channel, client } = this.props;\n    let image = channel.data.image;\n    const members = Object.values(channel.state.members);\n\n    if (!image && members.length === 2) {\n      const otherMember = members.find((m) => m.user.id !== client.user.id);\n      image = otherMember.user.image;\n    }\n\n    return image;\n  };\n\n  render() {\n    const props = { ...this.state, ...this.props };\n\n    const { Preview } = this.props;\n    return (\n      <Preview\n        {...props}\n        latestMessage={this.getLatestMessage()}\n        displayTitle={this.getDisplayTitle()}\n        displayImage={this.getDisplayImage()}\n        active={\n          this.props.activeChannel &&\n          this.props.activeChannel.cid === this.props.channel.cid\n        }\n      />\n    );\n  }\n}\n\nChannelPreview = withTranslationContext(withChatContext(ChannelPreview));\n\nexport { ChannelPreview };\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslationContext } from '../context';\n\nexport const EmptyStateIndicator = withTranslationContext(({ listType }) => {\n  let Indicator;\n  switch (listType) {\n    case 'channel':\n      // Indicator = <p>{t('You have no channels currently')}</p>;\n      Indicator = null;\n      break;\n    case 'message':\n      Indicator = null;\n      break;\n    default:\n      Indicator = <p>No items exist</p>;\n      break;\n  }\n\n  return Indicator;\n});\n\nEmptyStateIndicator.propTypes = {\n  /** channel | message */\n  listType: PropTypes.string,\n};\n","import React from 'react';\n\n/**\n * LoadingChannels - Fancy loading indicator for the channel list\n *\n * @example ./docs/LoadingChannels.md\n */\nexport const LoadingChannels = () => (\n  <div className=\"str-chat__loading-channels\">\n    <div className=\"str-chat__loading-channels-item\">\n      <div className=\"str-chat__loading-channels-avatar\" />\n      <div className=\"str-chat__loading-channels-meta\">\n        <div className=\"str-chat__loading-channels-username\" />\n        <div className=\"str-chat__loading-channels-status\" />\n      </div>\n    </div>\n    <div className=\"str-chat__loading-channels-item\">\n      <div className=\"str-chat__loading-channels-avatar\" />\n      <div className=\"str-chat__loading-channels-meta\">\n        <div className=\"str-chat__loading-channels-username\" />\n        <div className=\"str-chat__loading-channels-status\" />\n      </div>\n    </div>\n    <div className=\"str-chat__loading-channels-item\">\n      <div className=\"str-chat__loading-channels-avatar\" />\n      <div className=\"str-chat__loading-channels-meta\">\n        <div className=\"str-chat__loading-channels-username\" />\n        <div className=\"str-chat__loading-channels-status\" />\n      </div>\n    </div>\n  </div>\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { LoadingIndicator } from 'react-file-utils';\n\nexport class LoadMoreButton extends React.PureComponent {\n  static propTypes = {\n    /** onClick handler load more button. Pagination logic should be executed in this handler. */\n    onClick: PropTypes.func,\n    /** If true, LoadingIndicator is displayed instead of button */\n    refreshing: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    children: 'Load more',\n  };\n\n  render() {\n    return (\n      <div className=\"str-chat__load-more-button\">\n        <button\n          className=\"str-chat__load-more-button__button\"\n          onClick={this.props.onClick}\n          disabled={this.props.refreshing}\n        >\n          {this.props.refreshing ? <LoadingIndicator /> : this.props.children}\n        </button>\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\nimport { LoadMoreButton } from './LoadMoreButton';\nimport PropTypes from 'prop-types';\nimport { smartRender } from '../utils';\n\nexport class LoadMorePaginator extends React.PureComponent {\n  static propTypes = {\n    LoadMoreButton: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /** callback to load the next page */\n    loadNextPage: PropTypes.func,\n    /** indicates if there is a next page to load */\n    hasNextPage: PropTypes.bool,\n    /** display the items in opposite order */\n    reverse: PropTypes.bool,\n  };\n  static defaultProps = {\n    LoadMoreButton,\n  };\n  render() {\n    return (\n      <React.Fragment>\n        {!this.props.reverse && this.props.children}\n        {this.props.hasNextPage\n          ? smartRender(this.props.LoadMoreButton, {\n              refreshing: this.props.refreshing,\n              onClick: this.props.loadNextPage,\n            })\n          : null}\n        {this.props.reverse && this.props.children}\n      </React.Fragment>\n    );\n  }\n}\n","export default \"data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%3Csvg%20width%3D%2278px%22%20height%3D%2278px%22%20viewBox%3D%220%200%2078%2078%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%20%20%20%20%20%20%20%20%3Ctitle%3ECombined%20Shape%3C%2Ftitle%3E%20%20%20%20%3Cdesc%3ECreated%20with%20Sketch.%3C%2Fdesc%3E%20%20%20%20%3Cg%20id%3D%22Interactions%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%20%20%20%20%20%20%20%20%3Cg%20id%3D%22Connection-Error-_-Connectivity%22%20transform%3D%22translate%28-270.000000%2C%20-30.000000%29%22%20fill%3D%22%23CF1F25%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%3Cg%20id%3D%22109-network-connection%22%20transform%3D%22translate%28270.000000%2C%2030.000000%29%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cpath%20d%3D%22M66.4609744%2C11.414231%20C81.6225232%2C26.5757798%2081.6225232%2C51.157545%2066.4609744%2C66.3188467%20C51.2994256%2C81.4803954%2026.7176604%2C81.4803954%2011.5563587%2C66.3188467%20C-3.60519004%2C51.1572979%20-3.60519004%2C26.5755327%2011.5563587%2C11.414231%20C26.7179075%2C-3.74731776%2051.2996727%2C-3.74731776%2066.4609744%2C11.414231%20Z%20M54.7853215%2C45.8823776%20L54.7853215%2C40.5882574%20C54.7853215%2C39.613638%2053.9952341%2C38.8235506%2053.0206147%2C38.8235506%20L44.9576695%2C38.8235506%20L41.428256%2C42.3529641%20L51.255555%2C42.3529641%20L51.255555%2C45.8823776%20L54.7853215%2C45.8823776%20Z%20M40.6659027%2C43.1153174%20L37.8988425%2C45.8823776%20L40.6659027%2C45.8823776%20L40.6659027%2C43.1153174%20Z%20M51.1764962%2C56.4702653%20L58.2353232%2C56.4702653%20C59.2099355%2C56.4702653%2060.00003%2C55.6801708%2060.00003%2C54.7055585%20L60.00003%2C51.176145%20C60.00003%2C50.2015327%2059.2099355%2C49.4114382%2058.2353232%2C49.4114382%20L51.1764962%2C49.4114382%20C50.2018839%2C49.4114382%2049.4117894%2C50.2015327%2049.4117894%2C51.176145%20L49.4117894%2C54.7055585%20C49.4117894%2C55.6801708%2050.2018839%2C56.4702653%2051.1764962%2C56.4702653%20Z%20M35.2941353%2C56.4702653%20L42.3529624%2C56.4702653%20C43.3275746%2C56.4702653%2044.1176691%2C55.6801708%2044.1176691%2C54.7055585%20L44.1176691%2C51.176145%20C44.1176691%2C50.2015327%2043.3275746%2C49.4114382%2042.3529624%2C49.4114382%20L35.2941353%2C49.4114382%20C34.319523%2C49.4114382%2033.5294285%2C50.2015327%2033.5294285%2C51.176145%20L33.5294285%2C54.7055585%20C33.5294285%2C55.6801708%2034.319523%2C56.4702653%2035.2941353%2C56.4702653%20Z%20M56.6964989%2C19.0874231%20C56.007381%2C18.3985134%2054.8903216%2C18.3985134%2054.2012036%2C19.087423%20L45.882376%2C27.4062507%20L45.882376%2C19.4117761%20C45.882376%2C18.4371568%2045.0922885%2C17.6470693%2044.1176692%2C17.6470693%20L33.5294286%2C17.6470693%20C32.5548092%2C17.6470694%2031.7647218%2C18.4371568%2031.7647218%2C19.4117761%20L31.7647218%2C30.0000167%20C31.7647219%2C30.9746363%2032.5548092%2C31.7647237%2033.5294285%2C31.7647237%20L41.5239031%2C31.7647237%20L34.4650761%2C38.8235508%20L24.7058947%2C38.8235508%20C23.7312753%2C38.8235508%2022.9411879%2C39.6136382%2022.9411879%2C40.5882575%20L22.9411879%2C45.8823778%20L26.4706014%2C45.8823778%20L26.4706014%2C42.3529643%20L30.9356624%2C42.3529643%20L23.8768354%2C49.4117914%20L19.4117743%2C49.4117914%20C18.4371549%2C49.4117914%2017.6470675%2C50.2018788%2017.6470675%2C51.1764981%20L17.6470675%2C54.7059117%20C17.6504049%2C54.9674302%2017.7129076%2C55.2248042%2017.8298886%2C55.4587302%20L16.4456526%2C56.8429662%20C15.7446193%2C57.5200453%2015.7252005%2C58.6372282%2016.4022825%2C59.3382615%20C17.0793616%2C60.0392948%2018.1965445%2C60.0587136%2018.8975778%2C59.3816316%20C18.9122847%2C59.3674273%2018.9267436%2C59.3529684%2018.940948%2C59.3382615%20L56.6964963%2C21.5830662%20C57.3856425%2C20.8939094%2057.3856425%2C19.7765747%2056.6964963%2C19.0874179%20Z%22%20id%3D%22Combined-Shape%22%3E%3C%2Fpath%3E%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fg%3E%20%20%20%20%20%20%20%20%3C%2Fg%3E%20%20%20%20%3C%2Fg%3E%3C%2Fsvg%3E\"","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { LoadingChannels } from './LoadingChannels';\n\nimport placeholder from '../assets/str-chat__connection-error.svg';\nimport { withTranslationContext } from '../context';\n\n/**\n * ChatDown - Indicator that chat is down or your network isn't working\n *\n * @example ./docs/ChatDown.md\n * @extends PureComponent\n */\nclass ChatDown extends React.PureComponent {\n  static propTypes = {\n    /** The image url for this error */\n    image: PropTypes.string,\n    /** The type of error */\n    type: PropTypes.string,\n    /** The error message to show */\n    text: PropTypes.string,\n  };\n\n  static defaultProps = {\n    image: placeholder,\n    type: 'Error',\n  };\n\n  render() {\n    const { image, type, text, t } = this.props;\n\n    return (\n      <div className=\"str-chat__down\">\n        <LoadingChannels />\n        <div className=\"str-chat__down-main\">\n          <img src={image} />\n          <h1>{type}</h1>\n          <h3>\n            {text ||\n              t('Error connecting to chat, refresh the page to try again.')}\n          </h3>\n        </div>\n      </div>\n    );\n  }\n}\n\nChatDown = withTranslationContext(ChatDown);\nexport { ChatDown };\n","export default \"data:image/svg+xml,%3Csvg%20width%3D%228%22%20height%3D%225%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cdefs%3E%3Cpath%20id%3D%22b%22%20d%3D%22M.667.667L4%204%207.333.667z%22%2F%3E%3Cfilter%20x%3D%22-7.5%25%22%20y%3D%22-15%25%22%20width%3D%22115%25%22%20height%3D%22160%25%22%20filterUnits%3D%22objectBoundingBox%22%20id%3D%22a%22%3E%3CfeOffset%20dy%3D%221%22%20in%3D%22SourceAlpha%22%20result%3D%22shadowOffsetOuter1%22%2F%3E%3CfeComposite%20in%3D%22shadowOffsetOuter1%22%20in2%3D%22SourceAlpha%22%20operator%3D%22out%22%20result%3D%22shadowOffsetOuter1%22%2F%3E%3CfeColorMatrix%20values%3D%220%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200.685858243%200%22%20in%3D%22shadowOffsetOuter1%22%2F%3E%3C%2Ffilter%3E%3C%2Fdefs%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cuse%20fill%3D%22%23000%22%20filter%3D%22url%28%23a%29%22%20xlink%3Ahref%3D%22%23b%22%2F%3E%3Cuse%20fill-opacity%3D%22.7%22%20fill%3D%22%23FFF%22%20xlink%3Ahref%3D%22%23b%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E\"","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { LoadingChannels } from './LoadingChannels';\nimport { Avatar } from './Avatar';\nimport { ChatDown } from './ChatDown';\nimport { withChatContext } from '../context';\n\nimport chevrondown from '../assets/str-chat__icon-chevron-down.svg';\n\n/**\n * ChannelList - A preview list of channels, allowing you to select the channel you want to open\n * @example ./examples/ChannelList.md\n */\nclass ChannelListTeam extends PureComponent {\n  static propTypes = {\n    /** When true, loading indicator is shown - [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingChannels.js) */\n    loading: PropTypes.bool,\n    /** When true, error indicator is shown - [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown.js) */\n    error: PropTypes.bool,\n    /** Stream chat client object */\n    client: PropTypes.object,\n    /** When true, sidebar containing logo of the team is visible */\n    showSidebar: PropTypes.bool,\n    /** Url for sidebar logo image. */\n    sidebarImage: PropTypes.string,\n    /**\n     * Loading indicator UI Component. It will be displayed if `loading` prop is true.\n     *\n     * Defaults to and accepts same props as:\n     * [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingChannels.js)\n     *\n     */\n    LoadingIndicator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /**\n     * Error indicator UI Component. It will be displayed if `error` prop is true\n     *\n     * Defaults to and accepts same props as:\n     * [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown.js)\n     *\n     */\n    LoadingErrorIndicator: PropTypes.oneOfType([\n      PropTypes.node,\n      PropTypes.func,\n    ]),\n  };\n\n  static defaultProps = {\n    error: false,\n    LoadingIndicator: LoadingChannels,\n    LoadingErrorIndicator: ChatDown,\n  };\n\n  render() {\n    const { showSidebar, LoadingErrorIndicator, LoadingIndicator } = this.props;\n    if (this.props.error) {\n      return <LoadingErrorIndicator type=\"Connection Error\" />;\n    } else if (this.props.loading) {\n      return <LoadingIndicator />;\n    } else {\n      return (\n        <div className=\"str-chat__channel-list-team\">\n          {showSidebar && (\n            <div className=\"str-chat__channel-list-team__sidebar\">\n              <div className=\"str-chat__channel-list-team__sidebar--top\">\n                <Avatar image={this.props.sidebarImage} size={50} />\n              </div>\n            </div>\n          )}\n          <div className=\"str-chat__channel-list-team__main\">\n            <div className=\"str-chat__channel-list-team__header\">\n              <div className=\"str-chat__channel-list-team__header--left\">\n                <Avatar\n                  source={this.props.client.user.image}\n                  name={\n                    this.props.client.user.name || this.props.client.user.id\n                  }\n                  size={40}\n                />\n              </div>\n              <div className=\"str-chat__channel-list-team__header--middle\">\n                <div className=\"str-chat__channel-list-team__header--title\">\n                  {this.props.client.user.name || this.props.client.user.id}\n                </div>\n                <div\n                  className={`str-chat__channel-list-team__header--status ${this.props.client.user.status}`}\n                >\n                  {this.props.client.user.status}\n                </div>\n              </div>\n              <div className=\"str-chat__channel-list-team__header--right\">\n                <button className=\"str-chat__channel-list-team__header--button\">\n                  <img src={chevrondown} />\n                </button>\n              </div>\n            </div>\n            {this.props.children}\n          </div>\n        </div>\n      );\n    }\n  }\n}\n\nChannelListTeam = withChatContext(ChannelListTeam);\nexport { ChannelListTeam };\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport Immutable from 'seamless-immutable';\nimport { isPromise } from '../utils';\n\nimport { ChannelPreviewLastMessage } from './ChannelPreviewLastMessage';\nimport { ChannelPreview } from './ChannelPreview';\nimport { EmptyStateIndicator } from './EmptyStateIndicator';\nimport { LoadingChannels } from './LoadingChannels';\nimport { LoadMorePaginator } from './LoadMorePaginator';\nimport { withChatContext } from '../context';\nimport { ChannelListTeam } from './ChannelListTeam';\nimport { smartRender } from '../utils';\nimport uniqBy from 'lodash.uniqby';\nimport deepequal from 'deep-equal';\nimport { ChatDown } from './ChatDown';\n\n/**\n * ChannelList - A preview list of channels, allowing you to select the channel you want to open\n * @extends PureComponent\n * @example ./docs/ChannelList.md\n */\n\nclass ChannelList extends PureComponent {\n  static propTypes = {\n    view: PropTypes.oneOf(['all', 'dm', 'group']),\n    search: PropTypes.string,\n    Header: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n\n    /**\n     *\n     *\n     * Indicator for Empty State\n     * */\n    EmptyStateIndicator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /**\n     * Available built-in options (also accepts the same props as):\n     *\n     * 1. [ChannelPreviewCompact](https://getstream.github.io/stream-chat-react/#ChannelPreviewCompact) (default)\n     * 2. [ChannelPreviewLastMessage](https://getstream.github.io/stream-chat-react/#ChannelPreviewLastMessage)\n     * 3. [ChannelPreviewMessanger](https://getstream.github.io/stream-chat-react/#ChannelPreviewMessanger)\n     *\n     * The Preview to use, defaults to ChannelPreviewLastMessage\n     * */\n    Preview: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n\n    /**\n     * Loading indicator UI Component. It will be displayed until the channels are\n     * being queried from API. Once the channels are loaded/queried, loading indicator is removed\n     * and replaced with children of the Channel component.\n     *\n     * Defaults to and accepts same props as:\n     * [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingChannels.js)\n     *\n     */\n    LoadingIndicator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /**\n     * Error indicator UI Component. It will be displayed if there is any error if loading the channels.\n     * This error could be related to network or failing API.\n     *\n     * Defaults to and accepts same props as:\n     * [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown.js)\n     *\n     */\n    LoadingErrorIndicator: PropTypes.oneOfType([\n      PropTypes.node,\n      PropTypes.func,\n    ]),\n    /**\n     * Custom UI Component for container of list of channels. Note that, list (UI component) of channels is passed\n     * to this component as children. This component is for the purpose of adding header to channel list or styling container\n     * for list of channels.\n     *\n     * Available built-in options (also accepts the same props as):\n     *\n     * 1. [ChannelListTeam](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChannelListTeam.js) (default)\n     * 2. [ChannelListMessenger](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChannelListMessenger.js)\n     *\n     * It has access to some additional props:\n     *\n     * - `setActiveChannel` {function} Check [chat context](https://getstream.github.io/stream-chat-react/#chat)\n     * - `activeChannel` Currently active channel object\n     * - `channels` {array} List of channels in channel list\n     */\n    List: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /**\n     * Paginator component for channels. It contains all the pagination logic such as\n     * - fetching next page of results when needed e.g., when scroll reaches the end of list\n     * - UI to display loading indicator when next page is being loaded\n     * - call to action button to trigger loading of next page.\n     *\n     * Available built-in options (also accepts the same props as):\n     *\n     * 1. [LoadMorePaginator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadMorePaginator.js)\n     * 2. [InfiniteScrollPaginator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/InfiniteScrollPaginator.js)\n     */\n    Paginator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /**\n     * Function that overrides default behaviour when new message is received on channel that is not being watched\n     *\n     * @param {Component} thisArg Reference to ChannelList component\n     * @param {Event} event       [Event object](https://getstream.io/chat/docs/#event_object) corresponding to `notification.message_new` event\n     * */\n    onMessageNew: PropTypes.func,\n    /**\n     * Function that overrides default behaviour when users gets added to a channel\n     *\n     * @param {Component} thisArg Reference to ChannelList component\n     * @param {Event} event       [Event object](https://getstream.io/chat/docs/#event_object) corresponding to `notification.added_to_channel` event\n     * */\n    onAddedToChannel: PropTypes.func,\n    /**\n     * Function that overrides default behaviour when users gets removed from a channel\n     *\n     * @param {Component} thisArg Reference to ChannelList component\n     * @param {Event} event       [Event object](https://getstream.io/chat/docs/#event_object) corresponding to `notification.removed_from_channel` event\n     * */\n    onRemovedFromChannel: PropTypes.func,\n    /**\n     * Function that overrides default behaviour when channel gets updated\n     *\n     * @param {Component} thisArg Reference to ChannelList component\n     * @param {Event} event       [Event object](https://getstream.io/chat/docs/#event_object) corresponding to `notification.channel_updated` event\n     * */\n    onChannelUpdated: PropTypes.func,\n    /**\n     * Function to customize behaviour when channel gets truncated\n     *\n     * @param {Component} thisArg Reference to ChannelList component\n     * @param {Event} event       [Event object](https://getstream.io/chat/docs/#event_object) corresponding to `channel.truncated` event\n     * */\n    onChannelTruncated: PropTypes.func,\n    /**\n     * Function that overrides default behaviour when channel gets deleted. In absence of this prop, channel will be removed from the list.\n     *\n     * @param {Component} thisArg Reference to ChannelList component\n     * @param {Event} event       [Event object](https://getstream.io/chat/docs/#event_object) corresponding to `channel.deleted` event\n     * */\n    onChannelDeleted: PropTypes.func,\n    /**\n     * Object containing query filters\n     * @see See [Channel query documentation](https://getstream.io/chat/docs/#query_channels) for a list of available fields for filter.\n     * */\n    filters: PropTypes.object,\n    /**\n     * Object containing query options\n     * @see See [Channel query documentation](https://getstream.io/chat/docs/#query_channels) for a list of available fields for options.\n     * */\n    options: PropTypes.object,\n    /**\n     * Object containing sort parameters\n     * @see See [Channel query documentation](https://getstream.io/chat/docs/#query_channels) for a list of available fields for sort.\n     * */\n    sort: PropTypes.object,\n    /**\n     * Object containing watcher parameters\n     * @see See [Pagination documentation](https://getstream.io/chat/docs/#channel_pagination) for a list of available fields for sort.\n     * */\n    watchers: PropTypes.object,\n    /**\n     * Set a Channel to be active and move it to the top of the list of channels by ID.\n     * */\n    customActiveChannel: PropTypes.string,\n    /**\n     * Last channel will be set as active channel if true, defaults to true\n     */\n    setActiveChannelOnMount: PropTypes.bool,\n    /**\n     * If true, channels won't be dynamically sorted by most recent message.\n     */\n    lockChannelOrder: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    view: 'all',\n    search: '',\n    Preview: ChannelPreviewLastMessage,\n    LoadingIndicator: LoadingChannels,\n    LoadingErrorIndicator: ChatDown,\n    List: ChannelListTeam,\n    Paginator: LoadMorePaginator,\n    EmptyStateIndicator,\n    setActiveChannelOnMount: true,\n    filters: {},\n    options: {},\n    sort: {},\n    watchers: {},\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      channelSearchResults: Immutable([]),\n\n      // list of channels\n      channels: Immutable([]),\n      // loading channels\n      loadingChannels: true,\n      // error loading channels\n      refreshing: false,\n      hasNextPage: false,\n      offset: 0,\n      error: false,\n      connectionRecoveredCount: 0,\n      channelUpdateCount: 0,\n    };\n\n    this.menuButton = React.createRef();\n  }\n\n  static getDerivedStateFromError() {\n    return { error: true };\n  }\n\n  componentDidCatch(error, info) {\n    console.warn(error, info);\n  }\n\n  async componentDidMount() {\n    await this.queryChannels();\n    document.addEventListener('click', this._handleClickOutside);\n    this.listenToChanges();\n  }\n\n  async componentDidUpdate(prevProps) {\n    if (!deepequal(prevProps.filters, this.props.filters)) {\n      await this.setState({\n        offset: 0,\n        channels: Immutable([]),\n        loadingChannels: true,\n        refreshing: false,\n      });\n      await this.queryChannels();\n    }\n\n    if (prevProps.search !== this.props.search) {\n      if (this.props.search.length > 0) {\n        const messageSearchResults = await this.props.client.search(\n          this.props.filters,\n          this.props.search,\n        );\n\n        const channelSearchResults = await this.props.client.queryChannels(\n          { ...this.props.filters, name: { $eq: this.props.search } },\n          {},\n          {},\n        );\n\n        await this.setState({\n          channelSearchResults: Immutable([\n            ...messageSearchResults.results.map(\n              ({ message }) => message.channel.cid,\n            ),\n            ...channelSearchResults.map((channel) => channel.data.cid),\n          ]),\n        });\n      } else {\n        await this.setState({\n          searchResults: Immutable([]),\n        });\n      }\n      await this.queryChannels();\n    }\n\n    if (\n      this.props.customActiveChannel &&\n      prevProps.customActiveChannel !== this.props.customActiveChannel\n    ) {\n      this.moveChannelUp(this.props.customActiveChannel);\n    }\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this._handleClickOutside);\n    this.props.client.off(this.handleEvent);\n  }\n\n  queryChannels = async () => {\n    const { options, filters, sort, setActiveChannelOnMount } = this.props;\n    const { offset } = this.state;\n\n    this.setState({ refreshing: true });\n\n    const newOptions = {\n      ...options,\n    };\n    if (!options.limit) newOptions.limit = 50;\n\n    const channelPromise = this.props.client.queryChannels(filters, sort, {\n      ...newOptions,\n      offset,\n    });\n\n    try {\n      let channelQueryResponse = channelPromise;\n      if (isPromise(channelQueryResponse)) {\n        channelQueryResponse = await channelPromise;\n      }\n      this.setState((prevState) => {\n        const channels = [...prevState.channels, ...channelQueryResponse];\n\n        return {\n          channels, // not unique somehow needs more checking\n          loadingChannels: false,\n          offset: channels.length,\n          hasNextPage:\n            channelQueryResponse.length >= newOptions.limit ? true : false,\n          refreshing: false,\n        };\n      });\n\n      // Set a channel as active and move it to the top of the list.\n      if (this.props.customActiveChannel) {\n        const customActiveChannel = channelQueryResponse.filter(\n          (channel) => channel.id === this.props.customActiveChannel,\n        )[0];\n        if (customActiveChannel) {\n          this.props.setActiveChannel(customActiveChannel, this.props.watchers);\n          this.moveChannelUp(customActiveChannel.cid);\n        }\n      } else if (\n        setActiveChannelOnMount &&\n        offset === 0 &&\n        this.state.channels.length\n      ) {\n        this.props.setActiveChannel(\n          this.state.channels[0],\n          this.props.watchers,\n        );\n      }\n    } catch (e) {\n      console.warn(e);\n      this.setState({ error: true, refreshing: false });\n    }\n  };\n\n  listenToChanges() {\n    this.props.client.on(this.handleEvent);\n  }\n\n  // eslint-disable-next-line sonarjs/cognitive-complexity\n  handleEvent = async (e) => {\n    if (e.type === 'user.presence.changed') {\n      let newChannels = this.state.channels;\n\n      newChannels = newChannels.map((channel) => {\n        if (!channel.state.members[e.user.id]) return channel;\n\n        channel.state.members.setIn([e.user.id, 'user'], e.user);\n\n        return channel;\n      });\n\n      this.setState({ channels: [...newChannels] });\n    }\n\n    if (e.type === 'message.new') {\n      !this.props.lockChannelOrder && this.moveChannelUp(e.cid);\n    }\n\n    // make sure to re-render the channel list after connection is recovered\n    if (e.type === 'connection.recovered') {\n      this.setState((prevState) => ({\n        connectionRecoveredCount: prevState.connectionRecoveredCount + 1,\n      }));\n    }\n\n    // move channel to start\n    if (e.type === 'notification.message_new') {\n      // if new message, put move channel up\n      // get channel if not in state currently\n      if (\n        this.props.onMessageNew &&\n        typeof this.props.onMessageNew === 'function'\n      ) {\n        this.props.onMessageNew(this, e);\n      } else {\n        const channel = await this.getChannel(e.channel.type, e.channel.id);\n        // move channel to starting position\n        this.setState((prevState) => ({\n          channels: uniqBy([channel, ...prevState.channels], 'cid'),\n        }));\n      }\n    }\n\n    // add to channel\n    if (e.type === 'notification.added_to_channel') {\n      if (\n        this.props.onAddedToChannel &&\n        typeof this.props.onAddedToChannel === 'function'\n      ) {\n        this.props.onAddedToChannel(this, e);\n      } else {\n        const channel = await this.getChannel(e.channel.type, e.channel.id);\n        this.setState((prevState) => ({\n          channels: uniqBy([channel, ...prevState.channels], 'cid'),\n        }));\n      }\n    }\n\n    // remove from channel\n    if (e.type === 'notification.removed_from_channel') {\n      if (\n        this.props.onRemovedFromChannel &&\n        typeof this.props.onRemovedFromChannel === 'function'\n      ) {\n        this.props.onRemovedFromChannel(this, e);\n      } else {\n        this.setState((prevState) => {\n          const channels = prevState.channels.filter(\n            (channel) => channel.cid !== e.channel.cid,\n          );\n          return {\n            channels,\n          };\n        });\n      }\n    }\n\n    // Update the channel with data\n    if (e.type === 'channel.updated') {\n      const channels = this.state.channels;\n      const channelIndex = channels.findIndex(\n        (channel) => channel.cid === e.channel.cid,\n      );\n      if (channelIndex > -1) {\n        channels[channelIndex].data = Immutable(e.channel);\n\n        this.setState({\n          channels: [...channels],\n          channelUpdateCount: this.state.channelUpdateCount + 1,\n        });\n      }\n\n      if (\n        this.props.onChannelUpdated &&\n        typeof this.props.onChannelUpdated === 'function'\n      ) {\n        this.props.onChannelUpdated(this, e);\n      }\n    }\n\n    // Channel is deleted\n    if (e.type === 'channel.deleted') {\n      if (\n        this.props.onChannelDeleted &&\n        typeof this.props.onChannelDeleted === 'function'\n      ) {\n        this.props.onChannelDeleted(this, e);\n      } else {\n        const channels = this.state.channels;\n        const channelIndex = channels.findIndex(\n          (channel) => channel.cid === e.channel.cid,\n        );\n\n        if (channelIndex < 0) return;\n\n        // Remove the deleted channel from the list.s\n        channels.splice(channelIndex, 1);\n        this.setState({\n          channels: [...channels],\n          channelUpdateCount: this.state.channelUpdateCount + 1,\n        });\n      }\n    }\n\n    if (e.type === 'channel.truncated') {\n      this.setState((prevState) => ({\n        channels: [...prevState.channels],\n        channelUpdateCount: prevState.channelUpdateCount + 1,\n      }));\n\n      if (\n        this.props.onChannelTruncated &&\n        typeof this.props.onChannelTruncated === 'function'\n      )\n        this.props.onChannelTruncated(this, e);\n    }\n\n    return null;\n  };\n\n  getChannel = async (type, id) => {\n    const channel = this.props.client.channel(type, id);\n    await channel.watch();\n    return channel;\n  };\n\n  moveChannelUp = (cid) => {\n    const channels = this.state.channels;\n    // get channel index\n    const channelIndex = this.state.channels.findIndex(\n      (channel) => channel.cid === cid,\n    );\n    console.log({ channelIndex, channel: channels[channelIndex] });\n    if (channelIndex <= 0) return;\n\n    // get channel from channels\n    const channel = channels[channelIndex];\n\n    //remove channel from current position\n    channels.splice(channelIndex, 1);\n    //add channel at the start\n    channels.unshift(channel);\n\n    // set new channel state\n    this.setState({\n      channels: [...channels],\n    });\n  };\n\n  loadNextPage = () => {\n    this.queryChannels();\n  };\n\n  // new channel list // *********************************\n\n  _renderChannel = (item) => {\n    const { Preview, setActiveChannel, channel, watchers } = this.props;\n    if (!item) return;\n    const props = {\n      channel: item,\n      activeChannel: channel,\n      Preview,\n      setActiveChannel,\n      watchers,\n      key: item.id,\n      // To force the update of preview component upon channel update.\n      channelUpdateCount: this.state.channelUpdateCount,\n      connectionRecoveredCount: this.state.connectionRecoveredCount,\n    };\n    return smartRender(ChannelPreview, { ...props });\n  };\n\n  _handleClickOutside = (e) => {\n    if (\n      this.channelListRef &&\n      !this.channelListRef.contains(e.target) &&\n      this.props.navOpen\n    ) {\n      this.props.closeMobileNav();\n    }\n  };\n\n  render() {\n    const { List, Paginator, EmptyStateIndicator, Header } = this.props;\n    const { loadingChannels, refreshing, hasNextPage } = this.state;\n    const channels = this.state.channels\n      .filter((channel) => {\n        if (this.props.view === 'dm') return channel.data.member_count === 2;\n        if (this.props.view === 'group') return channel.data.member_count > 2;\n\n        return true;\n      })\n      .filter((channel) =>\n        this.props.search.length > 0\n          ? this.state.channelSearchResults.includes(channel.cid)\n          : true,\n      );\n\n    return (\n      <React.Fragment>\n        <div\n          className={`str-chat str-chat-channel-list ${this.props.theme} ${\n            this.props.navOpen ? 'str-chat-channel-list--open' : ''\n          }`}\n          ref={(ref) => (this.channelListRef = ref)}\n        >\n          {Header && <Header />}\n          <List\n            loading={loadingChannels}\n            error={this.state.error}\n            channels={channels}\n            setActiveChannel={this.props.setActiveChannel}\n            activeChannel={this.props.channel}\n            showSidebar={this.props.showSidebar}\n            LoadingIndicator={this.props.LoadingIndicator}\n            LoadingErrorIndicator={this.props.LoadingErrorIndicator}\n          >\n            {!channels.length ? (\n              <EmptyStateIndicator listType=\"channel\" />\n            ) : (\n              smartRender(Paginator, {\n                loadNextPage: this.loadNextPage,\n                hasNextPage,\n                refreshing,\n                children: channels.map((item) => this._renderChannel(item)),\n              })\n            )}\n          </List>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nChannelList = withChatContext(ChannelList);\nexport { ChannelList };\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { LoadingChannels } from './LoadingChannels';\nimport { ChatDown } from './ChatDown';\nimport { withChatContext } from '../context';\n\n/**\n * ChannelList - A preview list of channels, allowing you to select the channel you want to open\n * @example ./examples/ChannelList.md\n */\nclass ChannelListMessenger extends PureComponent {\n  static propTypes = {\n    /** When true, loading indicator is shown - [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingChannels.js) */\n    loading: PropTypes.bool,\n    /** When true, error indicator is shown - [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown.js) */\n    error: PropTypes.bool,\n    /**\n     * Loading indicator UI Component. It will be displayed if `loading` prop is true.\n     *\n     * Defaults to and accepts same props as:\n     * [LoadingChannels](https://github.com/GetStream/stream-chat-react/blob/master/src/components/LoadingChannels.js)\n     *\n     */\n    LoadingIndicator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /**\n     * Error indicator UI Component. It will be displayed if `error` prop is true\n     *\n     * Defaults to and accepts same props as:\n     * [ChatDown](https://github.com/GetStream/stream-chat-react/blob/master/src/components/ChatDown.js)\n     *\n     */\n    LoadingErrorIndicator: PropTypes.oneOfType([\n      PropTypes.node,\n      PropTypes.func,\n    ]),\n  };\n\n  static defaultProps = {\n    error: false,\n    LoadingIndicator: LoadingChannels,\n    LoadingErrorIndicator: ChatDown,\n  };\n\n  render() {\n    const {\n      error,\n      loading,\n      LoadingErrorIndicator,\n      LoadingIndicator,\n    } = this.props;\n    if (error) {\n      return <LoadingErrorIndicator type=\"Connection Error\" />;\n    } else if (loading) {\n      return <LoadingIndicator />;\n    } else {\n      return (\n        <div className=\"str-chat__channel-list-messenger\">\n          <div className=\"str-chat__channel-list-messenger__main\">\n            {this.props.children}\n          </div>\n        </div>\n      );\n    }\n  }\n}\n\nChannelListMessenger = withChatContext(ChannelListMessenger);\nexport { ChannelListMessenger };\n","import React from 'react';\nimport { Avatar } from './Avatar';\nimport PropTypes from 'prop-types';\n\n/**\n *\n * @example ./docs/ChannelPreviewCompact.md\n * @extends PureComponent\n *\n */\nexport class ChannelPreviewCompact extends React.PureComponent {\n  static propTypes = {\n    /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\n    channel: PropTypes.object.isRequired,\n    /** Current selected channel object */\n    activeChannel: PropTypes.object,\n    /** Setter for selected channel */\n    setActiveChannel: PropTypes.func.isRequired,\n    /**\n     * Object containing watcher parameters\n     * @see See [Pagination documentation](https://getstream.io/chat/docs/#channel_pagination) for a list of available fields for sort.\n     * */\n    watchers: PropTypes.object,\n    /** Number of unread messages */\n    unread: PropTypes.number,\n    /** If channel of component is active (selected) channel */\n    active: PropTypes.bool,\n    /** Latest message's text. */\n    latestMessage: PropTypes.string,\n    /** Title of channel to display */\n    displayTitle: PropTypes.string,\n    /** Image of channel to display */\n    displayImage: PropTypes.string,\n  };\n\n  channelPreviewButton = React.createRef();\n\n  onSelectChannel = () => {\n    this.props.setActiveChannel(this.props.channel, this.props.watchers);\n    this.channelPreviewButton.current.blur();\n  };\n  render() {\n    const { displayTitle, displayImage } = this.props;\n    const unreadClass =\n      this.props.unread_count >= 1\n        ? 'str-chat__channel-preview-compact--unread'\n        : '';\n    const activeClass = this.props.active\n      ? 'str-chat__channel-preview-compact--active'\n      : '';\n\n    return (\n      <button\n        onClick={this.onSelectChannel}\n        ref={this.channelPreviewButton}\n        className={`str-chat__channel-preview-compact ${unreadClass} ${activeClass}`}\n      >\n        <div className=\"str-chat__channel-preview-compact--left\">\n          <Avatar image={displayImage} size={20} />\n        </div>\n        <div className=\"str-chat__channel-preview-compact--right\">\n          {displayTitle}\n        </div>\n      </button>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Avatar } from './Avatar';\n\nimport truncate from 'lodash/truncate';\nimport { withTranslationContext } from '../context';\n\n/**\n * Used as preview component for channel item in [ChannelList](#channellist) component.\n * Its best suited for messenger type chat.\n *\n * @example ./docs/ChannelPreviewMessenger.md\n * @extends PureComponent\n */\nclass ChannelPreviewMessenger extends PureComponent {\n  static propTypes = {\n    /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\n    channel: PropTypes.object.isRequired,\n    /** Current selected channel object */\n    activeChannel: PropTypes.object,\n    /** Setter for selected channel */\n    setActiveChannel: PropTypes.func.isRequired,\n    /**\n     * Object containing watcher parameters\n     * @see See [Pagination documentation](https://getstream.io/chat/docs/#channel_pagination) for a list of available fields for sort.\n     * */\n    watchers: PropTypes.object,\n    /** Number of unread messages */\n    unread: PropTypes.number,\n    /** If channel of component is active (selected) channel */\n    active: PropTypes.bool,\n    /** Latest message's text. */\n    latestMessage: PropTypes.string,\n    /** Length of latest message to truncate at */\n    latestMessageLength: PropTypes.number,\n    /** Title of channel to display */\n    displayTitle: PropTypes.string,\n    /** Image of channel to display */\n    displayImage: PropTypes.string,\n  };\n\n  static defaultProps = {\n    latestMessageLength: 14,\n  };\n\n  channelPreviewButton = React.createRef();\n\n  onSelectChannel = () => {\n    this.props.setActiveChannel(this.props.channel, this.props.watchers);\n    this.channelPreviewButton.current.blur();\n  };\n\n  render() {\n    const unreadClass =\n      this.props.unread >= 1\n        ? 'str-chat__channel-preview-messenger--unread'\n        : '';\n    const activeClass = this.props.active\n      ? 'str-chat__channel-preview-messenger--active'\n      : '';\n\n    const { channel, displayTitle, displayImage, t } = this.props;\n\n    return (\n      <button\n        onClick={this.onSelectChannel}\n        ref={this.channelPreviewButton}\n        className={`str-chat__channel-preview-messenger ${unreadClass} ${activeClass}`}\n      >\n        <div className=\"str-chat__channel-preview-messenger--left\">\n          {<Avatar image={displayImage} size={40} />}\n        </div>\n        <div className=\"str-chat__channel-preview-messenger--right\">\n          <div className=\"str-chat__channel-preview-messenger--name\">\n            <span>{displayTitle}</span>\n          </div>\n          <div className=\"str-chat__channel-preview-messenger--last-message\">\n            {!channel.state.messages[0]\n              ? t('Nothing yet...')\n              : truncate(this.props.latestMessage, {\n                  length: this.props.latestMessageLength,\n                })}\n          </div>\n        </div>\n      </button>\n    );\n  }\n}\n\nChannelPreviewMessenger = withTranslationContext(ChannelPreviewMessenger);\nexport { ChannelPreviewMessenger };\n","import React from 'react';\n// import PropTypes from 'prop-types';\n\nexport class ChannelSearch extends React.PureComponent {\n  render() {\n    return (\n      <div className=\"str-chat__channel-search\">\n        <input type=\"text\" placeholder=\"Search\" />\n        <button type=\"submit\">\n          <svg\n            width=\"18\"\n            height=\"17\"\n            viewBox=\"0 0 18 17\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M0 17.015l17.333-8.508L0 0v6.617l12.417 1.89L0 10.397z\"\n              fillRule=\"evenodd\"\n            />\n          </svg>\n        </button>\n      </div>\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { ChatContext, TranslationContext } from '../context';\nimport { Streami18n } from '../Streami18n';\n/**\n * Chat - Wrapper component for Chat. The needs to be placed around any other chat components.\n * This Chat component provides the ChatContext to all other components.\n *\n * The ChatContext provides the following props:\n *\n * - client (the client connection)\n * - channels (the list of channels)\n * - setActiveChannel (a function to set the currently active channel)\n * - channel (the currently active channel)\n *\n * It also exposes the withChatContext HOC which you can use to consume the ChatContext\n *\n * @example ./docs/Chat.md\n * @extends PureComponent\n */\nexport class Chat extends PureComponent {\n  static propTypes = {\n    /** The StreamChat client object */\n    client: PropTypes.object.isRequired,\n    /**\n     *\n     * Theme could be used for custom styling of the components.\n     *\n     * You can override the classes used in our components under parent theme class.\n     *\n     * e.g. If you want to build a theme where background of message is black\n     *\n     * ```\n     *  <Chat client={client} theme={demo}>\n     *    <Channel>\n     *      <MessageList />\n     *    </Channel>\n     *  </Chat>\n     * ```\n     *\n     * ```scss\n     *  .demo.str-chat {\n     *    .str-chat__message-simple {\n     *      &-text-inner {\n     *        background-color: black;\n     *      }\n     *    }\n     *  }\n     * ```\n     *\n     * Built in available themes:\n     *\n     *  - `messaging light`\n     *  - `messaging dark`\n     *  - `team light`\n     *  - `team dark`\n     *  - `commerce light`\n     *  - `commerce dark`\n     *  - `livestream light`\n     *  - `livestream dark`\n     */\n    theme: PropTypes.string,\n  };\n\n  static defaultProps = {\n    theme: 'messaging light',\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      // currently active channel\n      channel: {},\n      navOpen: true,\n      error: false,\n    };\n  }\n\n  async componentDidMount() {\n    const { i18nInstance } = this.props;\n    let streami18n;\n\n    if (i18nInstance && i18nInstance instanceof Streami18n) {\n      streami18n = i18nInstance;\n    } else {\n      streami18n = new Streami18n({ language: 'en' });\n    }\n\n    streami18n.registerSetLanguageCallback((t) => {\n      this.setState({ t });\n    });\n\n    const { t, tDateTimeParser } = await streami18n.getTranslators();\n    this.setState({ t, tDateTimeParser });\n  }\n\n  setActiveChannel = async (channel, watchers = {}, e) => {\n    if (e !== undefined && e.preventDefault) {\n      e.preventDefault();\n    }\n    if (Object.keys(watchers).length) {\n      await channel.query({ watch: true, watchers });\n    }\n    this.setState(() => ({\n      channel,\n    }));\n    if (this.state.navOpen) {\n      this.closeMobileNav();\n    }\n  };\n\n  openMobileNav = () => {\n    setTimeout(() => {\n      this.setState({\n        navOpen: true,\n      });\n    }, 100);\n  };\n\n  closeMobileNav = () => {\n    this.setState({\n      navOpen: false,\n    });\n  };\n\n  getContext = () => ({\n    client: this.props.client,\n    channel: this.state.channel,\n    setActiveChannel: this.setActiveChannel,\n    openMobileNav: this.openMobileNav,\n    closeMobileNav: this.closeMobileNav,\n    navOpen: this.state.navOpen,\n    theme: this.props.theme,\n  });\n\n  render() {\n    if (!this.state.t) return null;\n\n    return (\n      <ChatContext.Provider value={this.getContext()}>\n        <TranslationContext.Provider\n          value={{\n            t: this.state.t,\n            tDateTimeParser: this.state.tDateTimeParser,\n          }}\n        >\n          {this.props.children}\n        </TranslationContext.Provider>\n      </ChatContext.Provider>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslationContext } from '../context';\n\n/**\n * DateSeparator - A simple date separator\n *\n * @example ./docs/DateSeparator.md\n * @extends PureComponent\n */\nclass DateSeparator extends React.PureComponent {\n  static propTypes = {\n    /** The date to format */\n    date: PropTypes.instanceOf(Date),\n    /** Set the position of the date in the separator */\n    position: PropTypes.oneOf(['left', 'center', 'right']),\n    /** Override the default formatting of the date. This is a function that has access to the original date object. Returns a string or Node  */\n    formatDate: PropTypes.func,\n  };\n\n  static defaultProps = {\n    position: 'right',\n  };\n  render() {\n    const { position, tDateTimeParser } = this.props;\n    if (!Date.parse(this.props.date)) {\n      return null;\n    }\n    return (\n      <div className=\"str-chat__date-separator\">\n        {(position === 'right' || position === 'center') && (\n          <hr className=\"str-chat__date-separator-line\" />\n        )}\n        <div className=\"str-chat__date-separator-date\">\n          {this.props.formatDate\n            ? this.props.formatDate(this.props.date)\n            : tDateTimeParser(this.props.date.toISOString()).calendar()}\n        </div>\n        {(position === 'left' || position === 'center') && (\n          <hr className=\"str-chat__date-separator-line\" />\n        )}\n      </div>\n    );\n  }\n}\n\nDateSeparator = withTranslationContext(DateSeparator);\n\nexport { DateSeparator };\n","import React from 'react';\nimport { Avatar } from './Avatar';\nimport PropTypes from 'prop-types';\nimport { withTranslationContext } from '../context';\n\nclass EventComponent extends React.PureComponent {\n  static propTypes = {\n    /** Message object */\n    message: PropTypes.object,\n  };\n\n  render() {\n    const { message, tDateTimeParser } = this.props;\n    if (message.type === 'system') {\n      return (\n        <div className=\"str-chat__message--system\">\n          <div className=\"str-chat__message--system__text\">\n            <div className=\"str-chat__message--system__line\" />\n            <p>{message.text}</p>\n            <div className=\"str-chat__message--system__line\" />\n          </div>\n          <div className=\"str-chat__message--system__date\">\n            <strong>\n              {tDateTimeParser(message.created_at).format('dddd')}{' '}\n            </strong>\n            at {tDateTimeParser(message.created_at).format('hh:mm A')}\n          </div>\n        </div>\n      );\n    }\n\n    if (\n      message.type === 'channel.event' &&\n      (message.event.type === 'member.removed' ||\n        message.event.type === 'member.added')\n    ) {\n      let sentence;\n\n      switch (message.event.type) {\n        case 'member.removed':\n          sentence = `${message.event.user.name ||\n            message.event.user.id} was removed from the chat`;\n          break;\n        case 'member.added':\n          sentence = `${message.event.user.name ||\n            message.event.user.id} has joined the chat`;\n          break;\n        default:\n          break;\n      }\n      return (\n        <div className=\"str-chat__event-component__channel-event\">\n          <Avatar\n            image={message.event.user.image}\n            name={message.event.user.name || message.event.user.id}\n          />\n          <div className=\"str-chat__event-component__channel-event__content\">\n            <em className=\"str-chat__event-component__channel-event__sentence\">\n              {sentence}\n            </em>\n            <div className=\"str-chat__event-component__channel-event__date\">\n              {tDateTimeParser(message.created_at).format('LT')}\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return null;\n  }\n}\n\nEventComponent = withTranslationContext(EventComponent);\n\nexport { EventComponent };\n","/* eslint-disable */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nexport class InfiniteScroll extends Component {\n  static propTypes = {\n    element: PropTypes.node,\n    hasMore: PropTypes.bool,\n    initialLoad: PropTypes.bool,\n    isReverse: PropTypes.bool,\n    loader: PropTypes.node,\n    loadMore: PropTypes.func.isRequired,\n    pageStart: PropTypes.number,\n    isLoading: PropTypes.bool,\n    threshold: PropTypes.number,\n    useCapture: PropTypes.bool,\n    useWindow: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    element: 'div',\n    hasMore: false,\n    initialLoad: true,\n    isLoading: false,\n    pageStart: 0,\n    ref: null,\n    threshold: 250,\n    useWindow: true,\n    isReverse: false,\n    useCapture: false,\n    loader: null,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.scrollListener = this.scrollListener.bind(this);\n  }\n\n  componentDidMount() {\n    this.attachScrollListener();\n  }\n\n  componentDidUpdate() {\n    this.attachScrollListener();\n  }\n\n  componentWillUnmount() {\n    this.detachScrollListener();\n    this.detachMousewheelListener();\n  }\n\n  // Set a defaut loader for all your `InfiniteScroll` components\n  setDefaultLoader(loader) {\n    this.defaultLoader = loader;\n  }\n\n  detachMousewheelListener() {\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = this.scrollComponent.parentNode;\n    }\n\n    scrollEl.removeEventListener(\n      'mousewheel',\n      this.mousewheelListener,\n      this.props.useCapture,\n    );\n  }\n\n  detachScrollListener() {\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = this.getParentElement(this.scrollComponent);\n    }\n\n    scrollEl.removeEventListener(\n      'scroll',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n    scrollEl.removeEventListener(\n      'resize',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n  }\n\n  getParentElement(el) {\n    return el && el.parentNode;\n  }\n\n  filterProps(props) {\n    return props;\n  }\n\n  attachScrollListener() {\n    if (\n      !this.props.hasMore ||\n      this.props.isLoading ||\n      !this.getParentElement(this.scrollComponent)\n    ) {\n      return;\n    }\n\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = this.getParentElement(this.scrollComponent);\n    }\n\n    scrollEl.addEventListener(\n      'mousewheel',\n      this.mousewheelListener,\n      this.props.useCapture,\n    );\n    scrollEl.addEventListener(\n      'scroll',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n    scrollEl.addEventListener(\n      'resize',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n\n    if (this.props.initialLoad) {\n      this.scrollListener();\n    }\n  }\n\n  mousewheelListener(e) {\n    // Prevents Chrome hangups\n    // See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\n    if (e.deltaY === 1) {\n      e.preventDefault();\n    }\n  }\n\n  scrollListener() {\n    const el = this.scrollComponent;\n    const scrollEl = window;\n    const parentNode = this.getParentElement(el);\n\n    let offset;\n    if (this.props.useWindow) {\n      const doc =\n        document.documentElement || document.body.parentNode || document.body;\n      const scrollTop =\n        scrollEl.pageYOffset !== undefined\n          ? scrollEl.pageYOffset\n          : doc.scrollTop;\n      if (this.props.isReverse) {\n        offset = scrollTop;\n      } else {\n        offset = this.calculateOffset(el, scrollTop);\n      }\n    } else if (this.props.isReverse) {\n      offset = parentNode.scrollTop;\n    } else {\n      offset = el.scrollHeight - parentNode.scrollTop - parentNode.clientHeight;\n    }\n\n    // Here we make sure the element is visible as well as checking the offset\n    if (\n      offset < Number(this.props.threshold) &&\n      el &&\n      el.offsetParent !== null\n    ) {\n      this.detachScrollListener();\n      // Call loadMore after detachScrollListener to allow for non-async loadMore functions\n      if (typeof this.props.loadMore === 'function') {\n        this.props.loadMore();\n      }\n    }\n  }\n\n  calculateOffset(el, scrollTop) {\n    if (!el) {\n      return 0;\n    }\n\n    return (\n      this.calculateTopPosition(el) +\n      (el.offsetHeight - scrollTop - window.innerHeight)\n    );\n  }\n\n  calculateTopPosition(el) {\n    if (!el) {\n      return 0;\n    }\n    return el.offsetTop + this.calculateTopPosition(el.offsetParent);\n  }\n\n  render() {\n    const renderProps = this.filterProps(this.props);\n    const {\n      children,\n      element,\n      hasMore,\n      initialLoad,\n      isReverse,\n      loader,\n      loadMore,\n      pageStart,\n      threshold,\n      useCapture,\n      useWindow,\n      isLoading,\n      ...props\n    } = renderProps;\n\n    props.ref = (node) => {\n      this.scrollComponent = node;\n    };\n\n    const childrenArray = [children];\n    if (isLoading) {\n      if (loader) {\n        isReverse ? childrenArray.unshift(loader) : childrenArray.push(loader);\n      } else if (this.defaultLoader) {\n        isReverse\n          ? childrenArray.unshift(this.defaultLoader)\n          : childrenArray.push(this.defaultLoader);\n      }\n    }\n    return React.createElement(element, props, childrenArray);\n  }\n}\n\nexport default InfiniteScroll;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { LoadingIndicator } from 'react-file-utils';\n\nimport InfiniteScroll from './InfiniteScroll';\n\nexport class InfiniteScrollPaginator extends React.Component {\n  static propTypes = {\n    /** callback to load the next page */\n    loadNextPage: PropTypes.func,\n    /** indicates if there is a next page to load */\n    hasNextPage: PropTypes.bool,\n    /** indicates if there there's currently any refreshing taking place */\n    refreshing: PropTypes.bool,\n    /** display the items in opposite order */\n    reverse: PropTypes.bool,\n    /** Offset from when to start the loadNextPage call */\n    threshold: PropTypes.number,\n    /** The loading indicator to use */\n    LoadingIndicator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  };\n\n  static defaultProps = {\n    LoadingIndicator,\n  };\n\n  render() {\n    const {\n      LoadingIndicator,\n      loadNextPage,\n      hasNextPage,\n      refreshing,\n      reverse,\n      threshold,\n    } = this.props;\n\n    return (\n      <InfiniteScroll\n        loadMore={loadNextPage}\n        hasMore={hasNextPage}\n        isLoading={refreshing}\n        isReverse={reverse}\n        threshold={threshold}\n        useWindow={false}\n        loader={\n          <div\n            className=\"str-chat__infinite-scroll-paginator\"\n            key=\"loadingindicator\"\n          >\n            <LoadingIndicator />\n          </div>\n        }\n      >\n        {this.props.children}\n      </InfiniteScroll>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport deepequal from 'deep-equal';\n\nimport { MessageSimple } from './MessageSimple';\nimport { Attachment } from './Attachment';\nimport { MESSAGE_ACTIONS } from '../utils';\nimport { withTranslationContext } from '../context';\n\n/**\n * Message - A high level component which implements all the logic required for a message.\n * The actual rendering of the message is delegated via the \"Message\" property\n *\n * @example ./docs/Message.md\n * @extends Component\n */\nclass Message extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n    };\n  }\n\n  static propTypes = {\n    /** The message object */\n    message: PropTypes.object.isRequired,\n    /** The client connection object for connecting to Stream */\n    client: PropTypes.object.isRequired,\n    /** The current channel this message is displayed in */\n    channel: PropTypes.object.isRequired,\n    /** A list of users that have read this message **/\n    readBy: PropTypes.array,\n    /** groupStyles, a list of styles to apply to this message. ie. top, bottom, single etc */\n    groupStyles: PropTypes.array,\n    /** Editing, if the message is currently being edited */\n    editing: PropTypes.bool,\n    /**\n     * Message UI component to display a message in message list.\n     * Available from [channel context](https://getstream.github.io/stream-chat-react/#channelcontext)\n     * */\n    Message: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /**\n     * Attachment UI component to display attachment in individual message.\n     * Available from [channel context](https://getstream.github.io/stream-chat-react/#channelcontext)\n     * */\n    Attachment: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n    unsafeHTML: PropTypes.bool,\n    /**\n     * Array of allowed actions on message. e.g. ['edit', 'delete', 'mute', 'flag']\n     * If all the actions need to be disabled, empty array or false should be provided as value of prop.\n     * */\n    messageActions: PropTypes.oneOfType([PropTypes.bool, PropTypes.array]),\n    /**\n     * Function that returns message/text as string to be shown as notification, when request for flagging a message is successful\n     *\n     * This function should accept following params:\n     *\n     * @param message A [message object](https://getstream.io/chat/docs/#message_format) which is flagged.\n     *\n     * */\n    getFlagMessageSuccessNotification: PropTypes.func,\n    /**\n     * Function that returns message/text as string to be shown as notification, when request for flagging a message runs into error\n     *\n     * This function should accept following params:\n     *\n     * @param message A [message object](https://getstream.io/chat/docs/#message_format) which is flagged.\n     *\n     * */\n    getFlagMessageErrorNotification: PropTypes.func,\n    /**\n     * Function that returns message/text as string to be shown as notification, when request for muting a user is successful\n     *\n     * This function should accept following params:\n     *\n     * @param user A user object which is being muted\n     *\n     * */\n    getMuteUserSuccessNotification: PropTypes.func,\n    /**\n     * Function that returns message/text as string to be shown as notification, when request for muting a user runs into error\n     *\n     * This function should accept following params:\n     *\n     * @param user A user object which is being muted\n     *\n     * */\n    getMuteUserErrorNotification: PropTypes.func,\n    /** Latest message id on current channel */\n    lastReceivedId: PropTypes.string,\n    /** DOMRect object for parent MessageList component */\n    messageListRect: PropTypes.object,\n    /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n    members: PropTypes.object,\n    /**\n     * Function to add custom notification on messagelist\n     *\n     * @param text Notification text to display\n     * @param type Type of notification. 'success' | 'error'\n     * */\n    addNotification: PropTypes.func,\n    /** Sets the editing state */\n    setEditingState: PropTypes.func,\n    /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n    updateMessage: PropTypes.func,\n    /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n    removeMessage: PropTypes.func,\n    /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n    retrySendMessage: PropTypes.func,\n    /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n    onMentionsClick: PropTypes.func,\n    /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n    onMentionsHover: PropTypes.func,\n    /** @see See [Channel Context](https://getstream.github.io/stream-chat-react/#channelcontext) */\n    openThread: PropTypes.func,\n    /** Handler to clear the edit state of message. It is defined in [MessageList](https://getstream.github.io/stream-chat-react/#messagelist) component */\n    clearEditingState: PropTypes.func,\n    /**\n     * Additional props for underlying MessageInput component.\n     * Available props - https://getstream.github.io/stream-chat-react/#messageinput\n     * */\n    additionalMessageInputProps: PropTypes.object,\n  };\n\n  static defaultProps = {\n    Message: MessageSimple,\n    readBy: [],\n    groupStyles: [],\n    Attachment,\n    editing: false,\n    messageActions: Object.keys(MESSAGE_ACTIONS),\n  };\n\n  shouldComponentUpdate(nextProps) {\n    // since there are many messages its important to only rerender messages when needed.\n    let shouldUpdate = nextProps.message !== this.props.message;\n    let reason = '';\n    if (shouldUpdate) {\n      reason = 'message';\n    }\n    // read state is the next most likely thing to change..\n    if (!shouldUpdate && !deepequal(nextProps.readBy, this.props.readBy)) {\n      shouldUpdate = true;\n      reason = 'readBy';\n    }\n    // group style often changes for the last 3 messages...\n    if (\n      !shouldUpdate &&\n      !deepequal(nextProps.groupStyles, this.props.groupStyles)\n    ) {\n      shouldUpdate = true;\n      reason = 'groupStyles';\n    }\n\n    // if lastreceivedId changesm, message should update.\n    if (\n      !shouldUpdate &&\n      !deepequal(nextProps.lastReceivedId, this.props.lastReceivedId)\n    ) {\n      shouldUpdate = true;\n      reason = 'lastReceivedId';\n    }\n\n    // editing is the last one which can trigger a change..\n    if (!shouldUpdate && nextProps.editing !== this.props.editing) {\n      shouldUpdate = true;\n      reason = 'editing';\n    }\n\n    // editing is the last one which can trigger a change..\n    if (\n      !shouldUpdate &&\n      nextProps.messageListRect !== this.props.messageListRect\n    ) {\n      shouldUpdate = true;\n      reason = 'messageListRect';\n    }\n\n    if (shouldUpdate && reason) {\n      // console.log(\n      //   'message',\n      //   nextProps.message.id,\n      //   'shouldUpdate',\n      //   shouldUpdate,\n      //   reason,\n      // );\n      // console.log(reason, diff(this.props, nextProps));\n    }\n\n    return shouldUpdate;\n  }\n\n  isMyMessage = (message) => this.props.client.user.id === message.user.id;\n  isAdmin = () =>\n    this.props.client.user.role === 'admin' ||\n    (this.props.channel.state &&\n      this.props.channel.state.membership &&\n      this.props.channel.state.membership.role === 'admin');\n  isOwner = () =>\n    this.props.channel.state &&\n    this.props.channel.state.membership &&\n    this.props.channel.state.membership.role === 'owner';\n  isModerator = () =>\n    this.props.channel.state &&\n    this.props.channel.state.membership &&\n    (this.props.channel.state.membership.role === 'channel_moderator' ||\n      this.props.channel.state.membership.role === 'moderator');\n\n  canEditMessage = (message) =>\n    this.isMyMessage(message) ||\n    this.isModerator() ||\n    this.isOwner() ||\n    this.isAdmin();\n\n  canDeleteMessage = (message) => this.canEditMessage(message);\n\n  /**\n   * Following function validates a function which returns notification message.\n   * It validates if the first parameter is function and also if return value of function is string or no.\n   *\n   * @param func {Function}\n   * @param args {Array} Arguments to be provided to func while executing.\n   */\n  validateAndGetNotificationMessage = (func, args) => {\n    if (!func || typeof func !== 'function') return false;\n\n    const returnValue = func.apply(null, args);\n\n    if (typeof returnValue !== 'string') return false;\n\n    return returnValue;\n  };\n\n  handleFlag = async (event) => {\n    event.preventDefault();\n\n    const {\n      getFlagMessageSuccessNotification,\n      getFlagMessageErrorNotification,\n      message,\n      client,\n      addNotification,\n      t,\n    } = this.props;\n\n    try {\n      await client.flagMessage(message.id);\n      const successMessage = this.validateAndGetNotificationMessage(\n        getFlagMessageSuccessNotification,\n        [message],\n      );\n      addNotification(\n        successMessage\n          ? successMessage\n          : t('Message has been successfully flagged'),\n        'success',\n      );\n    } catch (e) {\n      const errorMessage = this.validateAndGetNotificationMessage(\n        getFlagMessageErrorNotification,\n        [message],\n      );\n      addNotification(\n        errorMessage\n          ? errorMessage\n          : t(\n              'Error adding flag: Either the flag already exist or there is issue with network connection ...',\n            ),\n        'error',\n      );\n    }\n  };\n\n  handleMute = async (event) => {\n    event.preventDefault();\n\n    const {\n      getMuteUserSuccessNotification,\n      getMuteUserErrorNotification,\n      message,\n      client,\n      addNotification,\n      t,\n    } = this.props;\n\n    try {\n      await client.muteUser(message.user.id);\n      const successMessage = this.validateAndGetNotificationMessage(\n        getMuteUserSuccessNotification,\n        [message.user],\n      );\n\n      addNotification(\n        successMessage\n          ? successMessage\n          : t(`{{ user }} has been muted`, {\n              user: message.user.name || message.user.id,\n            }),\n        'success',\n      );\n    } catch (e) {\n      const errorMessage = this.validateAndGetNotificationMessage(\n        getMuteUserErrorNotification,\n        [message.user],\n      );\n\n      addNotification(\n        errorMessage ? errorMessage : t('Error muting a user ...'),\n        'error',\n      );\n    }\n  };\n\n  handleEdit = (event) => {\n    const { setEditingState, message } = this.props;\n\n    if (event !== undefined && event.preventDefault) {\n      event.preventDefault();\n    }\n\n    setEditingState(message);\n  };\n\n  handleDelete = async (event) => {\n    event.preventDefault();\n    const { message, client, updateMessage } = this.props;\n    const data = await client.deleteMessage(message.id);\n    updateMessage(data.message);\n  };\n\n  handleReaction = async (reactionType, event) => {\n    if (event !== undefined && event.preventDefault) {\n      event.preventDefault();\n    }\n\n    let userExistingReaction = null;\n\n    const currentUser = this.props.client.userID;\n\n    for (const reaction of this.props.message.own_reactions) {\n      // own user should only ever contain the current user id\n      // just in case we check to prevent bugs with message updates from breaking reactions\n      if (currentUser === reaction.user.id && reaction.type === reactionType) {\n        userExistingReaction = reaction;\n      } else if (currentUser !== reaction.user.id) {\n        console.warn(\n          `message.own_reactions contained reactions from a different user, this indicates a bug`,\n        );\n      }\n    }\n\n    const originalMessage = this.props.message;\n    let reactionChangePromise;\n\n    /*\n    - Add the reaction to the local state\n    - Make the API call in the background\n    - If it fails, revert to the old message...\n     */\n    if (userExistingReaction) {\n      // this.props.channel.state.removeReaction(userExistingReaction);\n\n      reactionChangePromise = this.props.channel.deleteReaction(\n        this.props.message.id,\n        userExistingReaction.type,\n      );\n    } else {\n      // add the reaction\n      const messageID = this.props.message.id;\n\n      const reaction = { type: reactionType };\n\n      // this.props.channel.state.addReaction(tmpReaction, this.props.message);\n      reactionChangePromise = this.props.channel.sendReaction(\n        messageID,\n        reaction,\n      );\n    }\n\n    try {\n      // only wait for the API call after the state is updated\n      await reactionChangePromise;\n    } catch (e) {\n      // revert to the original message if the API call fails\n      this.props.updateMessage(originalMessage);\n    }\n  };\n\n  handleAction = async (name, value, event) => {\n    event.preventDefault();\n    const messageID = this.props.message.id;\n    const formData = {};\n    formData[name] = value;\n\n    const data = await this.props.channel.sendAction(messageID, formData);\n\n    if (data && data.message) {\n      this.props.updateMessage(data.message);\n    } else {\n      this.props.removeMessage(this.props.message);\n    }\n  };\n\n  handleRetry = async (message) => {\n    await this.props.retrySendMessage(message);\n  };\n\n  onMentionsClick = (e) => {\n    if (typeof this.props.onMentionsClick !== 'function') {\n      return;\n    }\n    this.props.onMentionsClick(e, this.props.message.mentioned_users);\n  };\n\n  onMentionsHover = (e) => {\n    const { onMentionsHover, message } = this.props;\n\n    if (typeof onMentionsHover !== 'function') {\n      return;\n    }\n\n    onMentionsHover(e, message.mentioned_users);\n  };\n\n  getMessageActions = () => {\n    const { message, messageActions: messageActionsProps } = this.props;\n    const { mutes } = this.props.channel.getConfig();\n\n    const messageActionsAfterPermission = [];\n    let messageActions = [];\n\n    if (messageActionsProps && typeof messageActionsProps === 'boolean') {\n      // If value of messageActionsProps is true, then populate all the possible values\n      messageActions = Object.keys(MESSAGE_ACTIONS);\n    } else if (messageActionsProps && messageActionsProps.length > 0) {\n      messageActions = [...messageActionsProps];\n    } else {\n      return [];\n    }\n\n    if (\n      this.canEditMessage(message) &&\n      messageActions.indexOf(MESSAGE_ACTIONS.edit) > -1\n    ) {\n      messageActionsAfterPermission.push(MESSAGE_ACTIONS.edit);\n    }\n\n    if (\n      this.canDeleteMessage(message) &&\n      messageActions.indexOf(MESSAGE_ACTIONS.delete) > -1\n    ) {\n      messageActionsAfterPermission.push(MESSAGE_ACTIONS.delete);\n    }\n\n    if (\n      !this.isMyMessage(message) &&\n      messageActions.indexOf(MESSAGE_ACTIONS.flag) > -1\n    ) {\n      messageActionsAfterPermission.push(MESSAGE_ACTIONS.flag);\n    }\n\n    if (\n      !this.isMyMessage(message) &&\n      messageActions.indexOf(MESSAGE_ACTIONS.mute) > -1 &&\n      mutes\n    ) {\n      messageActionsAfterPermission.push(MESSAGE_ACTIONS.mute);\n    }\n\n    return messageActionsAfterPermission;\n  };\n\n  render() {\n    const config = this.props.channel.getConfig();\n    const { message } = this.props;\n\n    const actionsEnabled =\n      message.type === 'regular' && message.status === 'received';\n\n    const Component = this.props.Message;\n    return (\n      <Component\n        {...this.props}\n        actionsEnabled={actionsEnabled}\n        Message={this}\n        handleReaction={this.handleReaction}\n        getMessageActions={this.getMessageActions}\n        handleFlag={this.handleFlag}\n        handleMute={this.handleMute}\n        handleAction={this.handleAction}\n        handleDelete={this.handleDelete}\n        handleEdit={this.handleEdit}\n        handleRetry={this.handleRetry}\n        handleOpenThread={\n          this.props.openThread && this.props.openThread.bind(this, message)\n        }\n        isMyMessage={this.isMyMessage}\n        channelConfig={config}\n        onMentionsClickMessage={this.onMentionsClick}\n        onMentionsHoverMessage={this.onMentionsHover}\n      />\n    );\n  }\n}\n\nMessage = withTranslationContext(Message);\n\nexport { Message };\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { MessageActionsBox } from './MessageActionsBox';\n\nexport class MessageActions extends PureComponent {\n  static propTypes = {\n    onClickReact: PropTypes.func,\n    /** If the message actions box should be open or not */\n    open: PropTypes.bool.isRequired,\n    /**\n     * @deprecated\n     *\n     *  The message component, most logic is delegated to this component and MessageActionsBox uses the following functions explicitly:\n     *  `handleFlag`, `handleMute`, `handleEdit`, `handleDelete`, `canDeleteMessage`, `canEditMessage`, `isMyMessage`, `isAdmin`\n     */\n    Message: PropTypes.oneOfType([\n      PropTypes.node,\n      PropTypes.func,\n      PropTypes.object,\n    ]).isRequired,\n    /** If message belongs to current user. */\n    mine: PropTypes.bool,\n    /** DOMRect object for parent MessageList component */\n    messageListRect: PropTypes.object,\n    /**\n     * Handler for flaging a current message\n     *\n     * @param event React's MouseEventHandler event\n     * @returns void\n     * */\n    handleFlag: PropTypes.func,\n    /**\n     * Handler for muting a current message\n     *\n     * @param event React's MouseEventHandler event\n     * @returns void\n     * */\n    handleMute: PropTypes.func,\n    /**\n     * Handler for editing a current message\n     *\n     * @param event React's MouseEventHandler event\n     * @returns void\n     * */\n    handleEdit: PropTypes.func,\n    /**\n     * Handler for deleting a current message\n     *\n     * @param event React's MouseEventHandler event\n     * @returns void\n     * */\n    handleDelete: PropTypes.func,\n    /**\n     * Returns array of avalable message actions for current message.\n     * Please check [Message](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Message.js) component for default implementation.\n     */\n    getMessageActions: PropTypes.func,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      actionBox: false,\n      reactionBox: false,\n    };\n    this.reactionsBox = React.createRef();\n    this.actionsRef = React.createRef();\n  }\n\n  _openActionBox = () => {\n    this.setState(\n      {\n        actionBox: true,\n      },\n      () => {\n        document.addEventListener('click', this._closeActionBox);\n      },\n    );\n  };\n\n  _closeActionBox = () => {\n    this.setState(\n      {\n        actionBox: false,\n      },\n      () => {\n        document.removeEventListener('click', this._closeActionBox);\n      },\n    );\n  };\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this._closeActionBox);\n  }\n\n  render() {\n    return (\n      <div ref={this.actionsRef} className=\"str-chat__message-actions\">\n        <div\n          className=\"str-chat__message-actions-reactions\"\n          onClick={this.props.onClickReact}\n        >\n          <svg\n            width=\"20\"\n            height=\"18\"\n            viewBox=\"0 0 20 18\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M16.5 4.5H15a.5.5 0 1 1 0-1h1.5V2a.5.5 0 1 1 1 0v1.5H19a.5.5 0 1 1 0 1h-1.5V6a.5.5 0 1 1-1 0V4.5zM9 13c-1.773 0-3.297-.82-4-2h8c-.703 1.18-2.227 2-4 2zm4.057-11.468a.5.5 0 1 1-.479.878A7.45 7.45 0 0 0 9 1.5C4.865 1.5 1.5 4.865 1.5 9s3.365 7.5 7.5 7.5 7.5-3.365 7.5-7.5c0-.315-.02-.628-.058-.937a.5.5 0 1 1 .992-.124c.044.35.066.704.066 1.06 0 4.688-3.813 8.501-8.5 8.501C4.313 17.5.5 13.687.5 9 .5 4.312 4.313.5 9 .5a8.45 8.45 0 0 1 4.057 1.032zM7.561 5.44a1.5 1.5 0 1 1-2.123 2.122 1.5 1.5 0 0 1 2.123-2.122zm5 0a1.5 1.5 0 1 1-2.122 2.122 1.5 1.5 0 0 1 2.122-2.122z\"\n              fillRule=\"evenodd\"\n            />\n          </svg>\n        </div>\n        <div\n          className=\"str-chat__message-actions-options\"\n          onClick={() => this._openActionBox()}\n        >\n          <svg\n            width=\"11\"\n            height=\"3\"\n            viewBox=\"0 0 11 3\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M1.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z\"\n              fillRule=\"nonzero\"\n            />\n          </svg>\n        </div>\n        {/* ActionsBox */}\n        <MessageActionsBox {...this.props} open={this.state.actionBox} />\n      </div>\n    );\n  }\n}\n\nMessageActions.propTypes = {\n  Message: PropTypes.object.isRequired,\n};\n","import React, { PureComponent } from 'react';\nimport { Attachment } from './Attachment';\nimport { ReactionsList } from './ReactionsList';\nimport { Avatar } from './Avatar';\nimport { Gallery } from './Gallery';\nimport { ReactionSelector } from './ReactionSelector';\nimport { MessageRepliesCountButton } from './MessageRepliesCountButton';\n\nimport PropTypes from 'prop-types';\n\nimport { isOnlyEmojis, renderText } from '../utils';\nimport { withTranslationContext } from '../context';\n\n/**\n * MessageCommerce - Render component, should be used together with the Message component\n *\n * @example ./docs/MessageSimple.md\n * @extends PureComponent\n */\nclass MessageCommerce extends PureComponent {\n  static propTypes = {\n    /** The [message object](https://getstream.io/chat/docs/#message_format) */\n    message: PropTypes.object,\n    /**\n     * The attachment UI component.\n     * Default: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\n     * */\n    Attachment: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /**\n     *\n     * @deprecated Its not recommended to use this anymore. All the methods in this HOC are provided explicitly.\n     *\n     * The higher order message component, most logic is delegated to this component\n     * @see See [Message HOC](https://getstream.github.io/stream-chat-react/#message) for example\n     *\n     * */\n    Message: PropTypes.oneOfType([\n      PropTypes.node,\n      PropTypes.func,\n      PropTypes.object,\n    ]).isRequired,\n    /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n    unsafeHTML: PropTypes.bool,\n    /** If its parent message in thread. */\n    initialMessage: PropTypes.bool,\n    /** Channel config object */\n    channelConfig: PropTypes.object,\n    /** If component is in thread list */\n    threadList: PropTypes.bool,\n    /** Function to open thread on current messxage */\n    handleOpenThread: PropTypes.func,\n    /** Returns true if message belongs to current user */\n    isMyMessage: PropTypes.func,\n    /** Returns all allowed actions on message by current user e.g., [edit, delete, flag, mute] */\n    getMessageActions: PropTypes.func,\n    /**\n     * Add or remove reaction on message\n     *\n     * @param type Type of reaction - 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n     * @param event Dom event which triggered this function\n     */\n    handleReaction: PropTypes.func,\n    /** If actions such as edit, delete, flag, mute are enabled on message */\n    actionsEnabled: PropTypes.bool,\n    /**\n     * Handler for actions. Actions in combination with attachments can be used to build [commands](https://getstream.io/chat/docs/#channel_commands).\n     *\n     * @param name {string} Name of action\n     * @param value {string} Value of action\n     * @param event Dom event that triggered this handler\n     */\n    handleAction: PropTypes.func,\n    /**\n     * The handler for hover event on @mention in message\n     *\n     * @param event Dom hover event which triggered handler.\n     * @param user Target user object\n     */\n    onMentionsHoverMessage: PropTypes.func,\n    /**\n     * The handler for click event on @mention in message\n     *\n     * @param event Dom click event which triggered handler.\n     * @param user Target user object\n     */\n    onMentionsClickMessage: PropTypes.func,\n    /** Position of message in group. Possible values: top, bottom, middle, single */\n    groupStyles: PropTypes.array,\n  };\n\n  static defaultProps = {\n    Attachment,\n  };\n\n  state = {\n    isFocused: false,\n    actionsBoxOpen: false,\n    showDetailedReactions: false,\n  };\n\n  messageActionsRef = React.createRef();\n  reactionSelectorRef = React.createRef();\n\n  _onClickOptionsAction = () => {\n    this.setState(\n      {\n        actionsBoxOpen: true,\n      },\n      () => document.addEventListener('click', this.hideOptions, false),\n    );\n  };\n\n  _hideOptions = () => {\n    this.setState({\n      actionsBoxOpen: false,\n    });\n    document.removeEventListener('click', this.hideOptions, false);\n  };\n\n  _clickReactionList = () => {\n    this.setState(\n      () => ({\n        showDetailedReactions: true,\n      }),\n      () => {\n        document.addEventListener('click', this._closeDetailedReactions);\n      },\n    );\n  };\n\n  _closeDetailedReactions = (e) => {\n    if (\n      !this.reactionSelectorRef.current.reactionSelector.current.contains(\n        e.target,\n      )\n    ) {\n      this.setState(\n        () => ({\n          showDetailedReactions: false,\n        }),\n        () => {\n          document.removeEventListener('click', this._closeDetailedReactions);\n        },\n      );\n    } else {\n      return {};\n    }\n  };\n\n  componentWillUnmount() {\n    if (!this.props.message.deleted_at) {\n      document.removeEventListener('click', this._closeDetailedReactions);\n    }\n  }\n\n  isMine() {\n    return !this.props.isMyMessage(this.props.message);\n  }\n\n  renderOptions() {\n    if (\n      this.props.message.type === 'error' ||\n      this.props.message.type === 'system' ||\n      this.props.message.type === 'ephemeral' ||\n      this.props.message.status === 'sending' ||\n      this.props.message.status === 'failed' ||\n      !this.props.channelConfig.reactions ||\n      this.props.initialMessage\n    ) {\n      return;\n    }\n\n    return (\n      <div className=\"str-chat__message-commerce__actions\">\n        <div\n          className=\"str-chat__message-commerce__actions__action str-chat__message-commerce__actions__action--reactions\"\n          onClick={this._clickReactionList}\n        >\n          <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n              d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\"\n              fillRule=\"evenodd\"\n            />\n          </svg>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const {\n      message,\n      groupStyles,\n      Attachment,\n      handleReaction,\n      handleAction,\n      actionsEnabled,\n      onMentionsHoverMessage,\n      onMentionsClickMessage,\n      unsafeHTML,\n      threadList,\n      handleOpenThread,\n      t,\n      tDateTimeParser,\n    } = this.props;\n\n    const when = tDateTimeParser(message.created_at).format('LT');\n\n    const messageClasses = this.isMine()\n      ? 'str-chat__message-commerce str-chat__message-commerce--left'\n      : 'str-chat__message-commerce str-chat__message-commerce--right';\n\n    const hasAttachment = Boolean(\n      message.attachments && message.attachments.length,\n    );\n    const images =\n      hasAttachment &&\n      message.attachments.filter((item) => item.type === 'image');\n    const hasReactions = Boolean(\n      message.latest_reactions && message.latest_reactions.length,\n    );\n\n    if (\n      message.type === 'message.read' ||\n      message.deleted_at ||\n      message.type === 'message.date'\n    ) {\n      return null;\n    }\n\n    if (message.deleted_at) {\n      return (\n        <React.Fragment>\n          <span\n            key={message.id}\n            className={`${messageClasses} str-chat__message--deleted`}\n          >\n            {t('This message was deleted...')}\n          </span>\n          <div className=\"clearfix\" />\n        </React.Fragment>\n      );\n    }\n    return (\n      <React.Fragment>\n        <div\n          key={message.id}\n          className={`\n\t\t\t\t\t\t${messageClasses}\n\t\t\t\t\t\tstr-chat__message-commerce--${message.type}\n\t\t\t\t\t\t${\n              message.text\n                ? 'str-chat__message-commerce--has-text'\n                : 'str-chat__message-commerce--has-no-text'\n            }\n\t\t\t\t\t\t${hasAttachment ? 'str-chat__message-commerce--has-attachment' : ''}\n\t\t\t\t\t\t${hasReactions ? 'str-chat__message-commerce--with-reactions' : ''}\n\t\t\t\t\t\t${`str-chat__message-commerce--${groupStyles[0]}`}\n\t\t\t\t\t`.trim()}\n          onMouseLeave={this._hideOptions}\n          ref={this.messageRef}\n        >\n          {(groupStyles[0] === 'bottom' || groupStyles[0] === 'single') && (\n            <Avatar\n              image={message.user.image}\n              size={32}\n              name={message.user.name || message.user.id}\n            />\n          )}\n          <div className=\"str-chat__message-commerce-inner\">\n            {!message.text && (\n              <React.Fragment>\n                {this.renderOptions()}\n                {/* if reactions show them */}\n                {hasReactions && !this.state.showDetailedReactions && (\n                  <ReactionsList\n                    reactions={message.latest_reactions}\n                    reaction_counts={message.reaction_counts}\n                    onClick={this._clickReactionList}\n                  />\n                )}\n                {this.state.showDetailedReactions && (\n                  <ReactionSelector\n                    reverse={false}\n                    handleReaction={handleReaction}\n                    actionsEnabled={actionsEnabled}\n                    detailedView\n                    reaction_counts={message.reaction_counts}\n                    latest_reactions={message.latest_reactions}\n                    ref={this.reactionSelectorRef}\n                  />\n                )}\n              </React.Fragment>\n            )}\n\n            {hasAttachment &&\n              images.length <= 1 &&\n              message.attachments.map((attachment, index) => (\n                <Attachment\n                  key={`${message.id}-${index}`}\n                  attachment={attachment}\n                  actionHandler={handleAction}\n                />\n              ))}\n            {images.length > 1 && <Gallery images={images} />}\n\n            {message.text && (\n              <div className=\"str-chat__message-commerce-text\">\n                <div\n                  className={`str-chat__message-commerce-text-inner\n\t\t\t\t\t\t\t\t\t${hasAttachment ? 'str-chat__message-commerce-text-inner--has-attachment' : ''}\n\t\t\t\t\t\t\t\t\t${\n                    isOnlyEmojis(message.text)\n                      ? 'str-chat__message-commerce-text-inner--is-emoji'\n                      : ''\n                  }\n                `.trim()}\n                  onMouseOver={onMentionsHoverMessage}\n                  onClick={onMentionsClickMessage}\n                >\n                  {message.type === 'error' && (\n                    <div className=\"str-chat__commerce-message--error-message\">\n                      {t('Error · Unsent')}\n                    </div>\n                  )}\n\n                  {unsafeHTML ? (\n                    <div dangerouslySetInnerHTML={{ __html: message.html }} />\n                  ) : (\n                    renderText(message)\n                  )}\n\n                  {/* if reactions show them */}\n                  {hasReactions && !this.state.showDetailedReactions && (\n                    <ReactionsList\n                      reverse\n                      reactions={message.latest_reactions}\n                      reaction_counts={message.reaction_counts}\n                      onClick={this._clickReactionList}\n                    />\n                  )}\n                  {this.state.showDetailedReactions && (\n                    <ReactionSelector\n                      reverse={false}\n                      handleReaction={handleReaction}\n                      actionsEnabled={actionsEnabled}\n                      detailedView\n                      reaction_counts={message.reaction_counts}\n                      latest_reactions={message.latest_reactions}\n                      ref={this.reactionSelectorRef}\n                    />\n                  )}\n                </div>\n\n                {message.text && this.renderOptions()}\n              </div>\n            )}\n            {!threadList && (\n              <div className=\"str-chat__message-commerce-reply-button\">\n                <MessageRepliesCountButton\n                  onClick={handleOpenThread}\n                  reply_count={message.reply_count}\n                />\n              </div>\n            )}\n            <div className={`str-chat__message-commerce-data`}>\n              {this.isMine() ? (\n                <span className=\"str-chat__message-commerce-name\">\n                  {message.user.name || message.user.id}\n                </span>\n              ) : null}\n              <span className=\"str-chat__message-commerce-timestamp\">\n                {when}\n              </span>\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nMessageCommerce = withTranslationContext(MessageCommerce);\nexport { MessageCommerce };\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslationContext } from '../context';\nimport { ChatAutoComplete } from './ChatAutoComplete';\n\nimport {\n  ImageDropzone,\n  ImagePreviewer,\n  FilePreviewer,\n  FileUploadButton,\n} from 'react-file-utils';\nimport { filterEmoji } from '../utils';\n\nimport { Picker } from 'emoji-mart';\n\n/**\n * MessageInputFlat - Large Message Input to be used for the MessageInput.\n * @example ./docs/MessageInputFlat.md\n */\nclass MessageInputFlat extends PureComponent {\n  static propTypes = {\n    /** Set focus to the text input if this is enabled */\n    focus: PropTypes.bool,\n    /** Grow the textarea while you're typing */\n    grow: PropTypes.bool,\n    /** Disable the textarea */\n    disabled: PropTypes.bool,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    imageOrder: PropTypes.array,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    imageUploads: PropTypes.object,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    removeImage: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    uploadImage: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    uploadNewFiles: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    numberOfUploads: PropTypes.number,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    fileOrder: PropTypes.array,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    fileUploads: PropTypes.object,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    removeFile: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    uploadFile: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    emojiPickerIsOpen: PropTypes.bool,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    emojiPickerRef: PropTypes.object,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    onSelectEmoji: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    getUsers: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    getCommands: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    textareaRef: PropTypes.object,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    handleSubmit: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    handleChange: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    onSelectItem: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    text: PropTypes.string,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    onPaste: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    openEmojiPicker: PropTypes.func,\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\n    watcher_count: PropTypes.number,\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\n    typing: PropTypes.object,\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\n    multipleUploads: PropTypes.object,\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\n    maxNumberOfFiles: PropTypes.number,\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\n    acceptedFiles: PropTypes.object,\n    /**\n     * Custom UI component for send button.\n     *\n     * Defaults to and accepts same props as: [SendButton](https://getstream.github.io/stream-chat-react/#sendbutton)\n     * */\n    SendButton: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /**\n     * Any additional attrubutes that you may want to add for underlying HTML textarea element.\n     */\n    additionalTextareaProps: PropTypes.object,\n  };\n\n  static defaultProps = {\n    grow: true,\n    disabled: false,\n  };\n\n  renderUploads = () => (\n    <>\n      {this.props.imageOrder.length > 0 && (\n        <ImagePreviewer\n          imageUploads={this.props.imageOrder.map(\n            (id) => this.props.imageUploads[id],\n          )}\n          handleRemove={this.props.removeImage}\n          handleRetry={this.props.uploadImage}\n          handleFiles={this.props.uploadNewFiles}\n          multiple={this.props.multipleUploads}\n          disabled={this.props.numberOfUploads >= this.props.maxNumberOfFiles}\n        />\n      )}\n      {this.props.fileOrder.length > 0 && (\n        <div className=\"str-chat__file-uploads\">\n          <FilePreviewer\n            uploads={this.props.fileOrder.map(\n              (id) => this.props.fileUploads[id],\n            )}\n            handleRemove={this.props.removeFile}\n            handleRetry={this.props.uploadFile}\n            handleFiles={this.props.uploadNewFiles}\n          />\n        </div>\n      )}\n    </>\n  );\n\n  renderEmojiPicker = () => {\n    if (this.props.emojiPickerIsOpen) {\n      return (\n        <div\n          className=\"str-chat__input-flat--emojipicker\"\n          ref={this.props.emojiPickerRef}\n        >\n          <Picker\n            native\n            emoji=\"point_up\"\n            title=\"Pick your emoji…\"\n            onSelect={this.props.onSelectEmoji}\n            color=\"#006CFF\"\n            showPreview={false}\n            emojisToShowFilter={filterEmoji}\n          />\n        </div>\n      );\n    }\n  };\n\n  render() {\n    const { t } = this.props;\n    const SendButton = this.props.SendButton;\n    return (\n      <div\n        className={`str-chat__input-flat ${\n          SendButton ? 'str-chat__input-flat--send-button-active' : null\n        }`}\n      >\n        <ImageDropzone\n          accept={this.props.acceptedFiles}\n          multiple={this.props.multipleUploads}\n          disabled={this.props.numberOfUploads >= this.props.maxNumberOfFiles}\n          handleFiles={this.props.uploadNewFiles}\n        >\n          <div className=\"str-chat__input-flat-wrapper\">\n            {this.renderUploads()}\n            {this.renderEmojiPicker()}\n\n            <div className=\"str-chat__input-flat--textarea-wrapper\">\n              <ChatAutoComplete\n                users={this.props.getUsers()}\n                commands={this.props.getCommands()}\n                innerRef={this.props.textareaRef}\n                handleSubmit={(e) => this.props.handleSubmit(e)}\n                onSelectItem={this.props.onSelectItem}\n                onChange={this.props.handleChange}\n                value={this.props.text}\n                rows={1}\n                maxRows={this.props.maxRows}\n                placeholder={t('Type your message')}\n                onPaste={this.props.onPaste}\n                grow={this.props.grow}\n                onFocus={this.props.onFocus}\n                disabled={this.props.disabled}\n                additionalTextareaProps={this.props.additionalTextareaProps}\n              />\n\n              <span\n                className=\"str-chat__input-flat-emojiselect\"\n                onClick={this.props.openEmojiPicker}\n              >\n                <svg width=\"28\" height=\"28\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <path\n                    d=\"M22.217 16.1c.483.25.674.849.423 1.334C21.163 20.294 17.771 22 14 22c-3.867 0-7.347-1.765-8.66-4.605a.994.994 0 0 1 .9-1.407c.385 0 .739.225.9.575C8.135 18.715 10.892 20 14 20c3.038 0 5.738-1.267 6.879-3.476a.99.99 0 0 1 1.338-.424zm1.583-3.652c.341.443.235 1.064-.237 1.384a1.082 1.082 0 0 1-.62.168c-.338 0-.659-.132-.858-.389-.212-.276-.476-.611-1.076-.611-.598 0-.864.337-1.08.614-.197.254-.517.386-.854.386-.224 0-.438-.045-.62-.167-.517-.349-.578-.947-.235-1.388.66-.847 1.483-1.445 2.789-1.445 1.305 0 2.136.6 2.79 1.448zm-14 0c.341.443.235 1.064-.237 1.384a1.082 1.082 0 0 1-.62.168c-.339 0-.659-.132-.858-.389C7.873 13.335 7.61 13 7.01 13c-.598 0-.864.337-1.08.614-.197.254-.517.386-.854.386-.224 0-.438-.045-.62-.167-.518-.349-.579-.947-.235-1.388C4.88 11.598 5.703 11 7.01 11c1.305 0 2.136.6 2.79 1.448zM14 0c7.732 0 14 6.268 14 14s-6.268 14-14 14S0 21.732 0 14 6.268 0 14 0zm8.485 22.485A11.922 11.922 0 0 0 26 14c0-3.205-1.248-6.219-3.515-8.485A11.922 11.922 0 0 0 14 2a11.922 11.922 0 0 0-8.485 3.515A11.922 11.922 0 0 0 2 14c0 3.205 1.248 6.219 3.515 8.485A11.922 11.922 0 0 0 14 26c3.205 0 6.219-1.248 8.485-3.515z\"\n                    fillRule=\"evenodd\"\n                  />\n                </svg>\n              </span>\n              <FileUploadButton\n                multiple={this.props.multipleUploads}\n                disabled={\n                  this.props.numberOfUploads >= this.props.maxNumberOfFiles\n                }\n                accepts={this.props.acceptedFiles}\n                handleFiles={this.props.uploadNewFiles}\n              >\n                <span className=\"str-chat__input-flat-fileupload\">\n                  <svg\n                    width=\"14\"\n                    height=\"14\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path\n                      d=\"M1.667.333h10.666c.737 0 1.334.597 1.334 1.334v10.666c0 .737-.597 1.334-1.334 1.334H1.667a1.333 1.333 0 0 1-1.334-1.334V1.667C.333.93.93.333 1.667.333zm2 1.334a1.667 1.667 0 1 0 0 3.333 1.667 1.667 0 0 0 0-3.333zm-2 9.333v1.333h10.666v-4l-2-2-4 4-2-2L1.667 11z\"\n                      fillRule=\"nonzero\"\n                    />\n                  </svg>\n                </span>\n              </FileUploadButton>\n              {SendButton && (\n                <SendButton sendMessage={this.props.handleSubmit} />\n              )}\n            </div>\n          </div>\n        </ImageDropzone>\n      </div>\n    );\n  }\n}\n\nconst MessageInputFlatWithContext = withTranslationContext(MessageInputFlat);\n\nexport { MessageInputFlatWithContext as MessageInputFlat };\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslationContext } from '../context';\n\nimport { ChatAutoComplete } from './ChatAutoComplete';\nimport { Picker } from 'emoji-mart';\n\nimport {\n  ImageDropzone,\n  ImagePreviewer,\n  FilePreviewer,\n  FileUploadButton,\n} from 'react-file-utils';\nimport { filterEmoji } from '../utils';\n\n/**\n * MessageInputSmall - compact design to be used for the MessageInput. It has all the features of MessageInput minus the typing indicator.\n * @example ./docs/MessageInputSmall.md\n */\nclass MessageInputSmall extends PureComponent {\n  static propTypes = {\n    /** Set focus to the text input if this is enabled */\n    focus: PropTypes.bool.isRequired,\n    /** Grow the textarea while you're typing */\n    grow: PropTypes.bool.isRequired,\n    /** Specify the max amount of rows the textarea is able to grow */\n    maxRows: PropTypes.number.isRequired,\n    /** Make the textarea disabled */\n    disabled: PropTypes.bool,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    imageOrder: PropTypes.array,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    imageUploads: PropTypes.object,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    removeImage: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    uploadImage: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    uploadNewFiles: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    numberOfUploads: PropTypes.number,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    fileOrder: PropTypes.array,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    fileUploads: PropTypes.object,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    removeFile: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    uploadFile: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    emojiPickerIsOpen: PropTypes.bool,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    emojiPickerRef: PropTypes.object,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    onSelectEmoji: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    getUsers: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    getCommands: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    textareaRef: PropTypes.object,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    handleSubmit: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    handleChange: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    onSelectItem: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    text: PropTypes.string,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    onPaste: PropTypes.func,\n    /** @see See [MessageInput](https://getstream.github.io/stream-chat-react/#messageinput) for doc */\n    openEmojiPicker: PropTypes.func,\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\n    watcher_count: PropTypes.number,\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\n    typing: PropTypes.object,\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\n    multipleUploads: PropTypes.object,\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\n    maxNumberOfFiles: PropTypes.number,\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channel) doc */\n    acceptedFiles: PropTypes.object,\n    /**\n     * Custom UI component for send button.\n     *\n     * Defaults to and accepts same props as: [SendButton](https://getstream.github.io/stream-chat-react/#sendbutton)\n     * */\n    SendButton: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /**\n     * Any additional attrubutes that you may want to add for underlying HTML textarea element.\n     */\n    additionalTextareaProps: PropTypes.object,\n  };\n\n  renderUploads = () => (\n    <>\n      {this.props.imageOrder.length > 0 && (\n        <ImagePreviewer\n          imageUploads={this.props.imageOrder.map(\n            (id) => this.props.imageUploads[id],\n          )}\n          handleRemove={this.props.removeImage}\n          handleRetry={this.props.uploadImage}\n          handleFiles={this.props.uploadNewFiles}\n          multiple={this.props.multipleUploads}\n          disabled={\n            this.props.numberOfUploads >= this.props.maxNumberOfFiles\n              ? true\n              : false\n          }\n        />\n      )}\n      {this.props.fileOrder.length > 0 && (\n        <FilePreviewer\n          uploads={this.props.fileOrder.map((id) => this.props.fileUploads[id])}\n          handleRemove={this.props.removeFile}\n          handleRetry={this.props.uploadFile}\n          handleFiles={this.props.uploadNewFiles}\n        />\n      )}\n    </>\n  );\n\n  renderEmojiPicker = () => {\n    if (this.props.emojiPickerIsOpen) {\n      return (\n        <div\n          className=\"str-chat__small-message-input-emojipicker\"\n          ref={this.props.emojiPickerRef}\n        >\n          <Picker\n            native\n            emoji=\"point_up\"\n            title=\"Pick your emoji…\"\n            onSelect={this.props.onSelectEmoji}\n            color=\"#006CFF\"\n            showPreview={false}\n            emojisToShowFilter={filterEmoji}\n          />\n        </div>\n      );\n    }\n  };\n\n  render() {\n    const { t } = this.props;\n    const SendButton = this.props.SendButton;\n    return (\n      <div className=\"str-chat__small-message-input__wrapper\">\n        <ImageDropzone\n          accept={this.props.acceptedFiles}\n          multiple={this.props.multipleUploads}\n          disabled={\n            this.props.numberOfUploads >= this.props.maxNumberOfFiles\n              ? true\n              : false\n          }\n          handleFiles={this.props.uploadNewFiles}\n        >\n          <div\n            className={`str-chat__small-message-input ${\n              SendButton\n                ? 'str-chat__small-message-input--send-button-active'\n                : null\n            }`}\n          >\n            {this.renderUploads()}\n            {this.renderEmojiPicker()}\n            <div className=\"str-chat__small-message-input--textarea-wrapper\">\n              <ChatAutoComplete\n                users={this.props.getUsers()}\n                commands={this.props.getCommands()}\n                innerRef={this.props.textareaRef}\n                handleSubmit={this.props.handleSubmit}\n                onChange={this.props.handleChange}\n                value={this.props.text}\n                rows={1}\n                maxRows={this.props.maxRows}\n                onSelectItem={this.props.onSelectItem}\n                placeholder={t('Type your message')}\n                onPaste={this.props.onPaste}\n                grow={this.props.grow}\n                disabled={this.props.disabled}\n                additionalTextareaProps={this.props.additionalTextareaProps}\n              />\n\n              <span\n                className=\"str-chat__small-message-input-emojiselect\"\n                onClick={this.props.openEmojiPicker}\n              >\n                <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <path\n                    d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\"\n                    fillRule=\"evenodd\"\n                  />\n                </svg>\n              </span>\n              <FileUploadButton\n                multiple={this.props.multipleUploads}\n                disabled={\n                  this.props.numberOfUploads >= this.props.maxNumberOfFiles\n                    ? true\n                    : false\n                }\n                accepts={this.props.acceptedFiles}\n                handleFiles={this.props.uploadNewFiles}\n              >\n                <span\n                  className=\"str-chat__small-message-input-fileupload\"\n                  onClick={this.props.openFilePanel}\n                >\n                  <svg\n                    width=\"14\"\n                    height=\"14\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path\n                      d=\"M7 .5c3.59 0 6.5 2.91 6.5 6.5s-2.91 6.5-6.5 6.5S.5 10.59.5 7 3.41.5 7 .5zm0 12c3.031 0 5.5-2.469 5.5-5.5S10.031 1.5 7 1.5A5.506 5.506 0 0 0 1.5 7c0 3.034 2.469 5.5 5.5 5.5zM7.506 3v3.494H11v1.05H7.506V11h-1.05V7.544H3v-1.05h3.456V3h1.05z\"\n                      fillRule=\"nonzero\"\n                    />\n                  </svg>\n                </span>\n              </FileUploadButton>\n              {SendButton && (\n                <SendButton sendMessage={this.props.handleSubmit} />\n              )}\n            </div>\n          </div>\n        </ImageDropzone>\n      </div>\n    );\n  }\n}\n\nconst MessageInputSmallWithContext = withTranslationContext(MessageInputSmall);\n\nexport { MessageInputSmallWithContext as MessageInputSmall };\n","/* eslint-disable */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nexport class ReverseInfiniteScroll extends Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n    element: PropTypes.node,\n    /** Weather there are more elements to be loaded or not */\n    hasMore: PropTypes.bool,\n    initialLoad: PropTypes.bool,\n    isReverse: PropTypes.bool,\n    loader: PropTypes.node,\n    loadMore: PropTypes.func.isRequired,\n    pageStart: PropTypes.number,\n    threshold: PropTypes.number,\n    useCapture: PropTypes.bool,\n    useWindow: PropTypes.bool,\n    className: PropTypes.string,\n    /** The function is called when the list scrolls */\n    listenToScroll: PropTypes.func,\n  };\n\n  static defaultProps = {\n    element: 'div',\n    hasMore: false,\n    initialLoad: true,\n    pageStart: 0,\n    ref: null,\n    threshold: 250,\n    useWindow: true,\n    isReverse: true,\n    useCapture: false,\n    loader: null,\n    className: 'str-chat__reverse-infinite-scroll',\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.scrollListener = this.scrollListener.bind(this);\n    this.scrollEventCount = 0;\n  }\n\n  componentDidMount() {\n    this.attachScrollListener();\n  }\n\n  componentWillUnmount() {\n    this.detachScrollListener();\n    this.detachMousewheelListener();\n  }\n\n  // Set a defaut loader for all your `InfiniteScroll` components\n  setDefaultLoader(loader) {\n    this.defaultLoader = loader;\n  }\n\n  detachMousewheelListener() {\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = this.scrollComponent.parentNode;\n    }\n\n    scrollEl.removeEventListener(\n      'mousewheel',\n      this.mousewheelListener,\n      this.props.useCapture,\n    );\n  }\n\n  detachScrollListener() {\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = this.getParentElement(this.scrollComponent);\n    }\n\n    scrollEl.removeEventListener(\n      'scroll',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n    scrollEl.removeEventListener(\n      'resize',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n  }\n\n  getParentElement(el) {\n    return el && el.parentNode;\n  }\n\n  filterProps(props) {\n    return props;\n  }\n\n  attachScrollListener() {\n    if (\n      !this.props.hasMore ||\n      this.props.isLoading ||\n      !this.getParentElement(this.scrollComponent)\n    ) {\n      return;\n    }\n\n    let scrollEl = window;\n    if (this.props.useWindow === false) {\n      scrollEl = this.getParentElement(this.scrollComponent);\n    }\n\n    scrollEl.addEventListener(\n      'mousewheel',\n      this.mousewheelListener,\n      this.props.useCapture,\n    );\n    scrollEl.addEventListener(\n      'scroll',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n    scrollEl.addEventListener(\n      'resize',\n      this.scrollListener,\n      this.props.useCapture,\n    );\n\n    if (this.props.initialLoad) {\n      this.scrollListener();\n    }\n  }\n\n  mousewheelListener(e) {\n    // Prevents Chrome hangups\n    // See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\n    if (e.deltaY === 1) {\n      e.preventDefault();\n    }\n  }\n\n  scrollListener() {\n    const el = this.scrollComponent;\n    const scrollEl = window;\n    const parentNode = this.getParentElement(el);\n    this.scrollEventCount += 1;\n\n    let offset;\n    const reverseOffset = parentNode.scrollTop;\n    const standardOffset =\n      el.scrollHeight - parentNode.scrollTop - parentNode.clientHeight;\n    if (this.props.isReverse) {\n      offset = reverseOffset;\n    } else {\n      offset = standardOffset;\n    }\n    if (this.props.listenToScroll) {\n      this.props.listenToScroll(standardOffset, reverseOffset);\n    }\n\n    // a reverse infinite scroll element always starts out at position 0\n    // this counter prevent you from loading content before the user even scrolled\n    if (this.scrollEventCount < 2) {\n      return;\n    }\n\n    // prevent crazy repeat requests in case you don't have more\n    if (!this.props.hasMore || this.props.isLoading) {\n      return;\n    }\n\n    // Here we make sure the element is visible as well as checking the offset\n    if (\n      offset < Number(this.props.threshold) &&\n      el &&\n      el.offsetParent !== null\n    ) {\n      //this.detachScrollListener();\n      // Call loadMore after detachScrollListener to allow for non-async loadMore functions\n      if (typeof this.props.loadMore === 'function') {\n        this.props.loadMore();\n      }\n    }\n  }\n\n  calculateOffset(el, scrollTop) {\n    if (!el) {\n      return 0;\n    }\n\n    return (\n      this.calculateTopPosition(el) +\n      (el.offsetHeight - scrollTop - window.innerHeight)\n    );\n  }\n\n  calculateTopPosition(el) {\n    if (!el) {\n      return 0;\n    }\n    return el.offsetTop + this.calculateTopPosition(el.offsetParent);\n  }\n\n  render() {\n    const renderProps = this.filterProps(this.props);\n    const {\n      children,\n      element,\n      hasMore,\n      initialLoad,\n      isReverse,\n      loader,\n      loadMore,\n      pageStart,\n      ref,\n      threshold,\n      useCapture,\n      useWindow,\n      listenToScroll,\n      isLoading,\n      ...props\n    } = renderProps;\n\n    props.ref = (node) => {\n      this.scrollComponent = node;\n    };\n\n    const childrenArray = [children];\n    if (isLoading) {\n      if (loader) {\n        isReverse ? childrenArray.unshift(loader) : childrenArray.push(loader);\n      } else if (this.defaultLoader) {\n        isReverse\n          ? childrenArray.unshift(this.defaultLoader)\n          : childrenArray.push(this.defaultLoader);\n      }\n    }\n    return React.createElement(element, props, childrenArray);\n  }\n}\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nexport class MessageNotification extends PureComponent {\n  static propTypes = {\n    /** If we should show the notification or not */\n    showNotification: PropTypes.bool,\n    /** Onclick handler */\n    onClick: PropTypes.func.isRequired,\n  };\n\n  static defaultProps = {\n    showNotification: true,\n  };\n\n  render() {\n    if (!this.props.showNotification) {\n      return null;\n    } else {\n      return (\n        <button\n          className=\"str-chat__message-notification\"\n          onClick={this.props.onClick}\n        >\n          {this.props.children}\n        </button>\n      );\n    }\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { Message } from './Message';\nimport { withChannelContext, withTranslationContext } from '../context';\nimport PropTypes from 'prop-types';\nimport { EmptyStateIndicator } from './EmptyStateIndicator';\nimport { ReverseInfiniteScroll } from './ReverseInfiniteScroll';\nimport { MessageNotification } from './MessageNotification';\nimport { MessageSimple } from './MessageSimple';\nimport { Attachment } from './Attachment';\nimport { LoadingIndicator } from './LoadingIndicator';\nimport { DateSeparator } from './DateSeparator';\nimport { EventComponent } from './EventComponent';\nimport { KEY_CODES } from './AutoCompleteTextarea';\nimport deepequal from 'deep-equal';\nimport { MESSAGE_ACTIONS } from '../utils';\n\n/* eslint sonarjs/no-duplicate-string: 0 */\n\n/**\n * MessageList - The message list components renders a list of messages. Its a consumer of [Channel Context](https://getstream.github.io/stream-chat-react/#channel)\n *\n * @example ./docs/MessageList.md\n * @extends PureComponent\n */\nclass MessageList extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      newMessagesNotification: false,\n      editing: '',\n      online: true,\n      notifications: [],\n    };\n\n    this.bottomRef = React.createRef();\n    this.messageList = React.createRef();\n    this.messageRefs = {};\n    this.notificationTimeouts = [];\n  }\n  static propTypes = {\n    /**\n     * Typing indicator UI component to render\n     *\n     * Defaults to and accepts same props as: [TypingIndicator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/TypingIndicator.js)\n     * */\n    TypingIndicator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /**\n     * Date separator UI component to render\n     *\n     * Defaults to and accepts same props as: [DateSeparator](https://github.com/GetStream/stream-chat-react/blob/master/src/components/DateSeparator.js)\n     * */\n    dateSeparator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /** Turn off grouping of messages by user */\n    noGroupByUser: PropTypes.bool,\n    /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n    unsafeHTML: PropTypes.bool,\n    /** Set the limit to use when paginating messages */\n    messageLimit: PropTypes.number,\n    /**\n     * Array of allowed actions on message. e.g. ['edit', 'delete', 'mute', 'flag']\n     * If all the actions need to be disabled, empty array or false should be provided as value of prop.\n     * */\n    messageActions: PropTypes.oneOfType([PropTypes.bool, PropTypes.array]),\n    /**\n     * Boolean weather current message list is a thread.\n     */\n    threadList: PropTypes.bool,\n    /**\n     * Function that returns message/text as string to be shown as notification, when request for flagging a message is successful\n     *\n     * This function should accept following params:\n     *\n     * @param message A [message object](https://getstream.io/chat/docs/#message_format) which is flagged.\n     *\n     * */\n    getFlagMessageSuccessNotification: PropTypes.func,\n    /**\n     * Function that returns message/text as string to be shown as notification, when request for flagging a message runs into error\n     *\n     * This function should accept following params:\n     *\n     * @param message A [message object](https://getstream.io/chat/docs/#message_format) which is flagged.\n     *\n     * */\n    getFlagMessageErrorNotification: PropTypes.func,\n    /**\n     * Function that returns message/text as string to be shown as notification, when request for muting a user is successful\n     *\n     * This function should accept following params:\n     *\n     * @param user A user object which is being muted\n     *\n     * */\n    getMuteUserSuccessNotification: PropTypes.func,\n    /**\n     * Function that returns message/text as string to be shown as notification, when request for muting a user runs into error\n     *\n     * This function should accept following params:\n     *\n     * @param user A user object which is being muted\n     *\n     * */\n    getMuteUserErrorNotification: PropTypes.func,\n    /** **Available from [chat context](https://getstream.github.io/stream-chat-react/#chat)** */\n    client: PropTypes.object,\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n    Attachment: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n    Message: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /**\n     * Custom UI component to display system messages.\n     *\n     * Defaults to and accepts same props as: [EventComponent](https://github.com/GetStream/stream-chat-react/blob/master/src/components/EventComponent.js)\n     */\n    MessageSystem: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /**\n     * The UI Indicator to use when MessagerList or ChannelList is empty\n     * */\n    EmptyStateIndicator: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /**\n     * Component to render at the top of the MessageList\n     * */\n    HeaderComponent: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n    messages: PropTypes.array.isRequired,\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n    channel: PropTypes.object.isRequired,\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n    updateMessage: PropTypes.func.isRequired,\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n    retrySendMessage: PropTypes.func,\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n    removeMessage: PropTypes.func,\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n    onMentionsClick: PropTypes.func,\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n    onMentionsHover: PropTypes.func,\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n    openThread: PropTypes.func,\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n    members: PropTypes.object,\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n    watchers: PropTypes.object,\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n    read: PropTypes.object,\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n    typing: PropTypes.object,\n    /**\n     * Additional props for underlying MessageInput component. We have instance of MessageInput\n     * component in MessageSimple component, for handling edit state.\n     * Available props - https://getstream.github.io/stream-chat-react/#messageinput\n     * */\n    additionalMessageInputProps: PropTypes.object,\n  };\n\n  static defaultProps = {\n    Message: MessageSimple,\n    MessageSystem: EventComponent,\n    threadList: false,\n    Attachment,\n    dateSeparator: DateSeparator,\n    EmptyStateIndicator,\n    unsafeHTML: false,\n    noGroupByUser: false,\n    messageActions: Object.keys(MESSAGE_ACTIONS),\n  };\n\n  connectionChanged = (event) => {\n    if (this.state.online !== event.online) {\n      this.setState({ online: event.online });\n    }\n  };\n\n  componentDidMount() {\n    // start at the bottom\n    this.scrollToBottom();\n    const messageListRect = this.messageList.current.getBoundingClientRect();\n\n    this.setState({\n      messageListRect,\n    });\n\n    this.props.client.on('connection.changed', this.connectionChanged);\n\n    document.addEventListener('keydown', this.keypress);\n  }\n\n  componentWillUnmount() {\n    this.props.client.off('connection.changed', this.connectionChanged);\n\n    document.removeEventListener('keydown', this.keypress);\n    this.notificationTimeouts.forEach((ct) => {\n      clearTimeout(ct);\n    });\n  }\n\n  getSnapshotBeforeUpdate(prevProps) {\n    if (this.props.threadList) {\n      return null;\n    }\n    // Are we adding new items to the list?\n    // Capture the scroll position so we can adjust scroll later.\n\n    if (\n      prevProps.messages.length < this.props.messages.length ||\n      !deepequal(this.props.eventHistory, prevProps.eventHistory)\n    ) {\n      const list = this.messageList.current;\n      return {\n        offsetTop: list.scrollTop,\n        offsetBottom: list.scrollHeight - list.scrollTop,\n      };\n    }\n    return null;\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    // If we have a snapshot value, we've just added new items.\n    // Adjust scroll so these new items don't push the old ones out of view.\n    // (snapshot here is the value returned from getSnapshotBeforeUpdate)\n    const userScrolledUp = this.userScrolledUp();\n    const currentLastMessage = this.props.messages[\n      this.props.messages.length - 1\n    ];\n    const previousLastMessage =\n      prevProps.messages[prevProps.messages.length - 1];\n    if (!previousLastMessage || !currentLastMessage) {\n      return;\n    }\n\n    const hasNewMessage = currentLastMessage.id !== previousLastMessage.id;\n    const isOwner = currentLastMessage.user.id === this.props.client.userID;\n\n    const list = this.messageList.current;\n\n    // always scroll down when it's your own message that you added...\n    const scrollToBottom = hasNewMessage && (isOwner || !userScrolledUp);\n\n    if (scrollToBottom) {\n      this.scrollToBottom();\n      // Scroll further once attachments are laoded.\n      setTimeout(this.scrollToBottom, 100);\n\n      // remove the scroll notification if we already scrolled down...\n      this.state.newMessagesNotification &&\n        this.setState({ newMessagesNotification: false });\n\n      return;\n    }\n\n    if (snapshot !== null) {\n      // Maintain the offsetTop of scroll so that content in viewport doesn't move.\n      // This is for the case where user has scroll up significantly and a new message arrives from someone.\n      if (hasNewMessage) {\n        this.scrollToTarget(snapshot.offsetTop, this.messageList.current);\n      } else {\n        // Maintain the bottomOffset of scroll.\n        // This is for the case of pagination, when more messages get loaded.\n        this.scrollToTarget(\n          list.scrollHeight - snapshot.offsetBottom,\n          this.messageList.current,\n        );\n      }\n    }\n\n    // Check the scroll position... if you're scrolled up show a little notification\n    if (hasNewMessage && !this.state.newMessagesNotification) {\n      this.setState({ newMessagesNotification: true });\n    }\n  }\n\n  keypress = (event) => {\n    if (event.keyCode === KEY_CODES.ESC && this.state.editing) {\n      this.clearEditingState();\n    }\n  };\n\n  scrollToBottom = () => {\n    this._scrollToRef(this.bottomRef, this.messageList);\n  };\n\n  _scrollToRef = (el, parent) => {\n    function scrollDown() {\n      if (el && el.current && parent && parent.current) {\n        this.scrollToTarget(el.current, parent.current);\n      }\n    }\n    scrollDown.call(this);\n    // scroll down after images load again\n    setTimeout(scrollDown.bind(this), 200);\n  };\n\n  /**\n   * target - target to scroll to (DOM element, scrollTop Number, 'top', or 'bottom'\n   * containerEl - DOM element for the container with scrollbars\n   * source: https://stackoverflow.com/a/48429314\n   */\n  scrollToTarget = (target, containerEl) => {\n    // Moved up here for readability:\n    const isElement = target && target.nodeType === 1,\n      isNumber = Object.prototype.toString.call(target) === '[object Number]';\n\n    if (isElement) {\n      containerEl.scrollTop = target.offsetTop;\n    } else if (isNumber) {\n      containerEl.scrollTop = target;\n    } else if (target === 'bottom') {\n      containerEl.scrollTop =\n        containerEl.scrollHeight - containerEl.offsetHeight;\n    } else if (target === 'top') {\n      containerEl.scrollTop = 0;\n    }\n  };\n\n  setEditingState = (message) => {\n    this.setState({\n      editing: message.id,\n    });\n  };\n\n  clearEditingState = (e) => {\n    if (e && e.preventDefault) {\n      e.preventDefault();\n    }\n    this.setState({\n      editing: '',\n    });\n  };\n\n  insertDates = (messages) => {\n    const newMessages = [];\n    for (const [i, message] of messages.entries()) {\n      if (message.type === 'message.read') {\n        newMessages.push(message);\n        continue;\n      }\n      const messageDate = message.created_at.toDateString();\n      let prevMessageDate = messageDate;\n      if (i > 0) {\n        prevMessageDate = messages[i - 1].created_at.toDateString();\n      }\n\n      if (i === 0 || messageDate !== prevMessageDate) {\n        newMessages.push(\n          { type: 'message.date', date: message.created_at },\n          message,\n        );\n      } else {\n        newMessages.push(message);\n      }\n\n      const eventsNextToMessage = this.props.eventHistory[\n        message.id || 'first'\n      ];\n      if (eventsNextToMessage && eventsNextToMessage.length > 0) {\n        eventsNextToMessage.forEach((e) => {\n          newMessages.push({\n            type: 'channel.event',\n            event: e,\n          });\n        });\n      }\n    }\n\n    return newMessages;\n  };\n\n  insertIntro = (messages) => {\n    const newMessages = messages || [];\n    // if no headerPosition is set, HeaderComponent will go at the top\n    if (!this.props.headerPosition) {\n      newMessages.unshift({\n        type: 'channel.intro',\n        // created_at: new Date(0),\n      });\n      return newMessages;\n    }\n\n    // if no messages, intro get's inserted\n    if (!newMessages.length) {\n      newMessages.unshift({\n        type: 'channel.intro',\n      });\n      return newMessages;\n    }\n\n    // else loop over the messages\n    for (const [i, message] of messages.entries()) {\n      const messageTime = message.created_at\n        ? message.created_at.getTime()\n        : null;\n      const nextMessageTime =\n        messages[i + 1] && messages[i + 1].created_at\n          ? messages[i + 1].created_at.getTime()\n          : null;\n      const { headerPosition } = this.props;\n\n      // headerposition is smaller than message time so comes after;\n      if (messageTime < headerPosition) {\n        // if header position is also smaller than message time continue;\n        if (nextMessageTime < headerPosition) {\n          if (messages[i + 1] && messages[i + 1].type === 'message.date')\n            continue;\n          if (!nextMessageTime) {\n            newMessages.push({ type: 'channel.intro' });\n            return newMessages;\n          }\n          continue;\n        } else {\n          newMessages.splice(i + 1, 0, { type: 'channel.intro' });\n          return newMessages;\n        }\n      }\n    }\n\n    return newMessages;\n  };\n\n  goToNewMessages = async () => {\n    await this.scrollToBottom();\n    this.setState({\n      newMessagesNotification: false,\n    });\n  };\n\n  getReadStates = (messages) => {\n    // create object with empty array for each message id\n    const readData = {};\n    for (const message of messages) {\n      if (!message || !message.id) {\n        continue;\n      }\n      readData[message.id] = [];\n    }\n\n    for (const readState of Object.values(this.props.read)) {\n      if (readState.last_read == null) {\n        break;\n      }\n      let userLastReadMsgId;\n      for (const msg of messages) {\n        if (msg.updated_at < readState.last_read) {\n          userLastReadMsgId = msg.id;\n        }\n      }\n      if (userLastReadMsgId) {\n        readData[userLastReadMsgId] = [\n          ...readData[userLastReadMsgId],\n          readState.user,\n        ];\n      }\n    }\n\n    return readData;\n  };\n\n  userScrolledUp = () => this.scrollOffset > 310;\n\n  listenToScroll = (offset) => {\n    this.scrollOffset = offset;\n    if (this.state.newMessagesNotification && !this.userScrolledUp()) {\n      this.setState({\n        newMessagesNotification: false,\n      });\n    }\n  };\n\n  getLastReceived = (messages) => {\n    const l = messages.length;\n    let lastReceivedId = null;\n    for (let i = l; i > 0; i--) {\n      if (\n        messages[i] !== undefined &&\n        messages[i].status !== undefined &&\n        messages[i].status === 'received'\n      ) {\n        lastReceivedId = messages[i].id;\n        break;\n      }\n    }\n    return lastReceivedId;\n  };\n\n  getGroupStyles = (m) => {\n    const l = m.length;\n    const messageGroupStyles = {};\n\n    const messages = [...m];\n\n    for (let i = 0; i < l; i++) {\n      const previousMessage = messages[i - 1];\n      const message = messages[i];\n      const nextMessage = messages[i + 1];\n      const groupStyles = [];\n\n      if (message.type === 'message.date') {\n        continue;\n      }\n\n      if (message.type === 'channel.event') {\n        continue;\n      }\n\n      if (message.type === 'channel.intro') {\n        continue;\n      }\n\n      const userId = message.user.id;\n\n      const isTopMessage =\n        !previousMessage ||\n        previousMessage.type === 'channel.intro' ||\n        previousMessage.type === 'message.date' ||\n        previousMessage.type === 'system' ||\n        previousMessage.type === 'channel.event' ||\n        previousMessage.attachments.length !== 0 ||\n        userId !== previousMessage.user.id ||\n        previousMessage.type === 'error' ||\n        previousMessage.deleted_at;\n\n      const isBottomMessage =\n        !nextMessage ||\n        nextMessage.type === 'message.date' ||\n        nextMessage.type === 'system' ||\n        nextMessage.type === 'channel.event' ||\n        nextMessage.type === 'channel.intro' ||\n        nextMessage.attachments.length !== 0 ||\n        userId !== nextMessage.user.id ||\n        nextMessage.type === 'error' ||\n        nextMessage.deleted_at;\n\n      if (isTopMessage) {\n        groupStyles.push('top');\n      }\n\n      if (isBottomMessage) {\n        if (isTopMessage || message.deleted_at || message.type === 'error') {\n          groupStyles.splice(0, groupStyles.length);\n          groupStyles.push('single');\n        } else {\n          groupStyles.push('bottom');\n        }\n      }\n\n      if (!isTopMessage && !isBottomMessage) {\n        if (message.deleted_at || message.type === 'error') {\n          groupStyles.splice(0, groupStyles.length);\n          groupStyles.push('single');\n        } else {\n          groupStyles.splice(0, groupStyles.length);\n          groupStyles.push('middle');\n        }\n      }\n\n      if (message.attachments.length !== 0) {\n        groupStyles.splice(0, groupStyles.length);\n        groupStyles.push('single');\n      }\n\n      if (this.props.noGroupByUser) {\n        groupStyles.splice(0, groupStyles.length);\n        groupStyles.push('single');\n      }\n\n      messageGroupStyles[message.id] = groupStyles;\n    }\n\n    return messageGroupStyles;\n  };\n\n  _onMentionsHoverOrClick = (e, mentioned_users) => {\n    if (!this.props.onMentionsHover || !this.props.onMentionsClick) return;\n\n    const tagName = e.target.tagName.toLowerCase();\n    const textContent = e.target.innerHTML.replace('*', '');\n    if (tagName === 'strong' && textContent[0] === '@') {\n      const userName = textContent.replace('@', '');\n      const user = mentioned_users.find(\n        (user) => user.name === userName || user.id === userName,\n      );\n      if (this.props.onMentionsHover && e.type === 'mouseover') {\n        this.props.onMentionsHover(e, user);\n      }\n      if (this.props.onMentionsClick && e.type === 'click') {\n        this.props.onMentionsHover(e, user);\n      }\n    }\n  };\n\n  /**\n   * Adds a temporary notification to message list.\n   * Notification will be removed after 5 seconds.\n   *\n   * @param notificationText  Text of notification to be added\n   * @param type              Type of notification. success | error\n   */\n  addNotification = (notificationText, type) => {\n    if (typeof notificationText !== 'string') return;\n    if (type !== 'success' && type !== 'error') return;\n\n    const nextIndex = new Date();\n\n    const newNotifications = [...this.state.notifications];\n    newNotifications.push({\n      id: nextIndex,\n      text: notificationText,\n      type,\n    });\n    this.setState({\n      notifications: newNotifications,\n    });\n\n    // remove the notification after 5000 ms\n    const ct = setTimeout(() => {\n      const index = this.state.notifications.findIndex((notification) => {\n        if (notification.id === nextIndex) return true;\n        return false;\n      });\n      const newNotifications = [...this.state.notifications];\n      newNotifications.splice(index, 1);\n      this.setState({\n        notifications: newNotifications,\n      });\n    }, 5000);\n\n    this.notificationTimeouts.push(ct);\n  };\n\n  _loadMore = () =>\n    this.props.messageLimit\n      ? this.props.loadMore(this.props.messageLimit)\n      : this.props.loadMore();\n\n  // eslint-disable-next-line\n  render() {\n    let allMessages = [...this.props.messages];\n    const MessageSystem = this.props.MessageSystem;\n    allMessages = this.insertDates(allMessages);\n    if (this.props.HeaderComponent) {\n      allMessages = this.insertIntro(allMessages);\n    }\n    const messageGroupStyles = this.getGroupStyles(allMessages);\n\n    const {\n      TypingIndicator,\n      dateSeparator: DateSeparator,\n      HeaderComponent,\n      EmptyStateIndicator,\n      t,\n    } = this.props;\n\n    // sort by date\n    allMessages.sort((a, b) => a.created_at - b.created_at);\n\n    // get the readData, but only for messages submitted by the user themselves\n    const readData = this.getReadStates(\n      allMessages.filter(\n        ({ user }) => user && user.id === this.props.client.userID,\n      ),\n    );\n\n    const lastReceivedId = this.getLastReceived(allMessages);\n    const elements = [];\n\n    // loop over the messages\n    for (const message of allMessages) {\n      if (message.id) {\n        this.messageRefs[message.id] = React.createRef();\n      }\n\n      if (message.type === 'message.date') {\n        if (this.props.threadList) {\n          continue;\n        }\n        elements.push(\n          <li key={message.date.toISOString() + '-i'}>\n            <DateSeparator date={message.date} />\n          </li>,\n        );\n      } else if (message.type === 'channel.intro') {\n        elements.push(\n          <li key=\"intro\">\n            <HeaderComponent />\n          </li>,\n        );\n      } else if (\n        message.type === 'channel.event' ||\n        message.type === 'system'\n      ) {\n        MessageSystem &&\n          elements.push(\n            <li\n              key={\n                message.type === 'system'\n                  ? message.created_at\n                  : message.type === 'channel.event'\n                  ? message.event.created_at\n                  : ''\n              }\n            >\n              <MessageSystem message={message} />\n            </li>,\n          );\n      } else if (message.type !== 'message.read') {\n        let groupStyles = messageGroupStyles[message.id];\n        if (!groupStyles) {\n          groupStyles = [];\n        }\n        const readBy = readData[message.id] || [];\n\n        elements.push(\n          <li\n            className={`str-chat__li str-chat__li--${groupStyles}`}\n            key={message.id || message.created_at}\n            ref={this.messageRefs[message.id]}\n          >\n            <Message\n              client={this.props.client}\n              openThread={this.props.openThread}\n              members={this.props.members}\n              watchers={this.props.watchers}\n              message={message}\n              groupStyles={groupStyles}\n              readBy={readBy}\n              lastReceivedId={\n                lastReceivedId === message.id ? lastReceivedId : null\n              }\n              editing={\n                !!(this.state.editing && this.state.editing === message.id)\n              }\n              clearEditingState={this.clearEditingState}\n              setEditingState={this.setEditingState}\n              messageListRect={this.state.messageListRect}\n              channel={this.props.channel}\n              threadList={this.props.threadList}\n              retrySendMessage={this.props.retrySendMessage}\n              addNotification={this.addNotification}\n              updateMessage={this.props.updateMessage}\n              removeMessage={this.props.removeMessage}\n              Message={this.props.Message}\n              unsafeHTML={this.props.unsafeHTML}\n              Attachment={this.props.Attachment}\n              onMentionsClick={this.props.onMentionsClick}\n              onMentionsHover={this.props.onMentionsHover}\n              messageActions={this.props.messageActions}\n              additionalMessageInputProps={\n                this.props.additionalMessageInputProps\n              }\n              getFlagMessageSuccessNotification={\n                this.props.getFlagMessageSuccessNotification\n              }\n              getFlagMessageErrorNotification={\n                this.props.getFlagMessageErrorNotification\n              }\n              getMuteUserSuccessNotification={\n                this.props.getMuteUserSuccessNotification\n              }\n              getMuteUserErrorNotification={\n                this.props.getMuteUserErrorNotification\n              }\n            />\n          </li>,\n        );\n      }\n    }\n    return (\n      <React.Fragment>\n        <div\n          className={`str-chat__list ${\n            this.props.threadList ? 'str-chat__list--thread' : ''\n          }`}\n          ref={this.messageList}\n        >\n          {!elements.length ? (\n            <EmptyStateIndicator listType=\"message\" />\n          ) : (\n            <ReverseInfiniteScroll\n              loadMore={this._loadMore}\n              hasMore={this.props.hasMore}\n              isLoading={this.props.loadingMore}\n              listenToScroll={this.listenToScroll}\n              useWindow={false}\n              loader={\n                <Center key=\"loadingindicator\">\n                  <LoadingIndicator size={20} />\n                </Center>\n              }\n            >\n              <ul className=\"str-chat__ul\">{elements}</ul>\n              {this.props.TypingIndicator && (\n                <TypingIndicator\n                  typing={this.props.typing}\n                  client={this.props.client}\n                />\n              )}\n              <div key=\"bottom\" ref={this.bottomRef} />\n            </ReverseInfiniteScroll>\n          )}\n        </div>\n\n        <div className=\"str-chat__list-notifications\">\n          {this.state.notifications.map((notification) => (\n            <Notification\n              active={true}\n              key={notification.id}\n              type={notification.type}\n            >\n              {notification.text}\n            </Notification>\n          ))}\n          <Notification active={!this.state.online} type=\"error\">\n            {t('Connection failure, reconnecting now...')}\n          </Notification>\n\n          <MessageNotification\n            showNotification={this.state.newMessagesNotification}\n            onClick={() => this.goToNewMessages()}\n          >\n            {t('New Messages!')}\n          </MessageNotification>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nMessageList = withChannelContext(withTranslationContext(MessageList));\nexport { MessageList };\n\nconst Center = ({ children }) => (\n  <div className=\"str-chat__list__center\">{children}</div>\n);\n\nconst Notification = ({ children, active, type }) => {\n  if (active) {\n    return (\n      <div className={`str-chat__custom-notification notification-${type}`}>\n        {children}\n      </div>\n    );\n  }\n  return null;\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { NimbleEmoji } from 'emoji-mart';\n\nimport { defaultMinimalEmojis, emojiSetDef, emojiData } from '../utils';\n\nexport class SimpleReactionsList extends React.PureComponent {\n  static propTypes = {\n    reactions: PropTypes.array,\n    /** Object/map of reaction id/type (e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry') vs count */\n    reaction_counts: PropTypes.object,\n    showTooltip: PropTypes.bool,\n    /** Provide a list of reaction options [{name: 'angry', emoji: 'angry'}] */\n    reactionOptions: PropTypes.array,\n    /**\n     * Handler to set/unset reaction on message.\n     *\n     * @param type e.g. 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n     * */\n    handleReaction: PropTypes.func,\n  };\n\n  static defaultProps = {\n    showTooltip: true,\n    reactionOptions: defaultMinimalEmojis,\n    emojiSetDef,\n  };\n\n  state = {\n    showTooltip: false,\n    users: [],\n  };\n\n  showTooltip = () => {\n    this.setState({\n      showTooltip: true,\n    });\n  };\n\n  hideTooltip = () => {\n    this.setState({\n      showTooltip: false,\n    });\n  };\n\n  handleReaction = (e, type) => {\n    if (e !== undefined && e.preventDefault) {\n      e.preventDefault();\n    }\n    this.props.handleReaction(type);\n    this.setUsernames(type);\n  };\n\n  getReactionCount = () => {\n    const reaction_counts = this.props.reaction_counts;\n    let count = null;\n    if (\n      reaction_counts !== null &&\n      reaction_counts !== undefined &&\n      Object.keys(reaction_counts).length > 0\n    ) {\n      count = 0;\n      Object.keys(reaction_counts).map(\n        (key) => (count += reaction_counts[key]),\n      );\n    }\n    return count;\n  };\n\n  renderUsers = (users) =>\n    users.map((user, i) => {\n      let text = user;\n      if (i + 1 < users.length) {\n        text += ', ';\n      }\n      return (\n        <span className=\"latest-user-username\" key={`key-${i}-${user}`}>\n          {text}\n        </span>\n      );\n    });\n\n  getReactionsByType = (reactions) => {\n    const reactionsByType = {};\n    reactions.map((item) => {\n      if (reactionsByType[item.type] === undefined) {\n        return (reactionsByType[item.type] = [item]);\n      } else {\n        return (reactionsByType[item.type] = [\n          ...reactionsByType[item.type],\n          item,\n        ]);\n      }\n    });\n    return reactionsByType;\n  };\n\n  renderReactions = (reactions) => {\n    const reactionsByType = this.getReactionsByType(reactions);\n    const reactionsEmojis = this.props.reactionOptions.reduce(\n      (acc, cur) => ({ ...acc, [cur.id]: cur }),\n      {},\n    );\n    return Object.keys(reactionsByType).map((type, i) => (\n      <li\n        className=\"str-chat__simple-reactions-list-item\"\n        key={`${reactionsByType[type][0].id}-${i}`}\n        onClick={(e) => this.handleReaction(e, type)}\n      >\n        <span onMouseEnter={() => this.setUsernames(type)}>\n          <NimbleEmoji\n            emoji={reactionsEmojis[type]}\n            {...emojiSetDef}\n            size={13}\n            data={emojiData}\n          />\n          &nbsp;\n        </span>\n      </li>\n    ));\n  };\n\n  getUsernames = (reactions) =>\n    reactions.map((item) =>\n      item.user !== null ? item.user.name || item.user.id : 'null',\n    );\n\n  setUsernames = (type) => {\n    const reactionsByType = this.getReactionsByType(this.props.reactions);\n\n    const reactions = reactionsByType[type];\n    const users = this.getUsernames(reactions);\n\n    this.setState(\n      {\n        users,\n      },\n      () => this.showTooltip(),\n    );\n  };\n\n  renderUsernames = (users) => users.join(', ');\n\n  render() {\n    const { reactions } = this.props;\n    if (!reactions || reactions.length === 0) {\n      return null;\n    }\n    return (\n      <ul\n        className=\"str-chat__simple-reactions-list\"\n        onMouseLeave={this.hideTooltip}\n      >\n        {this.state.showTooltip && (\n          <div\n            className=\"str-chat__simple-reactions-list-tooltip\"\n            ref={this.reactionSelectorTooltip}\n          >\n            <div className=\"arrow\" />\n            {this.renderUsernames(this.state.users)}\n          </div>\n        )}\n        {this.renderReactions(reactions)}\n        {reactions.length !== 0 && (\n          <li className=\"str-chat__simple-reactions-list-item--last-number\">\n            {this.getReactionCount()}\n          </li>\n        )}\n      </ul>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Avatar } from './Avatar';\nimport { Attachment } from './Attachment';\nimport { MessageActionsBox } from './MessageActionsBox';\nimport { ReactionSelector } from './ReactionSelector';\nimport { SimpleReactionsList } from './SimpleReactionsList';\nimport { MessageInput } from './MessageInput';\nimport { EditMessageForm } from './EditMessageForm';\nimport { Gallery } from './Gallery';\nimport { MessageRepliesCountButton } from './MessageRepliesCountButton';\n\nimport { isOnlyEmojis, renderText } from '../utils';\nimport { withTranslationContext } from '../context';\n\nconst reactionSvg =\n  '<svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\" fillRule=\"evenodd\"/></svg>';\nconst threadSvg =\n  '<svg width=\"14\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z\" fillRule=\"evenodd\" /></svg>';\nconst optionsSvg =\n  '<svg width=\"11\" height=\"3\" viewBox=\"0 0 11 3\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M1.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z\" fillRule=\"nonzero\" /></svg>';\n\n/**\n * MessageLivestream - Render component, should be used together with the Message component\n * Implements the look and feel for a livestream use case.\n *\n * @example ./docs/MessageLivestream.md\n * @extends PureComponent\n */\nclass MessageLivestream extends React.PureComponent {\n  static propTypes = {\n    /** The [message object](https://getstream.io/chat/docs/#message_format) */\n    message: PropTypes.object,\n    /**\n     * The attachment UI component.\n     * Default: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\n     * */\n    Attachment: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /**\n     *\n     * @deprecated Its not recommended to use this anymore. All the methods in this HOC are provided explicitly.\n     *\n     * The higher order message component, most logic is delegated to this component\n     * @see See [Message HOC](https://getstream.github.io/stream-chat-react/#message) for example\n     *\n     * */\n    Message: PropTypes.oneOfType([\n      PropTypes.node,\n      PropTypes.func,\n      PropTypes.object,\n    ]).isRequired,\n    /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n    unsafeHTML: PropTypes.bool,\n    /** If its parent message in thread. */\n    initialMessage: PropTypes.bool,\n    /** Channel config object */\n    channelConfig: PropTypes.object,\n    /** If component is in thread list */\n    threadList: PropTypes.bool,\n    /** Function to open thread on current messxage */\n    handleOpenThread: PropTypes.func,\n    /** If the message is in edit state */\n    editing: PropTypes.bool,\n    /** Function to exit edit state */\n    clearEditingState: PropTypes.func,\n    /** Returns true if message belongs to current user */\n    isMyMessage: PropTypes.func,\n    /**\n     * Returns all allowed actions on message by current user e.g., [edit, delete, flag, mute]\n     * Please check [Message](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Message.js) component for default implementation.\n     * */\n    getMessageActions: PropTypes.func,\n    /**\n     * Function to publish updates on message to channel\n     *\n     * @param message Updated [message object](https://getstream.io/chat/docs/#message_format)\n     * */\n    updateMessage: PropTypes.func,\n    /**\n     * Reattempt sending a message\n     * @param message A [message object](https://getstream.io/chat/docs/#message_format) to resent.\n     */\n    handleRetry: PropTypes.func,\n    /**\n     * Add or remove reaction on message\n     *\n     * @param type Type of reaction - 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n     * @param event Dom event which triggered this function\n     */\n    handleReaction: PropTypes.func,\n    /** If actions such as edit, delete, flag, mute are enabled on message */\n    actionsEnabled: PropTypes.bool,\n    /** DOMRect object for parent MessageList component */\n    messageListRect: PropTypes.object,\n    /**\n     * Handler for actions. Actions in combination with attachments can be used to build [commands](https://getstream.io/chat/docs/#channel_commands).\n     *\n     * @param name {string} Name of action\n     * @param value {string} Value of action\n     * @param event Dom event that triggered this handler\n     */\n    handleAction: PropTypes.func,\n    /**\n     * The handler for hover event on @mention in message\n     *\n     * @param event Dom hover event which triggered handler.\n     * @param user Target user object\n     */\n    onMentionsHoverMessage: PropTypes.func,\n    /**\n     * The handler for click event on @mention in message\n     *\n     * @param event Dom click event which triggered handler.\n     * @param user Target user object\n     */\n    onMentionsClickMessage: PropTypes.func,\n  };\n\n  static defaultProps = {\n    Attachment,\n  };\n\n  state = {\n    actionsBoxOpen: false,\n    reactionSelectorOpen: false,\n  };\n\n  reactionSelectorRef = React.createRef();\n  editMessageFormRef = React.createRef();\n\n  isMine() {\n    return this.props.isMyMessage(this.props.message);\n  }\n\n  onClickReactionsAction = () => {\n    this.setState(\n      {\n        reactionSelectorOpen: true,\n      },\n      () => document.addEventListener('click', this.hideReactions, false),\n    );\n  };\n\n  onClickOptionsAction = () => {\n    this.setState(\n      {\n        actionsBoxOpen: true,\n      },\n      () => document.addEventListener('click', this.hideOptions, false),\n    );\n  };\n\n  hideOptions = () => {\n    this.setState({\n      actionsBoxOpen: false,\n    });\n    document.removeEventListener('click', this.hideOptions, false);\n  };\n\n  hideReactions = (e) => {\n    if (\n      !this.reactionSelectorRef.current.reactionSelector.current.contains(\n        e.target,\n      )\n    ) {\n      this.setState({\n        reactionSelectorOpen: false,\n      });\n      document.removeEventListener('click', this.hideReactions, false);\n    }\n  };\n\n  onMouseLeaveMessage = () => {\n    this.hideOptions();\n    this.setState(\n      {\n        reactionSelectorOpen: false,\n      },\n      () => document.removeEventListener('click', this.hideReactions, false),\n    );\n  };\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.hideOptions, false);\n    document.removeEventListener('click', this.hideReactions, false);\n  }\n\n  render() {\n    const {\n      Attachment,\n      message,\n      groupStyles,\n      editing,\n      clearEditingState,\n      updateMessage,\n      initialMessage,\n      handleReaction,\n      actionsEnabled,\n      messageListRect,\n      channelConfig,\n      threadList,\n      handleOpenThread,\n      Message,\n      onMentionsHoverMessage,\n      onMentionsClickMessage,\n      unsafeHTML,\n      handleRetry,\n      handleAction,\n      getMessageActions,\n      isMyMessage,\n      handleFlag,\n      handleMute,\n      handleEdit,\n      handleDelete,\n      t,\n      tDateTimeParser,\n    } = this.props;\n    const hasAttachment = Boolean(\n      message.attachments && message.attachments.length,\n    );\n\n    let galleryImages = message.attachments.filter(\n      (item) => item.type === 'image',\n    );\n    let attachments = message.attachments;\n    if (galleryImages.length > 1) {\n      attachments = message.attachments.filter((item) => item.type !== 'image');\n    } else {\n      galleryImages = [];\n    }\n\n    if (message.type === 'message.read') {\n      return null;\n    }\n\n    if (message.type === 'message.date') {\n      return null;\n    }\n\n    if (message.deleted_at) {\n      return null;\n    }\n\n    if (editing) {\n      return (\n        <div\n          className={`str-chat__message-team str-chat__message-team--${groupStyles[0]} str-chat__message-team--editing`}\n          onMouseLeave={this.onMouseLeaveMessage}\n        >\n          {(groupStyles[0] === 'top' || groupStyles[0] === 'single') && (\n            <div className=\"str-chat__message-team-meta\">\n              <Avatar\n                image={message.user.image}\n                name={message.user.name || message.user.id}\n                size={40}\n              />\n            </div>\n          )}\n          <MessageInput\n            Input={EditMessageForm}\n            message={message}\n            clearEditingState={clearEditingState}\n            updateMessage={updateMessage}\n          />\n        </div>\n      );\n    }\n\n    return (\n      <React.Fragment>\n        <div\n          className={`str-chat__message-livestream str-chat__message-livestream--${\n            groupStyles[0]\n          } str-chat__message-livestream--${\n            message.type\n          } str-chat__message-livestream--${message.status} ${\n            initialMessage\n              ? 'str-chat__message-livestream--initial-message'\n              : ''\n          }`}\n          onMouseLeave={this.onMouseLeaveMessage}\n        >\n          {this.state.reactionSelectorOpen && (\n            <ReactionSelector\n              reverse={false}\n              handleReaction={handleReaction}\n              actionsEnabled={actionsEnabled}\n              detailedView\n              latest_reactions={message.latest_reactions}\n              reaction_counts={message.reaction_counts}\n              messageList={messageListRect}\n              ref={this.reactionSelectorRef}\n            />\n          )}\n          {!initialMessage &&\n            message.type !== 'error' &&\n            message.type !== 'system' &&\n            message.type !== 'ephemeral' &&\n            message.status !== 'failed' &&\n            message.status !== 'sending' && (\n              <div className={`str-chat__message-livestream-actions`}>\n                <span className={`str-chat__message-livestream-time`}>\n                  {tDateTimeParser(message.created_at).format('h:mmA')}\n                </span>\n                {channelConfig && channelConfig.reactions && (\n                  <span onClick={this.onClickReactionsAction}>\n                    <span\n                      dangerouslySetInnerHTML={{\n                        __html: reactionSvg,\n                      }}\n                    />\n                  </span>\n                )}\n                {!threadList && channelConfig && channelConfig.replies && (\n                  <span\n                    dangerouslySetInnerHTML={{\n                      __html: threadSvg,\n                    }}\n                    onClick={(e) => handleOpenThread(e, message)}\n                  />\n                )}\n                {getMessageActions().length > 0 && (\n                  <span onClick={this.onClickOptionsAction}>\n                    <span\n                      dangerouslySetInnerHTML={{\n                        __html: optionsSvg,\n                      }}\n                    />\n                    <MessageActionsBox\n                      getMessageActions={getMessageActions}\n                      open={this.state.actionsBoxOpen}\n                      Message={Message}\n                      message={message}\n                      messageListRect={messageListRect}\n                      mine={isMyMessage(message)}\n                      handleFlag={handleFlag}\n                      handleMute={handleMute}\n                      handleEdit={handleEdit}\n                      handleDelete={handleDelete}\n                    />\n                  </span>\n                )}\n              </div>\n            )}\n\n          <div className={`str-chat__message-livestream-left`}>\n            <Avatar\n              image={message.user.image}\n              name={message.user.name || message.user.id}\n              size={30}\n            />\n          </div>\n          <div className={`str-chat__message-livestream-right`}>\n            <div className={`str-chat__message-livestream-content`}>\n              <div className=\"str-chat__message-livestream-author\">\n                <strong>{message.user.name || message.user.id}</strong>\n                {message.type === 'error' && (\n                  <div className=\"str-chat__message-team-error-header\">\n                    {t('Only visible to you')}\n                  </div>\n                )}\n              </div>\n\n              <div\n                className={\n                  isOnlyEmojis(message.text)\n                    ? 'str-chat__message-livestream-text--is-emoji'\n                    : ''\n                }\n                onMouseOver={onMentionsHoverMessage}\n                onClick={onMentionsClickMessage}\n              >\n                {message.type !== 'error' &&\n                  message.status !== 'failed' &&\n                  !unsafeHTML &&\n                  renderText(message)}\n\n                {message.type !== 'error' &&\n                  message.status !== 'failed' &&\n                  unsafeHTML && (\n                    <div dangerouslySetInnerHTML={{ __html: message.html }} />\n                  )}\n\n                {message.type === 'error' && !message.command && (\n                  <p>\n                    <svg\n                      width=\"14\"\n                      height=\"14\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                    >\n                      <path\n                        d=\"M7 0a7 7 0 1 0 0 14A7 7 0 0 0 7 0zm.875 10.938a.438.438 0 0 1-.438.437h-.875a.438.438 0 0 1-.437-.438v-.874c0-.242.196-.438.438-.438h.875c.241 0 .437.196.437.438v.874zm0-2.626a.438.438 0 0 1-.438.438h-.875a.438.438 0 0 1-.437-.438v-5.25c0-.241.196-.437.438-.437h.875c.241 0 .437.196.437.438v5.25z\"\n                        fill=\"#EA152F\"\n                        fillRule=\"evenodd\"\n                      />\n                    </svg>\n                    {message.text}\n                  </p>\n                )}\n\n                {message.type === 'error' && message.command && (\n                  <p>\n                    <svg\n                      width=\"14\"\n                      height=\"14\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                    >\n                      <path\n                        d=\"M7 0a7 7 0 1 0 0 14A7 7 0 0 0 7 0zm.875 10.938a.438.438 0 0 1-.438.437h-.875a.438.438 0 0 1-.437-.438v-.874c0-.242.196-.438.438-.438h.875c.241 0 .437.196.437.438v.874zm0-2.626a.438.438 0 0 1-.438.438h-.875a.438.438 0 0 1-.437-.438v-5.25c0-.241.196-.437.438-.437h.875c.241 0 .437.196.437.438v5.25z\"\n                        fill=\"#EA152F\"\n                        fillRule=\"evenodd\"\n                      />\n                    </svg>\n                    {/* TODO: Translate following sentence */}\n                    <strong>/{message.command}</strong> is not a valid command\n                  </p>\n                )}\n                {message.status === 'failed' && (\n                  <p onClick={handleRetry.bind(this, message)}>\n                    <svg\n                      width=\"14\"\n                      height=\"14\"\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                    >\n                      <path\n                        d=\"M7 0a7 7 0 1 0 0 14A7 7 0 0 0 7 0zm.875 10.938a.438.438 0 0 1-.438.437h-.875a.438.438 0 0 1-.437-.438v-.874c0-.242.196-.438.438-.438h.875c.241 0 .437.196.437.438v.874zm0-2.626a.438.438 0 0 1-.438.438h-.875a.438.438 0 0 1-.437-.438v-5.25c0-.241.196-.437.438-.437h.875c.241 0 .437.196.437.438v5.25z\"\n                        fill=\"#EA152F\"\n                        fillRule=\"evenodd\"\n                      />\n                    </svg>\n                    {t('Message failed. Click to try again.')}\n                  </p>\n                )}\n              </div>\n\n              {hasAttachment &&\n                attachments.map((attachment, index) => (\n                  <Attachment\n                    key={`${message.id}-${index}`}\n                    attachment={attachment}\n                    actionHandler={handleAction}\n                  />\n                ))}\n\n              {galleryImages.length !== 0 && <Gallery images={galleryImages} />}\n\n              <SimpleReactionsList\n                reaction_counts={message.reaction_counts}\n                reactions={message.latest_reactions}\n                handleReaction={handleReaction}\n              />\n\n              {!initialMessage && (\n                <MessageRepliesCountButton\n                  onClick={handleOpenThread}\n                  reply_count={message.reply_count}\n                />\n              )}\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nMessageLivestream = withTranslationContext(MessageLivestream);\nexport { MessageLivestream };\n","import React, { PureComponent } from 'react';\nimport { Attachment } from './Attachment';\nimport { Avatar } from './Avatar';\nimport { MessageActionsBox } from './MessageActionsBox';\nimport { ReactionSelector } from './ReactionSelector';\nimport { EditMessageForm } from './EditMessageForm';\nimport { SimpleReactionsList } from './SimpleReactionsList';\nimport { MessageRepliesCountButton } from './MessageRepliesCountButton';\nimport { LoadingIndicator } from './LoadingIndicator';\nimport { Tooltip } from './Tooltip';\nimport { Gallery } from './Gallery';\nimport { MessageInput } from './MessageInput';\nimport PropTypes from 'prop-types';\nimport { isOnlyEmojis, renderText, getReadByTooltipText } from '../utils';\nimport { withTranslationContext } from '../context';\n\nconst reactionSvg =\n  '<svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M11.108 8.05a.496.496 0 0 1 .212.667C10.581 10.147 8.886 11 7 11c-1.933 0-3.673-.882-4.33-2.302a.497.497 0 0 1 .9-.417C4.068 9.357 5.446 10 7 10c1.519 0 2.869-.633 3.44-1.738a.495.495 0 0 1 .668-.212zm.792-1.826a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.298 0-.431.168-.54.307A.534.534 0 0 1 9.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zm-7 0a.477.477 0 0 1-.119.692.541.541 0 0 1-.31.084.534.534 0 0 1-.428-.194c-.106-.138-.238-.306-.539-.306-.299 0-.432.168-.54.307A.533.533 0 0 1 2.538 7a.544.544 0 0 1-.31-.084.463.463 0 0 1-.117-.694c.33-.423.742-.722 1.394-.722.653 0 1.068.3 1.396.724zM7 0a7 7 0 1 1 0 14A7 7 0 0 1 7 0zm4.243 11.243A5.96 5.96 0 0 0 13 7a5.96 5.96 0 0 0-1.757-4.243A5.96 5.96 0 0 0 7 1a5.96 5.96 0 0 0-4.243 1.757A5.96 5.96 0 0 0 1 7a5.96 5.96 0 0 0 1.757 4.243A5.96 5.96 0 0 0 7 13a5.96 5.96 0 0 0 4.243-1.757z\" fillRule=\"evenodd\"/></svg>';\nconst threadSvg =\n  '<svg width=\"14\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M8.516 3c4.78 0 4.972 6.5 4.972 6.5-1.6-2.906-2.847-3.184-4.972-3.184v2.872L3.772 4.994 8.516.5V3zM.484 5l4.5-4.237v1.78L2.416 5l2.568 2.125v1.828L.484 5z\" fillRule=\"evenodd\" /></svg>';\nconst optionsSvg =\n  '<svg width=\"11\" height=\"3\" viewBox=\"0 0 11 3\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M1.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm4 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z\" fillRule=\"nonzero\" /></svg>';\n\n/**\n * MessageTeam - Render component, should be used together with the Message component\n * Implements the look and feel for a team style collaboration environment\n *\n * @example ./docs/MessageTeam.md\n * @extends PureComponent\n */\nclass MessageTeam extends PureComponent {\n  static propTypes = {\n    /** The [message object](https://getstream.io/chat/docs/#message_format) */\n    message: PropTypes.object,\n    /**\n     * The attachment UI component.\n     * Default: [Attachment](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Attachment.js)\n     * */\n    Attachment: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /**\n     *\n     * @deprecated Its not recommended to use this anymore. All the methods in this HOC are provided explicitly.\n     *\n     * The higher order message component, most logic is delegated to this component\n     * @see See [Message HOC](https://getstream.github.io/stream-chat-react/#message) for example\n     * */\n    Message: PropTypes.oneOfType([\n      PropTypes.node,\n      PropTypes.func,\n      PropTypes.object,\n    ]).isRequired,\n    /** render HTML instead of markdown. Posting HTML is only allowed server-side */\n    unsafeHTML: PropTypes.bool,\n    /** Client object */\n    client: PropTypes.object,\n    /** If its parent message in thread. */\n    initialMessage: PropTypes.bool,\n    /** Channel config object */\n    channelConfig: PropTypes.object,\n    /** If component is in thread list */\n    threadList: PropTypes.bool,\n    /** Function to open thread on current messxage */\n    handleOpenThread: PropTypes.func,\n    /** If the message is in edit state */\n    editing: PropTypes.bool,\n    /** Function to exit edit state */\n    clearEditingState: PropTypes.func,\n    /** Returns true if message belongs to current user */\n    isMyMessage: PropTypes.func,\n    /**\n     * Returns all allowed actions on message by current user e.g., [edit, delete, flag, mute]\n     * Please check [Message](https://github.com/GetStream/stream-chat-react/blob/master/src/components/Message.js) component for default implementation.\n     * */\n    getMessageActions: PropTypes.func,\n    /**\n     * Function to publish updates on message to channel\n     *\n     * @param message Updated [message object](https://getstream.io/chat/docs/#message_format)\n     * */\n    updateMessage: PropTypes.func,\n    /**\n     * Reattempt sending a message\n     * @param message A [message object](https://getstream.io/chat/docs/#message_format) to resent.\n     */\n    handleRetry: PropTypes.func,\n    /**\n     * Add or remove reaction on message\n     *\n     * @param type Type of reaction - 'like' | 'love' | 'haha' | 'wow' | 'sad' | 'angry'\n     * @param event Dom event which triggered this function\n     */\n    handleReaction: PropTypes.func,\n    /** DOMRect object for parent MessageList component */\n    messageListRect: PropTypes.object,\n    /**\n     * Handler for actions. Actions in combination with attachments can be used to build [commands](https://getstream.io/chat/docs/#channel_commands).\n     *\n     * @param name {string} Name of action\n     * @param value {string} Value of action\n     * @param event Dom event that triggered this handler\n     */\n    handleAction: PropTypes.func,\n    /**\n     * The handler for hover event on @mention in message\n     *\n     * @param event Dom hover event which triggered handler.\n     * @param user Target user object\n     */\n    onMentionsHoverMessage: PropTypes.func,\n    /**\n     * The handler for click event on @mention in message\n     *\n     * @param event Dom click event which triggered handler.\n     * @param user Target user object\n     */\n    onMentionsClickMessage: PropTypes.func,\n    /** Position of message in group. Possible values: top, bottom, middle, single */\n    groupStyles: PropTypes.array,\n  };\n\n  static defaultProps = {\n    Attachment,\n    groupStyles: ['single'],\n  };\n\n  state = {\n    actionsBoxOpen: false,\n    reactionSelectorOpen: false,\n  };\n\n  reactionSelectorRef = React.createRef();\n  editMessageFormRef = React.createRef();\n\n  onClickReactionsAction = () => {\n    this.setState(\n      {\n        reactionSelectorOpen: true,\n      },\n      () => document.addEventListener('click', this.hideReactions, false),\n    );\n  };\n\n  onClickOptionsAction = () => {\n    this.setState(\n      {\n        actionsBoxOpen: true,\n      },\n      () => document.addEventListener('click', this.hideOptions, false),\n    );\n  };\n\n  hideOptions = () => {\n    this.setState({\n      actionsBoxOpen: false,\n    });\n    document.removeEventListener('click', this.hideOptions, false);\n  };\n\n  hideReactions = (e) => {\n    if (\n      !this.reactionSelectorRef.current.reactionSelector.current.contains(\n        e.target,\n      )\n    ) {\n      this.setState({\n        reactionSelectorOpen: false,\n      });\n      document.removeEventListener('click', this.hideReactions, false);\n    }\n  };\n\n  onMouseLeaveMessage = () => {\n    this.hideOptions();\n    this.setState(\n      {\n        reactionSelectorOpen: false,\n      },\n      () => document.removeEventListener('click', this.hideReactions, false),\n    );\n  };\n\n  isMine() {\n    return this.props.isMyMessage(this.props.message);\n  }\n\n  renderStatus = () => {\n    const {\n      readBy,\n      message,\n      threadList,\n      client,\n      lastReceivedId,\n      t,\n    } = this.props;\n    if (!this.isMine() || message.type === 'error') {\n      return null;\n    }\n    const justReadByMe =\n      readBy.length === 1 && readBy[0] && readBy[0].id === client.user.id;\n    if (message.status === 'sending') {\n      return (\n        <span className=\"str-chat__message-team-status\">\n          <Tooltip>{t('Sending...')}</Tooltip>\n          <LoadingIndicator isLoading />\n        </span>\n      );\n    } else if (readBy.length !== 0 && !threadList && !justReadByMe) {\n      const lastReadUser = readBy.filter(\n        (item) => item.id !== client.user.id,\n      )[0];\n      return (\n        <span className=\"str-chat__message-team-status\">\n          <Tooltip>\n            {getReadByTooltipText(readBy, this.props.t, this.props.client)}\n          </Tooltip>\n          <Avatar\n            name={lastReadUser.name || lastReadUser.id}\n            image={lastReadUser.image}\n            size={15}\n          />\n          {readBy.length - 1 > 1 && (\n            <span className=\"str-chat__message-team-status-number\">\n              {readBy.length - 1}\n            </span>\n          )}\n        </span>\n      );\n    } else if (\n      message.status === 'received' &&\n      message.id === lastReceivedId &&\n      !threadList\n    ) {\n      return (\n        <span className=\"str-chat__message-team-status\">\n          <Tooltip>{t('Delivered')}</Tooltip>\n          <svg width=\"16\" height=\"16\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path\n              d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm3.72 6.633a.955.955 0 1 0-1.352-1.352L6.986 8.663 5.633 7.31A.956.956 0 1 0 4.28 8.663l2.029 2.028a.956.956 0 0 0 1.353 0l4.058-4.058z\"\n              fill=\"#006CFF\"\n              fillRule=\"evenodd\"\n            />\n          </svg>\n        </span>\n      );\n    } else {\n      return null;\n    }\n  };\n  componentWillUnmount() {\n    document.removeEventListener('click', this.hideOptions, false);\n    document.removeEventListener('click', this.hideReactions, false);\n  }\n\n  renderAttachments(attachments) {\n    const { Attachment, message, handleAction } = this.props;\n    return attachments.map((attachment, index) => (\n      <Attachment\n        key={`${message.id}-${index}`}\n        attachment={attachment}\n        actionHandler={handleAction}\n      />\n    ));\n  }\n\n  // eslint-disable-next-line\n  render() {\n    const {\n      message,\n      groupStyles,\n      editing,\n      clearEditingState,\n      updateMessage,\n      threadList,\n      initialMessage,\n      handleReaction,\n      channelConfig,\n      handleOpenThread,\n      Message,\n      messageListRect,\n      onMentionsHoverMessage,\n      onMentionsClickMessage,\n      unsafeHTML,\n      handleRetry,\n      getMessageActions,\n      isMyMessage,\n      handleFlag,\n      handleMute,\n      handleEdit,\n      handleDelete,\n      t,\n      tDateTimeParser,\n    } = this.props;\n    if (message.type === 'message.read') {\n      return null;\n    }\n    const hasAttachment = Boolean(\n      message.attachments && message.attachments.length,\n    );\n\n    if (message.deleted_at) {\n      return null;\n    }\n\n    let galleryImages =\n      message.attachments &&\n      message.attachments.filter((item) => item.type === 'image');\n    let attachments = message.attachments;\n    if (galleryImages && galleryImages.length > 1) {\n      attachments = message.attachments.filter((item) => item.type !== 'image');\n    } else {\n      galleryImages = [];\n    }\n\n    // determine reaction selector alignment\n    const reactionDirection = 'left';\n\n    if (editing) {\n      return (\n        <div\n          className={`str-chat__message-team str-chat__message-team--${groupStyles[0]} str-chat__message-team--editing`}\n          onMouseLeave={this.onMouseLeaveMessage}\n        >\n          {(groupStyles[0] === 'top' || groupStyles[0] === 'single') && (\n            <div className=\"str-chat__message-team-meta\">\n              <Avatar\n                image={message.user.image}\n                name={message.user.name || message.user.id}\n                size={40}\n              />\n            </div>\n          )}\n          <MessageInput\n            Input={EditMessageForm}\n            message={message}\n            clearEditingState={clearEditingState}\n            updateMessage={updateMessage}\n          />\n        </div>\n      );\n    }\n\n    return (\n      <React.Fragment>\n        <div\n          className={`str-chat__message-team str-chat__message-team--${\n            groupStyles[0]\n          } str-chat__message-team--${message.type} ${\n            threadList ? 'thread-list' : ''\n          } str-chat__message-team--${message.status}`}\n          onMouseLeave={this.onMouseLeaveMessage}\n        >\n          <div className=\"str-chat__message-team-meta\">\n            {groupStyles[0] === 'top' ||\n            groupStyles[0] === 'single' ||\n            initialMessage ? (\n              <Avatar\n                image={message.user.image}\n                name={message.user.name || message.user.id}\n                size={40}\n              />\n            ) : (\n              <div style={{ width: 40, marginRight: 0 }} />\n            )}\n\n            <time dateTime={message.created_at} title={message.created_at}>\n              {Boolean(Date.parse(message.created_at)) &&\n                tDateTimeParser(message.created_at).format('h:mmA')}\n            </time>\n          </div>\n          <div className=\"str-chat__message-team-group\">\n            {(groupStyles[0] === 'top' ||\n              groupStyles[0] === 'single' ||\n              initialMessage) && (\n              <div className=\"str-chat__message-team-author\">\n                <strong>{message.user.name || message.user.id}</strong>\n                {message.type === 'error' && (\n                  <div className=\"str-chat__message-team-error-header\">\n                    {t('Only visible to you')}\n                  </div>\n                )}\n              </div>\n            )}\n            <div\n              className={`str-chat__message-team-content str-chat__message-team-content--${\n                groupStyles[0]\n              } str-chat__message-team-content--${\n                message.text === '' ? 'image' : 'text'\n              }`}\n            >\n              {!initialMessage &&\n                message.status !== 'sending' &&\n                message.status !== 'failed' &&\n                message.type !== 'system' &&\n                message.type !== 'ephemeral' &&\n                message.type !== 'error' && (\n                  <div className={`str-chat__message-team-actions`}>\n                    {this.state.reactionSelectorOpen && (\n                      <ReactionSelector\n                        handleReaction={handleReaction}\n                        latest_reactions={message.latest_reactions}\n                        reaction_counts={message.reaction_counts}\n                        detailedView={true}\n                        direction={reactionDirection}\n                        ref={this.reactionSelectorRef}\n                      />\n                    )}\n\n                    {channelConfig && channelConfig.reactions && (\n                      <span\n                        title=\"Reactions\"\n                        dangerouslySetInnerHTML={{\n                          __html: reactionSvg,\n                        }}\n                        onClick={this.onClickReactionsAction}\n                      />\n                    )}\n                    {!threadList && channelConfig && channelConfig.replies && (\n                      <span\n                        title=\"Start a thread\"\n                        dangerouslySetInnerHTML={{\n                          __html: threadSvg,\n                        }}\n                        onClick={(e) => handleOpenThread(e, message)}\n                      />\n                    )}\n                    {getMessageActions().length > 0 && (\n                      <span onClick={this.onClickOptionsAction}>\n                        <span\n                          title=\"Message actions\"\n                          dangerouslySetInnerHTML={{\n                            __html: optionsSvg,\n                          }}\n                        />\n                        <MessageActionsBox\n                          getMessageActions={getMessageActions}\n                          Message={Message}\n                          open={this.state.actionsBoxOpen}\n                          message={message}\n                          messageListRect={messageListRect}\n                          mine={isMyMessage(message)}\n                          handleFlag={handleFlag}\n                          handleMute={handleMute}\n                          handleEdit={handleEdit}\n                          handleDelete={handleDelete}\n                        />\n                      </span>\n                    )}\n                  </div>\n                )}\n              <span\n                className={\n                  isOnlyEmojis(message.text)\n                    ? 'str-chat__message-team-text--is-emoji'\n                    : ''\n                }\n                onMouseOver={onMentionsHoverMessage}\n                onClick={onMentionsClickMessage}\n              >\n                {unsafeHTML ? (\n                  <div dangerouslySetInnerHTML={{ __html: message.html }} />\n                ) : (\n                  renderText(message)\n                )}\n              </span>\n\n              {galleryImages.length !== 0 && <Gallery images={galleryImages} />}\n\n              {message.text === '' && this.renderAttachments(attachments)}\n\n              {message.latest_reactions &&\n                message.latest_reactions.length !== 0 &&\n                message.text !== '' && (\n                  <SimpleReactionsList\n                    reaction_counts={message.reaction_counts}\n                    handleReaction={handleReaction}\n                    reactions={message.latest_reactions}\n                  />\n                )}\n              {message.status === 'failed' && (\n                <button\n                  className=\"str-chat__message-team-failed\"\n                  onClick={handleRetry.bind(this, message)}\n                >\n                  <svg\n                    width=\"14\"\n                    height=\"14\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path\n                      d=\"M7 0a7 7 0 1 0 0 14A7 7 0 0 0 7 0zm.875 10.938a.438.438 0 0 1-.438.437h-.875a.438.438 0 0 1-.437-.438v-.874c0-.242.196-.438.438-.438h.875c.241 0 .437.196.437.438v.874zm0-2.626a.438.438 0 0 1-.438.438h-.875a.438.438 0 0 1-.437-.438v-5.25c0-.241.196-.437.438-.437h.875c.241 0 .437.196.437.438v5.25z\"\n                      fill=\"#EA152F\"\n                      fillRule=\"evenodd\"\n                    />\n                  </svg>\n                  {t('Message failed. Click to try again.')}\n                </button>\n              )}\n            </div>\n            {this.renderStatus()}\n            {message.text !== '' &&\n              hasAttachment &&\n              this.renderAttachments(attachments)}\n            {message.latest_reactions &&\n              message.latest_reactions.length !== 0 &&\n              message.text === '' && (\n                <SimpleReactionsList\n                  reaction_counts={message.reaction_counts}\n                  handleReaction={handleReaction}\n                  reactions={message.latest_reactions}\n                />\n              )}\n            {!threadList && (\n              <MessageRepliesCountButton\n                onClick={handleOpenThread}\n                reply_count={message.reply_count}\n              />\n            )}\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nMessageTeam = withTranslationContext(MessageTeam);\n\nexport { MessageTeam };\n","import React from 'react';\n\nimport { withChannelContext, withTranslationContext } from '../context';\nimport { MessageList } from './MessageList';\nimport { MessageInput } from './MessageInput';\nimport PropTypes from 'prop-types';\n\nimport { Message } from './Message';\nimport { MessageInputSmall } from './MessageInputSmall';\nimport { smartRender } from '../utils';\n\n/**\n * Thread - The Thread renders a parent message with a list of replies. Use the standard message list of the main channel's messages.\n * The thread is only used for the list of replies to a message.\n * Underlying MessageList, MessageInput and Message components can be customized using props:\n * - additionalParentMessageProps\n * - additionalMessageListProps\n * - additionalMessageInputProps\n *\n * @example ./docs/Thread.md\n * @extends Component\n */\nclass Thread extends React.PureComponent {\n  static propTypes = {\n    /** Display the thread on 100% width of it's container. Useful for mobile style view */\n    fullWidth: PropTypes.bool,\n    /** Make input focus on mounting thread */\n    autoFocus: PropTypes.bool,\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n    channel: PropTypes.object.isRequired,\n    /** **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)** */\n    Message: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    /**\n     * **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)**\n     * The thread (the parent [message object](https://getstream.io/chat/docs/#message_format)) */\n    thread: PropTypes.oneOfType([PropTypes.object, PropTypes.bool]),\n    /**\n     * **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)**\n     * The array of immutable messages to render. By default they are provided by parent Channel component */\n    threadMessages: PropTypes.array.isRequired,\n    /**\n     * **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)**\n     *\n     * Function which provides next page of thread messages.\n     * loadMoreThread is called when infinite scroll wants to load more messages\n     * */\n    loadMoreThread: PropTypes.func.isRequired,\n    /**\n     * **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)**\n     * If there are more messages available, set to false when the end of pagination is reached.\n     * */\n    threadHasMore: PropTypes.bool,\n    /**\n     * **Available from [channel context](https://getstream.github.io/stream-chat-react/#channel)**\n     * If the thread is currently loading more messages. This is helpful to display a loading indicator on threadlist */\n    threadLoadingMore: PropTypes.bool,\n    /**\n     * Additional props for underlying Message component of parent message at the top.\n     * Available props - https://getstream.github.io/stream-chat-react/#message\n     * */\n    additionalParentMessageProps: PropTypes.object,\n    /**\n     * Additional props for underlying MessageList component.\n     * Available props - https://getstream.github.io/stream-chat-react/#messagelist\n     * */\n    additionalMessageListProps: PropTypes.object,\n    /**\n     * Additional props for underlying MessageInput component.\n     * Available props - https://getstream.github.io/stream-chat-react/#messageinput\n     * */\n    additionalMessageInputProps: PropTypes.object,\n    /** Customized MessageInput component to used within Thread instead of default MessageInput \n        Useable as follows:\n        ```\n        <Thread MessageInput={(props) => <MessageInput parent={props.parent} Input={MessageInputSmall} /> }/>\n        ```\n    */\n    MessageInput: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  };\n\n  static defaultProps = {\n    threadHasMore: true,\n    threadLoadingMore: true,\n    fullWidth: false,\n    autoFocus: true,\n    MessageInput,\n  };\n\n  render() {\n    if (!this.props.thread) {\n      return null;\n    }\n    const parentID = this.props.thread.id;\n    const cid = this.props.channel.cid;\n\n    const key = `thread-${parentID}-${cid}`;\n    // We use a wrapper to make sure the key variable is set.\n    // this ensures that if you switch thread the component is recreated\n    return <ThreadInner {...this.props} key={key} />;\n  }\n}\n\nclass ThreadInner extends React.PureComponent {\n  static propTypes = {\n    /** Channel is passed via the Channel Context */\n    channel: PropTypes.object.isRequired,\n    /** the thread (just a message) that we're rendering */\n    thread: PropTypes.object.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.messageList = React.createRef();\n  }\n\n  async componentDidMount() {\n    const parentID = this.props.thread.id;\n    if (parentID && this.props.thread.reply_count) {\n      await this.props.loadMoreThread();\n    }\n  }\n  getSnapshotBeforeUpdate(prevProps) {\n    // Are we adding new items to the list?\n    // Capture the scroll position so we can adjust scroll later.\n    if (prevProps.threadMessages.length < this.props.threadMessages.length) {\n      const list = this.messageList.current;\n      return list.scrollHeight - list.scrollTop;\n    }\n    return null;\n  }\n\n  async componentDidUpdate(prevProps, prevState, snapshot) {\n    const parentID = this.props.thread.id;\n    if (\n      parentID &&\n      this.props.thread.reply_count > 0 &&\n      this.props.threadMessages.length === 0\n    ) {\n      await this.props.loadMoreThread();\n    }\n\n    // If we have a snapshot value, we've just added new items.\n    // Adjust scroll so these new items don't push the old ones out of view.\n    // (snapshot here is the value returned from getSnapshotBeforeUpdate)\n    if (snapshot !== null) {\n      const list = this.messageList.current;\n\n      const scrollDown = () => {\n        list.scrollTop = list.scrollHeight - snapshot;\n      };\n      scrollDown();\n      // scroll down after images load again\n      setTimeout(scrollDown, 100);\n    }\n  }\n\n  render() {\n    if (!this.props.thread) {\n      return null;\n    }\n\n    const { t } = this.props;\n    const read = {};\n    return (\n      <div\n        className={`str-chat__thread ${\n          this.props.fullWidth ? 'str-chat__thread--full' : ''\n        }`}\n      >\n        <div className=\"str-chat__thread-header\">\n          <div className=\"str-chat__thread-header-details\">\n            <strong>{t('Thread')}</strong>\n            <small>\n              {' '}\n              {t('{{ replyCount }} replies', {\n                replyCount: this.props.thread.reply_count,\n              })}\n            </small>\n          </div>\n          <button\n            onClick={(e) => this.props.closeThread(e)}\n            className=\"str-chat__square-button\"\n          >\n            <svg width=\"10\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path\n                d=\"M9.916 1.027L8.973.084 5 4.058 1.027.084l-.943.943L4.058 5 .084 8.973l.943.943L5 5.942l3.973 3.974.943-.943L5.942 5z\"\n                fillRule=\"evenodd\"\n              />\n            </svg>\n          </button>\n        </div>\n        <div className=\"str-chat__thread-list\" ref={this.messageList}>\n          <Message\n            message={this.props.thread}\n            initialMessage\n            threadList\n            Message={this.props.Message}\n            // TODO: remove the following line in next release, since we already have additionalParentMessageProps now.\n            {...this.props}\n            {...this.props.additionalParentMessageProps}\n          />\n          <div className=\"str-chat__thread-start\">\n            {t('Start of a new thread')}\n          </div>\n          <MessageList\n            messages={this.props.threadMessages}\n            read={read}\n            threadList\n            loadMore={this.props.loadMoreThread}\n            hasMore={this.props.threadHasMore}\n            loadingMore={this.props.threadLoadingMore}\n            Message={this.props.Message}\n            {...this.props.additionalMessageListProps}\n          />\n          {smartRender(this.props.MessageInput, {\n            MessageInputSmall,\n            parent: this.props.thread,\n            focus: this.props.autoFocus,\n            ...this.props.additionalMessageInputProps,\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n\nThread = withChannelContext(withTranslationContext(Thread));\nexport { Thread };\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Avatar } from './Avatar';\n\nexport class TypingIndicator extends React.PureComponent {\n  static propTypes = {\n    /** @see See [chat context](https://getstream.github.io/stream-chat-react/#chatcontext) doc */\n    client: PropTypes.object,\n    /** @see See [channel context](https://getstream.github.io/stream-chat-react/#channelcontext) doc */\n    typing: PropTypes.object,\n  };\n\n  render() {\n    // if (Object.keys(this.props.typing).length <= 0) {\n    //   return null;\n    // }\n\n    const typing = Object.values(this.props.typing);\n    let show;\n    if (\n      typing.length === 0 ||\n      (typing.length === 1 && typing[0].user.id === this.props.client.user.id)\n    ) {\n      show = false;\n    } else {\n      show = true;\n    }\n    return (\n      <div\n        className={`str-chat__typing-indicator ${\n          show ? 'str-chat__typing-indicator--typing' : ''\n        }`}\n      >\n        <div className=\"str-chat__typing-indicator__avatars\">\n          {typing\n            .filter(({ user }) => user.id !== this.props.client.user.id)\n            .map(({ user }) => (\n              <Avatar\n                image={user.image}\n                size={32}\n                name={user.name || user.id}\n                key={user.id}\n              />\n            ))}\n        </div>\n        <div className=\"str-chat__typing-indicator__dots\">\n          <span className=\"str-chat__typing-indicator__dot\" />\n          <span className=\"str-chat__typing-indicator__dot\" />\n          <span className=\"str-chat__typing-indicator__dot\" />\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { withChannelContext } from '../context';\n\n/**\n * Window - A UI component for conditionally displaying thread or channel.\n *\n * @example ./docs/Window.md\n * @extends PureComponent\n */\nclass Window extends React.PureComponent {\n  static propTypes = {\n    /** show or hide the window when a thread is active */\n    hideOnThread: PropTypes.bool,\n    /** Flag if thread is open or not */\n    thread: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]),\n  };\n\n  static defaultProps = {\n    hideOnThread: false,\n  };\n\n  render() {\n    const { thread, hideOnThread, children } = this.props;\n\n    // If thread is active and window should hide on thread. Return null\n    if (thread && hideOnThread) {\n      return null;\n    }\n    return <div className={`str-chat__main-panel`}>{children}</div>;\n  }\n}\n\nWindow = withChannelContext(Window);\nexport { Window };\n"],"names":["defaultNS","defaultLng","Dayjs","extend","updateLocale","calendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","sameElse","meridiemParse","meridiemHour","hour","meridiem","en_locale","weekdays","split","months","defaultStreami18nOptions","language","disableDateTimeTranslations","debug","logger","msg","console","warn","dayjsLocaleConfigForLanguage","DateTimeParser","Streami18n","options","i18n","createInstance","en","enTranslations","nl","nlTranslations","ru","ruTranslations","tr","trTranslations","fr","frTranslations","hi","hiTranslations","it","itTranslations","isCustomDateTimeParser","Object","keys","Ls","indexOf","availableLanguages","translations","currentLanguage","getAvailableLanguages","i18nInstance","finalOptions","LocalizedFormat","localeData","relativeTime","error","Error","translationsForLanguage","i18nextConfig","nsSeparator","keySeparator","fallbackLng","lng","interpolation","escapeValue","parseMissingKeyHandler","key","validateCurrentLanguage","addOrUpdateLocale","localeExists","tDateTimeParser","timestamp","locale","init","resources","t","initialized","dayjsLocales","translation","customDayjsLocale","addResources","config","name","changeLanguage","setLanguageCallback","callback","SafeAnchor","props","href","sanitizeUrl","React","children","PureComponent","ChatContext","createContext","client","withChatContext","OriginalComponent","ContextAwareComponent","ContextComponent","context","mergedProps","displayName","replace","ChannelContext","withChannelContext","channelContext","TranslationContext","input","withTranslationContext","translationContext","Card","url","trimmedUrl","undefined","title","title_link","text","type","image_url","thumb_url","og_scrape_url","image","trimUrl","giphyLogo","PropTypes","string","Image","modalIsOpen","currentIndex","setState","state","fallback","formattedArray","src","toggleModal","ModalGateway","Modal","Carousel","AttachmentActions","id","actions","actionHandler","map","action","style","value","bind","isRequired","array","func","Audio","audioRef","current","pause","updateProgress","playing","setInterval","play","window","clearInterval","position","currentTime","duration","progress","pauseAudio","open","og","asset_url","React.createElement","playAudio","description","width","object","Attachment","createRef","a","renderAttachmentActions","extra","length","attachment","attachmentType","results","push","FileIcon","mime_type","file_size","prettybytes","renderAttachment","attachmentRef","propTypes","Avatar","errored","loaded","slice","charAt","prevProps","size","shape","initials","getInitials","height","flexBasis","lineHeight","fontSize","objectFit","onLoad","onError","oneOf","number","LoadingIndicator","color","stopRef","stopColor","LoadingErrorIndicator","errorMessage","message","oneOfType","bool","emojiSetDef","spriteUrl","sheetColumns","sheetRows","sheetSize","commonEmoji","emoticons","short_names","custom","defaultMinimalEmojis","colons","sheet_x","sheet_y","d","assign","data","emojis","emojiData","isOnlyEmojis","noEmojis","emojiRegex","noSpace","isPromise","thing","then","byDate","b","created_at","formatArray","dict","currentUserId","arr2","arr3","forEach","item","i","user","outStr","join","renderText","mentioned_users","allowed","urls","anchorme","list","urlInfo","displayLink","truncate","encoded","omission","mkdown","protocol","raw","newText","username","re","RegExp","generateRandomId","S4","Math","random","toString","substring","smartRender","ElementOrComponentOrLiteral","isValidElement","element","ComponentOrLiteral","MESSAGE_ACTIONS","edit","delete","flag","mute","filterEmoji","emoji","getReadByTooltipText","users","otherUsers","filter","slicedArr","restLength","firstUser","secondUser","lastUser","splice","commaSeparatedUsers","moreCount","MessageActionsBox","reverse","rect","actionsBoxRef","getBoundingClientRect","ml","messageListRect","mine","left","right","handleFlag","handleMute","handleEdit","handleDelete","getMessageActions","messageActions","Component","Message","node","ReactionsList","reactions","reactionsByType","reactionsEmojis","reactionOptions","reduce","acc","cur","NimbleEmoji","reaction_counts","count","onClick","reactionList","_renderReactions","_getReactionCount","Tooltip","Gallery","index","images","backgroundImage","imageCount","arrayOf","ReactionSelector","e","target","showTooltip","setTooltipPosition","setArrowPosition","arrowPosition","positionCaculated","filtered","getUsersPerReaction","reactionSelector","reactionSelectorTooltip","getContainerDimensions","container","getToolTipDimensions","tooltip","x","latest_reactions","reaction","getUserNames","latestUser","getLatestUser","handleReaction","Boolean","detailedView","hideTooltip","positionCalculated","reactionSelectorInner","visibility","opacity","renderUsers","renderReactionItems","MessageRepliesCountButton","reply_count","labelSingle","labelPlural","singleReplyText","pluralReplyText","replyCount","innerRef","contains","onClose","document","removeEventListener","handleEscKey","addEventListener","keyCode","openClasses","handleClick","KEY_CODES","ESC","UP","DOWN","ENTER","TAB","SPACE","Listener","refCount","f","keyCodes","fn","listeners","code","which","values","includes","Item","onSelectHandler","component","onClickHandler","selected","className","selectItem","List","selectedItem","preventDefault","modifyText","getPositionInList","findIndex","getId","textToReplace","getTextToReplace","onSelect","getSelectedItem","keyboard","dropdownScroll","itemsRef","oldPosition","newPosition","Listeners","add","scroll","onPressEnter","newValues","val","cachedValues","listener","pop","remove","itemClassName","itemStyle","__html","renderHeader","ref","isSelected","defaultScrollToItem","itemHeight","parseInt","getComputedStyle","getPropertyValue","containerHight","itemOffsetTop","offsetTop","actualScrollTop","scrollTop","DEFAULT_CARET_POSITION","ReactTextareaAutocomplete","textareaRef","selectionStart","selectionEnd","substr","focus","setSelectionRange","event","trigger","currentTrigger","hasFocus","matches","shiftKey","_replaceWord","handleSubmit","replaceWord","lastWordRegex","match","exec","getCaretPosition","lastWord","spaces","newWord","textBeforeWord","textAfterCaret","CustomEvent","bubbles","dispatchEvent","onChange","newToken","textareaValue","computeCaretPosition","token","startToken","Number","isInteger","textToModify","startOfTokenPosition","search","allowWhitespace","newTokenString","caretPosition","newCaretPosition","modifiedText","dataLoading","setCaretPosition","_closeAutocomplete","triggerSettings","_getCurrentTriggerSettings","actualToken","output","String","dataProvider","providedData","Promise","resolve","Array","isArray","catch","tokenRegExp","top","notSafe","prop","minChar","onCaretPositionChange","movePopupAsYouType","textarea","persist","tokenMatch","lastToken","find","afterWhitespace","getCaretCoordinates","newTop","newLeft","_getValuesFromProvider","err","closeOnClickOutside","onBlur","el","relatedTarget","dropdownRef","Node","scrollToItem","loadingComponent","_createRegExp","listenerIndex","_onSpace","_onEnter","startListen","nextProps","_update","stopListen","oldValue","oldTrigger","Loader","listClassName","dropdownClassName","dropdownStyle","containerStyle","containerClassName","loaderStyle","loaderClassName","suggestionData","_getSuggestions","_getTextToReplace","_getItemOnSelect","maxRows","grow","_onSelect","_dropdownScroll","_cleanUpProps","_changeHandler","_selectHandler","_onScrollHandler","_onClickAndBlurHandler","onFocus","additionalTextareaProps","triggerPropsCheck","triggers","entries","triggerChar","settings","triggerSetting","listStyle","EmoticonItem","entity","native","char","UserItem","u","CommandItem","c","args","ChatAutoComplete","q","emojiIndex","matchingUsers","toLowerCase","onSelectItem","selectedCommands","commands","sort","nameA","nameB","word","found","AutoCompleteTextarea","getTriggers","emojiReplace","rows","placeholder","onPaste","disabled","MessageInputLarge","imageOrder","ImagePreviewer","imageUploads","removeImage","uploadImage","uploadNewFiles","multipleUploads","numberOfUploads","maxNumberOfFiles","fileOrder","FilePreviewer","fileUploads","removeFile","uploadFile","emojiPickerIsOpen","emojiPickerRef","Picker","onSelectEmoji","SendButton","ImageDropzone","acceptedFiles","renderUploads","renderEmojiPicker","getUsers","getCommands","handleChange","openEmojiPicker","FileUploadButton","watcher_count","watcherCount","constructTypingString","typing","MessageInputLargeWithContext","sendMessage","Element","prototype","msMatchesSelector","webkitMatchesSelector","MessageInput","showEmojiPicker","closeEmojiPicker","insertText","textToInsert","prevState","prevText","textareaElement","newCursorPosition","channel","getConfig","members","watchers","member","userMap","logChatPromiseExecution","keystroke","editing","trimmedMessage","trim","isEmptyMessage","hasFiles","attachments","dupe","attach","file","upload","updatedMessage","clearEditingState","updateMessagePromise","editMessage","overrideSubmitHandler","uniq","parent","cid","Immutable","sendMessagePromise","stopTyping","files","startsWith","_uploadNewImage","File","noFiles","_uploadNewFile","concat","setIn","FileReader","reader","onload","result","readAsDataURL","_uploadImage","_uploadFile","img","response","doImageUploadRequest","sendImage","alreadyRemoved","errorHandler","feedGroup","userId","doFileUploadRequest","sendFile","set","_id","items","clipboardData","dataTransferItemsHaveFiles","kind","plainTextPromise","getAsString","s","dataTransferItemsToFiles","fileLikes","_uploadNewFiles","mention","filePanelIsOpen","panelRef","hideFilePanel","Input","handlers","_removeImage","_removeFile","_onPaste","_onSelectItem","EditMessageForm","MessageSimple","isFocused","actionsBoxOpen","showDetailedReactions","hideOptions","_closeDetailedReactions","reactionSelectorRef","readBy","threadList","lastReceivedId","isMine","justReadByMe","status","lastReadUser","_onClickOptionsAction","deleted_at","isMyMessage","initialMessage","channelConfig","handleOpenThread","renderMessageActions","replies","_clickReactionList","handleRetry","updateMessage","actionsEnabled","handleAction","onMentionsHoverMessage","onMentionsClickMessage","unsafeHTML","when","messageClasses","hasAttachment","hasReactions","additionalMessageInputProps","_hideOptions","messageRef","renderStatus","renderOptions","html","Channel","EmptyPlaceholder","watch","onMentionsClick","onMentionsHover","doSendMessageRequest","doUpdateMessageRequest","ChannelInner","threadMessages","threads","thread","threadLoadingMore","parentID","oldMessages","oldestMessageID","limit","getReplies","id_lt","queryResponse","hasMore","messages","_loadMoreThreadFinishedDebounced","threadHasMore","extraState","addMessageSorted","parent_id","removeMessage","clientSideID","userID","uuidv4","Date","messageData","messageResponse","filterErrorMessages","messagePreview","createMessagePreview","messageInput","userAutocomplete","_sendMessage","asMutable","threadState","messageToImmutable","mainChannelUpdated","show_in_channel","Visibility","_markReadThrottled","unread","countUnread","lastRead","originalTitle","addToEventHistory","_setStateThrottled","read","lastMessageId","eventHistory","disconnected","read_events","markRead","loadingMore","oldestMessage","oldestID","perPage","query","_loadMoreFinishedDebounced","tagName","textContent","innerHTML","userName","retrySendMessage","loadMore","openThread","closeThread","loadMoreThread","_onMentionsHoverOrClick","loading","online","debounce","loadMoreFinished","leading","trailing","loadMoreThreadFinished","throttle","copyChannelState","listenToChanges","off","handleEvent","cancel","visibilityListener","unbind","selectRegularMessages","on","boundMarkRead","change","core","getContext","renderComponent","theme","ChannelHeader","live","MemberList","openMobileNav","subtitle","member_count","memberCount","ChannelPreviewLastMessage","setActiveChannel","channelPreviewButton","blur","displayTitle","displayImage","unreadClass","activeClass","active","isDm","lastUpdatedAt","moment","last_message_at","onSelectChannel","latestMessage","latestMessageLength","diff","format","fromNow","activeChannel","ChannelPreviewCountOnly","ChannelPreview","isActive","lastMessage","command","otherMember","m","Preview","getLatestMessage","getDisplayTitle","getDisplayImage","EmptyStateIndicator","listType","Indicator","LoadingChannels","LoadMoreButton","refreshing","LoadMorePaginator","React.Fragment","hasNextPage","loadNextPage","ChatDown","ChannelListTeam","showSidebar","sidebarImage","chevrondown","ChannelList","filters","setActiveChannelOnMount","offset","newOptions","channelPromise","queryChannels","channelQueryResponse","channels","loadingChannels","customActiveChannel","moveChannelUp","newChannels","lockChannelOrder","connectionRecoveredCount","onMessageNew","getChannel","uniqBy","onAddedToChannel","onRemovedFromChannel","channelIndex","channelUpdateCount","onChannelUpdated","onChannelDeleted","onChannelTruncated","log","unshift","channelListRef","navOpen","closeMobileNav","channelSearchResults","menuButton","info","_handleClickOutside","deepequal","messageSearchResults","$eq","searchResults","Paginator","Header","view","_renderChannel","ChannelListMessenger","ChannelPreviewCompact","unread_count","ChannelPreviewMessenger","ChannelSearch","Chat","setTimeout","streami18n","registerSetLanguageCallback","getTranslators","DateSeparator","parse","date","formatDate","toISOString","instanceOf","EventComponent","sentence","InfiniteScroll","scrollListener","attachScrollListener","detachScrollListener","detachMousewheelListener","loader","defaultLoader","scrollEl","useWindow","scrollComponent","parentNode","mousewheelListener","useCapture","getParentElement","isLoading","initialLoad","deltaY","doc","documentElement","body","pageYOffset","isReverse","calculateOffset","scrollHeight","clientHeight","threshold","offsetParent","calculateTopPosition","offsetHeight","innerHeight","renderProps","filterProps","pageStart","childrenArray","createElement","InfiniteScrollPaginator","role","membership","isModerator","isOwner","isAdmin","canEditMessage","returnValue","apply","getFlagMessageSuccessNotification","getFlagMessageErrorNotification","addNotification","flagMessage","successMessage","validateAndGetNotificationMessage","getMuteUserSuccessNotification","getMuteUserErrorNotification","muteUser","setEditingState","deleteMessage","reactionType","userExistingReaction","currentUser","own_reactions","originalMessage","reactionChangePromise","deleteReaction","messageID","sendReaction","formData","sendAction","messageActionsProps","mutes","messageActionsAfterPermission","canDeleteMessage","shouldUpdate","reason","groupStyles","MessageActions","actionBox","_closeActionBox","reactionBox","reactionsBox","actionsRef","onClickReact","_openActionBox","MessageCommerce","MessageInputFlat","MessageInputFlatWithContext","MessageInputSmall","openFilePanel","MessageInputSmallWithContext","ReverseInfiniteScroll","scrollEventCount","reverseOffset","standardOffset","listenToScroll","MessageNotification","showNotification","MessageList","_scrollToRef","bottomRef","messageList","scrollDown","scrollToTarget","call","containerEl","isElement","nodeType","isNumber","newMessages","messageDate","toDateString","prevMessageDate","eventsNextToMessage","headerPosition","messageTime","getTime","nextMessageTime","scrollToBottom","newMessagesNotification","readData","readState","last_read","userLastReadMsgId","updated_at","scrollOffset","userScrolledUp","l","messageGroupStyles","previousMessage","nextMessage","isTopMessage","isBottomMessage","noGroupByUser","notificationText","nextIndex","newNotifications","notifications","ct","notification","notificationTimeouts","messageLimit","messageRefs","connectionChanged","keypress","clearTimeout","offsetBottom","snapshot","currentLastMessage","previousLastMessage","hasNewMessage","allMessages","MessageSystem","insertDates","HeaderComponent","insertIntro","getGroupStyles","TypingIndicator","dateSeparator","getReadStates","getLastReceived","elements","_loadMore","goToNewMessages","Center","Notification","SimpleReactionsList","setUsernames","getReactionsByType","getUsernames","renderUsernames","renderReactions","getReactionCount","reactionSvg","threadSvg","optionsSvg","MessageLivestream","reactionSelectorOpen","hideReactions","galleryImages","onMouseLeaveMessage","onClickReactionsAction","onClickOptionsAction","MessageTeam","reactionDirection","marginRight","renderAttachments","Thread","fullWidth","autoFocus","additionalParentMessageProps","additionalMessageListProps","ThreadInner","show","Window","hideOnThread"],"mappings":"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"}